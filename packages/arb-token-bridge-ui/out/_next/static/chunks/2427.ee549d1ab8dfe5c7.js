(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2427],{94608:function(e,t){"use strict";t.Z={src:"/_next/static/media/arbinaut-fixing-spaceship.dafe6a86.webp",height:1402,width:934,blurDataURL:"data:image/webp;base64,UklGRpAAAABXRUJQVlA4WAoAAAAQAAAABAAABwAAQUxQSCkAAAAAOhwAAAC4eAMCADP9ZwIBif+wPxqk/7LYbeb/4/KDqPyMZHwACwEBKQBWUDggQAAAAPABAJ0BKgUACAACQDgllAJ0BpN7xsoWWAD+8VVwbUR3RCNvz87ABwyDbuFlO3672k6T+AdH6KL2XS2x3SvBZAA=",blurWidth:5,blurHeight:8}},52392:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return App}});var s,r,n,i,o,l,d,c,u,m,p,h,x,f,g,b,w,y,C,v,A,T,k,N,j,S,D,E,L,I,R,M,U,O,_,B,P,F,G,W,H,Z={};a.r(Z),a.d(Z,{getFailedRetryablesToRedeem:function(){return getFailedRetryablesToRedeem},getPendingTransactions:function(){return getPendingTransactions},getSortedTransactions:function(){return getSortedTransactions},l1DepositsWithUntrackedL2Messages:function(){return l1DepositsWithUntrackedL2Messages},reset:function(){return actions_reset},setArbTokenBridge:function(){return setArbTokenBridge},setArbTokenBridgeLoaded:function(){return setArbTokenBridgeLoaded},setChainIds:function(){return setChainIds},setConnectionState:function(){return setConnectionState},setIsDepositMode:function(){return setIsDepositMode},setSelectedToken:function(){return setSelectedToken},setWarningTokens:function(){return setWarningTokens},setWhitelistState:function(){return setWhitelistState}});var z=a(52322),Y=a(2784),X=a(69702),V=a(37948),K=a(10501),q=a(39865),J=a(90162),Q=a(6726),$=a(11595),ee=a(76940),et=a(3081),ea=a(49288),es=a(15198),er=a(96577),en=a.n(er),ei=a(92642),eo=a(20324);let el=(0,Y.forwardRef)((e,t)=>{let{variant:a,loading:s,loadingProps:r,disabled:n,className:i,children:o,...l}=e;return(0,z.jsx)("button",{ref:t,type:"button",disabled:n,className:(0,eo.m6)("arb-hover w-max rounded-lg px-4 py-3 text-sm","disabled:bg-gray-3 disabled:text-white disabled:cursor-not-allowed",function(e){switch(e){case"primary":return"bg-dark text-white";case"secondary":return"bg-transparent text-dark"}}(a),i),...l,children:(0,z.jsxs)("div",{className:"flex flex-row items-center justify-".concat(l.textLeft?"start":"center"," space-x-3"),children:[(s||!1)&&(0,z.jsx)(ea.a,{color:(null==r?void 0:r.loaderColor)||"white",size:(null==r?void 0:r.loaderSize)||"small"}),(0,z.jsx)("span",{children:o})]})})});el.displayName="Button";var ed=a(44754),ec=a(68810),eu=a(85116),em=a(79705);function useDialog(e){var t,a;let s=(0,Y.useRef)(),[r,n]=(0,Y.useState)(null!==(t=null==e?void 0:e.defaultIsOpen)&&void 0!==t&&t),[i,o]=(0,Y.useState)(null!==(a=null==e?void 0:e.defaultIsOpen)&&void 0!==a&&a),l=(0,Y.useCallback)(()=>(n(!0),o(!0),()=>new Promise(e=>{s.current=e})),[]),d=(0,Y.useCallback)((e,t)=>{void 0!==s.current&&s.current([e,t]),n(!1)},[]);return[{isOpen:r,onClose:d},l,{didOpen:i}]}function Dialog(e){let t=e.isCustom||!1,a=e.closeable||!1,s=e.className||"",r=(0,Y.useRef)(null);return(0,z.jsx)(ec.u,{appear:!0,show:e.isOpen,as:Y.Fragment,...(0,em.C)("normal"),children:(0,z.jsx)(es.V,{static:!0,as:"div",open:e.isOpen,initialFocus:e.initialFocus||r,onClose:()=>e.onClose(!1),className:"fixed inset-0 z-50 flex bg-[rgba(0,0,0,0.6)] md:items-center md:justify-center",children:(0,z.jsx)("div",{className:(0,eo.m6)("z-10 max-h-screen w-full overflow-y-auto bg-white md:max-h-[calc(100vh-80px)] md:w-auto md:rounded-xl md:shadow-[0px_4px_12px_#acacac]",s),children:t?e.children:(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"flex items-center justify-between px-8 py-4",children:[(0,z.jsx)(es.V.Title,{className:"text-2xl font-medium",children:e.title}),a&&(0,z.jsx)("button",{type:"button",onClick:()=>e.onClose(!1),children:(0,z.jsx)(eu.Z,{className:"arb-hover h-5 w-5"})})]}),(0,z.jsx)("div",{className:"flex-grow px-8 py-4",children:e.children}),(0,z.jsxs)("div",{className:"flex flex-row justify-end space-x-2 px-8 py-3 md:rounded-bl-xl md:rounded-br-xl md:bg-gray-2",children:[(0,z.jsx)(el,{ref:r,variant:"secondary",onClick:()=>e.onClose(!1),"aria-label":"Dialog Cancel",...e.cancelButtonProps||{},children:"Cancel"}),(0,z.jsx)(el,{variant:"primary",onClick:()=>e.onClose(!0),...e.actionButtonProps||{},"aria-label":e.actionButtonTitle||"Dialog Continue",children:e.actionButtonTitle||"Continue"})]})]})})})})}var ep=a(33945);function WelcomeDialog(e){let t=(0,Y.useRef)(null),{openConnectModal:a}=(0,K.We)();return(0,z.jsxs)(Dialog,{...e,initialFocus:t,isCustom:!0,className:"mx-auto my-3 flex max-w-[340px] flex-col rounded-lg px-8 py-4 md:max-w-[600px]",children:[(0,z.jsx)(es.V.Title,{className:"text-2xl font-medium",children:"Welcome"}),(0,z.jsxs)("div",{className:"flex grow flex-col items-center gap-8 md:flex-row md:items-stretch",children:[(0,z.jsx)(en(),{src:"/images/arbinaut-flying.webp",alt:"An Astronaut in an Arbitrum space suit",width:256,height:383,className:"h-[55vh] max-h-[383px] w-auto"}),(0,z.jsxs)("div",{className:"flex grow flex-col justify-between font-light",children:[(0,z.jsx)("p",{children:"We will NEVER ask you for your seed phrase or private keys."}),(0,z.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,z.jsxs)("p",{className:"text-sm",children:["By clicking the button below, you agree to our"," ",(0,z.jsx)(ed.d,{href:"https://arbitrum.io/tos",className:"arb-hover underline",children:"Terms of Service."})]}),(0,z.jsx)(el,{ref:t,variant:"primary",className:"w-full",onClick:()=>{e.onClose(!0);try{null==a||a()}catch(e){(0,ep.Jc)("Failed to open up RainbowKit Connect Modal"),ei.Tb(e)}},children:"Agree to terms"})]})]})]})]})}var eh=a(66131),ex=a(15228);function BlockedDialog(e){return(0,z.jsx)(Dialog,{...e,isCustom:!0,children:(0,z.jsxs)("div",{className:"px-8 py-8",children:[(0,z.jsxs)(es.V.Title,{className:"flex items-center space-x-2 text-2xl font-medium",children:[(0,z.jsx)(eh.Z,{className:"h-8 w-8"}),(0,z.jsx)("span",{className:"uppercase",children:"This wallet address is blocked"})]}),(0,z.jsx)("div",{className:"h-4"}),(0,z.jsxs)("div",{className:"flex flex-col space-y-8 break-words",children:[(0,z.jsx)("span",{className:"text-gray-dark",children:e.address.toLowerCase()}),(0,z.jsx)("span",{children:"This address is affiliated with a blocked activity."}),(0,z.jsxs)("span",{children:["If you think this was an error, you can request a review by filing a"," ",(0,z.jsx)(ed.d,{href:ex.sR,className:"arb-hover underline",children:"support ticket"}),"."]})]})]})})}(s=y||(y={}))[s.DEPOSITS=0]="DEPOSITS",s[s.WITHDRAWALS=1]="WITHDRAWALS",s[s.CCTP=2]="CCTP";let ef={layout:{isTransferPanelVisible:!0,isTransferring:!1,isTransactionHistoryPanelVisible:!1,isTransactionHistoryShowingCctpDeposits:!0,transactionHistorySelectedTab:0}},eg=(0,Y.createContext)([ef,()=>{}]);function reducer(e,t){switch(t.type){case"layout.set_is_transfer_panel_visible":return{...e,layout:{...e.layout,isTransferPanelVisible:t.payload}};case"layout.set_txhistory_panel_visible":return{...e,layout:{...e.layout,isTransactionHistoryPanelVisible:t.payload}};case"layout.set_txhistory_show_cctp_deposits":return{...e,layout:{...e.layout,isTransactionHistoryShowingCctpDeposits:t.payload}};case"layout.set_is_transferring":return{...e,layout:{...e.layout,isTransferring:t.payload}};case"layout.set_txhistory_tab":return{...e,layout:{...e.layout,transactionHistorySelectedTab:t.payload}};default:return e}}function AppContextProvider(e){let{children:t}=e,[a,s]=(0,Y.useReducer)(reducer,ef);return(0,z.jsx)(eg.Provider,{value:[a,s],children:t})}function useAppContextState(){let[e]=(0,Y.useContext)(eg);return e}let useAppContextActions=e=>{let[,t]=(0,Y.useContext)(eg),a=null!=e?e:t,s=(0,Y.useCallback)(()=>{a({type:"layout.set_txhistory_show_cctp_deposits",payload:!0})},[a]),r=(0,Y.useCallback)(()=>{a({type:"layout.set_txhistory_show_cctp_deposits",payload:!1})},[a]),n=(0,Y.useCallback)(e=>{a({type:"layout.set_txhistory_tab",payload:e})},[a]);return{setTransferring:e=>{a({type:"layout.set_is_transferring",payload:e})},openTransactionHistoryPanel:()=>{a({type:"layout.set_txhistory_panel_visible",payload:!0})},closeTransactionHistoryPanel:()=>{a({type:"layout.set_txhistory_panel_visible",payload:!1})},showCctpDepositsTransactions:s,showCctpWithdrawalsTransactions:r,setTransactionHistoryTab:n}};var eb=a(19679),ew=a(7279),ey=a(70428),eC=a(29482),ev=a(31306),eA=a(77722),eT=a(28879),ek=a.n(eT),eN=a(10528),ej=a(59656);(C||(C={})).ERC20="ERC20",(r=v||(v={})).ERC20="ERC20",r.ETH="ETH",(n=A||(A={}))[n.NODE_NOT_CREATED=0]="NODE_NOT_CREATED",n[n.EXECUTE_CALL_EXCEPTION=1]="EXECUTE_CALL_EXCEPTION";var eS=a(95965),eD=a(90711),eE=a(20668),eL=a(58261);let eI=new Set(["deposit-l2-auto-redeem","deposit-l2-ticket-created","deposit-l2"]),txnTypeToLayer=e=>{switch(e){case"deposit":case"deposit-l1":case"outbox":case"approve":return 1;case"deposit-l2":case"withdraw":case"deposit-l2-auto-redeem":case"deposit-l2-ticket-created":case"approve-l2":return 2}};function updateStatus(e,t,a){let s=[...e],r=s.findIndex(e=>e.txID===a),n=s[r];return n?(s[r]={...n,status:t},s):(console.warn("transaction not found",a),e)}let localStorageReducer=(e,t)=>{let a=function(e,t){switch(t.type){case"SET_INITIAL_TRANSACTIONS":return[...t.transactions];case"ADD_TRANSACTIONS":{let a=new Set(e.map(e=>e.txID)),s=t.transactions.filter(e=>!a.has(e.txID)||(console.warn("Warning: trying to add ".concat(e.txID," which is already included")),!1));return e.concat(s)}case"ADD_TRANSACTION":return e.concat(t.transaction);case"REMOVE_TRANSACTION":return e.filter(e=>e.txID!==t.txID);case"SET_SUCCESS":return updateStatus(e,"success",t.txID);case"SET_FAILURE":return updateStatus(e,"failure",t.txID);case"CLEAR_PENDING":return e.filter(e=>"pending"!==e.status);case"CONFIRM_TRANSACTION":return updateStatus(e,"confirmed",t.txID);case"SET_BLOCK_NUMBER":return function(e,t,a){let s=[...e],r=s.findIndex(e=>e.txID===t),n=s[r];return n?(s[r]={...n,blockNumber:a},s):(console.warn("transaction not found",t),e)}(e,t.txID,t.blockNumber);case"SET_RESOLVED_TIMESTAMP":return function(e,t,a){let s=[...e],r=s.findIndex(e=>e.txID===t),n=s[r];return n?(s[r]={...n,timestampResolved:a},s):(console.warn("transaction not found",t),e)}(e,t.txID,t.timestamp);case"UPDATE_L1TOL2MSG_DATA":return function(e,t,a){let s=[...e],r=s.findIndex(e=>e.txID===t),n=s[r];if(!n)return console.warn("transaction not found",t),e;if(!("deposit"===n.type||"deposit-l1"===n.type))throw Error("Attempting to add a l1tol2msg to a tx that isn't a deposit:"+t);let i=n.l1ToL2MsgData;return i?s[r]={...n,l1ToL2MsgData:{...i,...a}}:s[r]={...n,l1ToL2MsgData:{status:a.status,retryableCreationTxID:a.retryableCreationTxID,fetchingUpdate:!1}},s}(e,t.txID,t.l1ToL2MsgData);case"SET_TRANSACTIONS":return t.transactions;default:return e}}(e,t),s=a.map(e=>e.l1ToL2MsgData&&e.l1ToL2MsgData.fetchingUpdate?{...e,l1ToL2MsgData:{...e.l1ToL2MsgData,fetchingUpdate:!1}}:e);return window.localStorage.setItem("arbTransactions",JSON.stringify(s)),a};var hooks_useTransactions=()=>{let[e,t]=(0,Y.useReducer)(localStorageReducer,[]);(0,Y.useEffect)(()=>{let e=window.localStorage.getItem("arbTransactions");t({type:"SET_INITIAL_TRANSACTIONS",transactions:e?JSON.parse(e):[]})},[]);let updateTxnL1ToL2MsgData=async(e,a)=>{t({type:"UPDATE_L1TOL2MSG_DATA",txID:e,l1ToL2MsgData:a})},fetchAndUpdateEthDepositMessageStatus=async(e,t)=>{updateTxnL1ToL2MsgData(e,{fetchingUpdate:!0,status:ev.L1ToL2MessageStatus.NOT_YET_CREATED,retryableCreationTxID:t.l2DepositTxHash});let a=await t.status(),s=a===eL.EthDepositStatus.DEPOSITED;updateTxnL1ToL2MsgData(e,{fetchingUpdate:!1,status:s?ev.L1ToL2MessageStatus.FUNDS_DEPOSITED_ON_L2:ev.L1ToL2MessageStatus.NOT_YET_CREATED,retryableCreationTxID:t.l2DepositTxHash,l2TxID:s?t.l2DepositTxHash:void 0})},fetchAndUpdateL1ToL2MsgStatus=async(e,t,a,s)=>{updateTxnL1ToL2MsgData(e,{fetchingUpdate:!0,status:s,retryableCreationTxID:t.retryableCreationId});let r=await t.getSuccessfulRedeem(),n=r.status===ev.L1ToL2MessageStatus.REDEEMED?r.l2TxReceipt.transactionHash:r.status===ev.L1ToL2MessageStatus.FUNDS_DEPOSITED_ON_L2&&a?t.retryableCreationId:void 0;updateTxnL1ToL2MsgData(e,{status:r.status,l2TxID:n,fetchingUpdate:!1,retryableCreationTxID:t.retryableCreationId})},fetchAndUpdateL1ToL2MsgClassicStatus=async(e,t,a,s)=>{let r=a&&s>=ev.L1ToL2MessageStatus.FUNDS_DEPOSITED_ON_L2,n=r?t.retryableCreationId:s===ev.L1ToL2MessageStatus.REDEEMED?t.l2TxHash:void 0;updateTxnL1ToL2MsgData(e,{status:r?ev.L1ToL2MessageStatus.FUNDS_DEPOSITED_ON_L2:s,l2TxID:n,fetchingUpdate:!1,retryableCreationTxID:t.retryableCreationId})},setTransactionSuccess=e=>t({type:"SET_SUCCESS",txID:e}),setTransactionBlock=(e,a)=>t({type:"SET_BLOCK_NUMBER",txID:e,blockNumber:a}),setResolvedTimestamp=(e,a)=>t({type:"SET_RESOLVED_TIMESTAMP",txID:e,timestamp:a}),setTransactionFailure=e=>{if(!e){console.warn(" Cannot set transaction failure: TxID not included (???)");return}return t({type:"SET_FAILURE",txID:e})},a=(0,Y.useMemo)(()=>e.filter(e=>!eI.has(e.type)),[e]);return[a,{addTransaction:e=>{if(!e.txID){console.warn(" Cannot add transaction: TxID not included (???)");return}let a={...e,timestampCreated:new Date().toISOString()};return t({type:"ADD_TRANSACTION",transaction:a})},addTransactions:e=>{let a=e.map(e=>({...e,timestampCreated:new Date().toISOString()}));return t({type:"ADD_TRANSACTIONS",transactions:a})},setDepositsInStore:e=>{let s={};return[...a,...e].forEach(e=>{s[e.txID]=e}),t({type:"SET_TRANSACTIONS",transactions:Object.values(s)})},setTransactionSuccess,setTransactionFailure,clearPendingTransactions:()=>t({type:"CLEAR_PENDING"}),setTransactionConfirmed:e=>t({type:"CONFIRM_TRANSACTION",txID:e}),updateTransaction:(e,t,a)=>{if(!e.transactionHash)return console.warn("*** TransactionHash not included in transaction receipt (???) *** ");switch(e.status){case 0:setTransactionFailure(e.transactionHash);break;case 1:setTransactionSuccess(e.transactionHash);break;default:console.warn("*** Status not included in transaction receipt *** ")}console.log("TX for update",t),(null==t?void 0:t.blockNumber)&&setTransactionBlock(e.transactionHash,t.blockNumber),t&&setResolvedTimestamp(e.transactionHash,new Date().toISOString()),a&&updateTxnL1ToL2MsgData(e.transactionHash,a)},removeTransaction:e=>t({type:"REMOVE_TRANSACTION",txID:e}),addFailedTransaction:e=>{if(!e.txID){console.warn(" Cannot add transaction: TxID not included (???)");return}return t({type:"ADD_TRANSACTION",transaction:e})},fetchAndUpdateL1ToL2MsgStatus,fetchAndUpdateL1ToL2MsgClassicStatus,fetchAndUpdateEthDepositMessageStatus}]},eR=a(3255);function useChainId(e){let{provider:t}=e,[a,s]=(0,Y.useState)(void 0);return(0,Y.useEffect)(()=>{let e=!1;return async function(){let a=await t.getNetwork();e||s(a.chainId)}(),()=>{e=!0}},[t]),a}let useBalance_merge=e=>(t,a,s)=>{let{cache:r}=(0,eR.kY)(),extendedFetcher=async()=>{var e;if(!a)return;let s=await a(t),n=null===(e=r.get((0,eR.wE)(t)))||void 0===e?void 0:e.data;return{...n||{},...s}};return e(t,extendedFetcher,s)},useBalance=e=>{let{provider:t,walletAddress:a}=e,s=useChainId({provider:t}),r=(0,Y.useMemo)(()=>null==a?void 0:a.toLowerCase(),[a]),n=(0,Y.useCallback)(e=>void 0===s||void 0===r?null:[r,s,"balance",e],[s,r]),i=(0,Y.useCallback)(async e=>{if(void 0===r||!(null==e?void 0:e.length))return{};try{let a=await ev.MultiCaller.fromProvider(t),s=await a.getTokenData(e,{balanceOf:{account:r}});return e.reduce((e,t,a)=>{let r=s[a];return r&&(e[t.toLowerCase()]=r.balance),e},{})}catch(t){return ei.e(function(a){a.setExtra("token_addresses",e),ei.Tb(t)}),{}}},[t,r]),{data:o=null,mutate:l}=(0,eR.ZP)(n("eth"),e=>{let[a]=e;return t.getBalance(a)},{refreshInterval:15e3,shouldRetryOnError:!0,errorRetryCount:2,errorRetryInterval:3e3}),{data:d=null,mutate:c}=(0,eR.ZP)(n("erc20"),()=>i([]),{shouldRetryOnError:!0,errorRetryCount:2,errorRetryInterval:3e3,use:[useBalance_merge]}),u=(0,Y.useCallback)(async e=>{let t=await i(e);return c(t,{populateCache:(e,t)=>({...t,...e}),revalidate:!1})},[i,c]);return{eth:[o,l],erc20:[d,u]}},eM={Ethereum:{USDC:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",tokenMessengerContractAddress:"0xbd3fa81b58ba92a82136038b25adec7066af3155"},ArbitrumOne:{USDC:"0xaf88d065e77c8cc2239327c5edb3a432268e5831","USDC.e":"0xff970a61a04b1ca14834a43f5de4533ebddb5cc8",tokenMessengerContractAddress:"0x19330d10d9cc8751218eaf51e8885d058642e08a"},Goerli:{USDC:"0x07865c6e87b9f70255377e024ace6630c1eaa37f",tokenMessengerContractAddress:"0xd0c3da58f55358142b8d3e06c1c30c5c6114efe8"},ArbitrumGoerli:{USDC:"0xfd064a18f3bf249cf1f87fc203e90d8f650f2d63","USDC.e":"0x8fb1e3fc51f3b789ded7557e680551d93ea9d892",tokenMessengerContractAddress:"0x12dcfd3fe2e9eac2859fd1ed86d2ab8c5a2f9352"}};var eU=a(33135);let eO="arbitrum:bridge:erc20-cache";function getErc20DataCacheKey(e){let{chainId:t,address:a}=e;return"".concat(t,":").concat(a)}function getErc20DataCache(e){let t=JSON.parse(localStorage.getItem(eO)||"{}");if(void 0!==e){var a;return null!==(a=t[getErc20DataCacheKey(e)])&&void 0!==a?a:null}return t}async function fetchErc20Data(e){let{address:t,provider:a}=e,s=(await a.getNetwork()).chainId,r=getErc20DataCache({chainId:s,address:t});if(r)return r;try{var n,i,o;let e=await ev.MultiCaller.fromProvider(a),[r]=await e.getTokenData([t],{name:!0,symbol:!0,decimals:!0}),l={name:null!==(n=null==r?void 0:r.name)&&void 0!==n?n:function(e){let t=e.toLowerCase();return t.substring(0,5)+"..."+t.substring(t.length-3)}(t),symbol:null!==(i=null==r?void 0:r.symbol)&&void 0!==i?i:function(e){let t=e.toLowerCase();return t.substring(0,5)+"..."+t.substring(t.length-3)}(t),decimals:null!==(o=null==r?void 0:r.decimals)&&void 0!==o?o:0,address:t};try{!function(e){let{erc20Data:t,...a}=e,s=getErc20DataCache();s[getErc20DataCacheKey(a)]=t,localStorage.setItem(eO,JSON.stringify(s))}({chainId:s,address:t,erc20Data:l})}catch(e){console.warn("Failed to store ERC-20 data to cache."),console.warn(e)}return l}catch(e){throw ei.e(function(a){a.setExtra("token_address",t),ei.Tb(e)}),e}}async function isValidErc20(e){let{address:t,provider:a}=e,s=eE.ERC20__factory.connect(t,a);try{return await Promise.all([s.balanceOf("0xd8dA6BF26964aF9D7eEd9e03E53415D37aA96045"),s.totalSupply()]),!0}catch(e){return!1}}async function fetchErc20Allowance(e){let{address:t,provider:a,owner:s,spender:r}=e;try{var n;let e=await ev.MultiCaller.fromProvider(a),[i]=await e.getTokenData([t],{allowance:{owner:s,spender:r}});return null!==(n=null==i?void 0:i.allowance)&&void 0!==n?n:eD._Y}catch(e){throw ei.e(function(a){a.setExtra("token_address",t),ei.Tb(e)}),e}}async function getL1ERC20Address(e){let{erc20L2Address:t,l2Provider:a}=e;try{let e=await ev.Erc20Bridger.fromProvider(a);return await e.getL1ERC20Address(t,a)}catch(e){return null}}async function fetchErc20L1GatewayAddress(e){let{erc20L1Address:t,l1Provider:a,l2Provider:s}=e,r=await ev.Erc20Bridger.fromProvider(s);return r.getL1GatewayAddress(t,a)}async function fetchErc20L2GatewayAddress(e){let{erc20L1Address:t,l2Provider:a}=e,s=await ev.Erc20Bridger.fromProvider(a);return s.getL2GatewayAddress(t,a)}async function getL2ERC20Address(e){let{erc20L1Address:t,l1Provider:a,l2Provider:s}=e,r=await ev.Erc20Bridger.fromProvider(s);return await r.getL2ERC20Address(t,a)}async function l1TokenIsDisabled(e){let{erc20L1Address:t,l1Provider:a,l2Provider:s}=e,r=await ev.Erc20Bridger.fromProvider(s);return r.l1TokenIsDisabled(t,a)}let isTokenMainnetUSDC=e=>(null==e?void 0:e.toLowerCase())===eM.Ethereum.USDC.toLowerCase(),isTokenGoerliUSDC=e=>(null==e?void 0:e.toLowerCase())===eM.Goerli.USDC.toLowerCase(),isTokenArbitrumOneNativeUSDC=e=>(null==e?void 0:e.toLowerCase())===eM.ArbitrumOne.USDC.toLowerCase(),isTokenArbitrumGoerliNativeUSDC=e=>(null==e?void 0:e.toLowerCase())===eM.ArbitrumGoerli.USDC.toLowerCase(),isTokenUSDC=e=>isTokenMainnetUSDC(e)||isTokenGoerliUSDC(e)||isTokenArbitrumOneNativeUSDC(e)||isTokenArbitrumGoerliNativeUSDC(e);function sanitizeTokenSymbol(e,t){if(!t.erc20L1Address)return e;let{isArbitrumOne:a,isArbitrumGoerli:s}=(0,eU.CR)(t.chain.id);return isTokenMainnetUSDC(t.erc20L1Address)||isTokenGoerliUSDC(t.erc20L1Address)?a||s?"USDC.e":"USDC":e}function erc20DataToErc20BridgeToken(e){return{name:e.name,type:C.ERC20,symbol:e.symbol,address:e.address,decimals:e.decimals,listIds:new Set}}let e_={name:"USD Coin",symbol:"USDC",address:eM.ArbitrumOne.USDC,decimals:6,logoURI:"https://s2.coinmarketcap.com/static/img/coins/64x64/3408.png"},eB={[eU.a_.ArbitrumOne]:[{name:"GMX",symbol:"GMX",address:"0xfc5a1a6eb076a2c7ad06ed22c90d7e710e35ad0a",decimals:18,logoURI:"https://s2.coinmarketcap.com/static/img/coins/64x64/11857.png"},{name:"STASIS EURO",symbol:"EURS",address:"0xD22a58f79e9481D1a88e00c343885A588b34b68B",decimals:2,logoURI:"https://s2.coinmarketcap.com/static/img/coins/64x64/2989.png"}],[eU.a_.ArbitrumNova]:[],[eU.a_.ArbitrumGoerli]:[]};var eP=a(68930);function useIsConnectedToOrbitChain(){let{chain:e}=(0,X.LN)();if(void 0!==e)return(0,eU.CR)(e.id).isOrbitChain}function useIsConnectedToArbitrum(){let{chain:e}=(0,X.LN)();if(void 0!==e)return(0,eU.CR)(e.id).isArbitrum}var eF=a(75388);function chainToWagmiChain(e){var t;return{id:e.chainID,name:e.name,network:e.name.toLowerCase().split(" ").join("-"),nativeCurrency:null!==(t=e.nativeTokenData)&&void 0!==t?t:ex.Xx,rpcUrls:{default:{http:[e.rpcUrl]},public:{http:[e.rpcUrl]}}}}let eG={...eF.Fo,rpcUrls:{...eF.Fo.rpcUrls,default:{http:[eU.Cl[eU.a_.Sepolia]]}}},eW={id:eU.a_.ArbitrumSepolia,name:"Arbitrum Sepolia",network:"arbitrum-sepolia",nativeCurrency:ex.Xx,rpcUrls:{default:{http:[eU.Cl[eU.a_.ArbitrumSepolia]]},public:{http:[eU.Cl[eU.a_.ArbitrumSepolia]]}},blockExplorers:{etherscan:{name:"Arbiscan",url:eU.gb[eU.a_.ArbitrumSepolia]},default:{name:"Arbiscan",url:eU.gb[eU.a_.ArbitrumSepolia]}}},eH={id:eU.a_.ArbitrumNova,name:"Arbitrum Nova",network:"arbitrum-nova",nativeCurrency:ex.Xx,rpcUrls:{default:{http:[eU.Cl[eU.a_.ArbitrumNova]]},public:{http:[eU.Cl[eU.a_.ArbitrumNova]]}},blockExplorers:{etherscan:{name:"Arbiscan",url:"https://nova.arbiscan.io"},default:{name:"Arbiscan",url:"https://nova.arbiscan.io"}}},eZ={id:eU.a_.XaiTestnet,name:"Xai Orbit Testnet",network:"xai-testnet",nativeCurrency:ex.Xx,rpcUrls:{default:{http:[eU.Cl[eU.a_.XaiTestnet]]},public:{http:[eU.Cl[eU.a_.XaiTestnet]]}},blockExplorers:{default:{name:"Blockscout",url:"https://testnet-explorer.xai-chain.net"}}},ez={id:eU.a_.Inspace,name:"Inspace Network",network:"inspace-network",nativeCurrency:ex.Xx,rpcUrls:{default:{http:[eU.Cl[eU.a_.Inspace]]},public:{http:[eU.Cl[eU.a_.Inspace]]}},blockExplorers:{default:{name:"Inspace scan",url:"https://scan.inspace.network"}}},eY={id:eU.a_.StylusTestnet,name:"Stylus Testnet",network:"stylus-testnet",nativeCurrency:ex.Xx,rpcUrls:{default:{http:[eU.Cl[eU.a_.StylusTestnet]]},public:{http:[eU.Cl[eU.a_.StylusTestnet]]}},blockExplorers:{default:{name:"Blockscout",url:"https://stylus-testnet-explorer.arbitrum.io"}}},eX={id:eU.a_.Local,name:"EthLocal",network:"local",nativeCurrency:ex.Xx,rpcUrls:{default:{http:[eU.Cl[eU.a_.Local]]},public:{http:[eU.Cl[eU.a_.Local]]}},blockExplorers:{default:{name:"Blockscout",url:""}}},eV={id:eU.a_.ArbitrumLocal,name:"ArbLocal",network:"arbitrum-local",nativeCurrency:ex.Xx,rpcUrls:{default:{http:[eU.Cl[eU.a_.ArbitrumLocal]]},public:{http:[eU.Cl[eU.a_.ArbitrumLocal]]}},blockExplorers:{default:{name:"Blockscout",url:""}}};function getWagmiChain(e){let t=(0,eU.LD)(e);if(t)return chainToWagmiChain(t);switch(e){case eU.a_.Ethereum:return eF.RJ;case eU.a_.ArbitrumOne:return eF.yX;case eU.a_.ArbitrumNova:return eH;case eU.a_.Goerli:return eF.ws;case eU.a_.ArbitrumGoerli:return eF.Jn;case eU.a_.Sepolia:return eG;case eU.a_.ArbitrumSepolia:return eW;case eU.a_.XaiTestnet:return eZ;case eU.a_.Inspace:return ez;case eU.a_.StylusTestnet:return eY;case eU.a_.Local:return eX;case eU.a_.ArbitrumLocal:return eV;default:throw Error("[getWagmiChain] Unexpected chain id: ".concat(e))}}var eK=a(81966),eq=a(54887),eJ=a(73273);let eQ=["ethereum","goerli","sepolia","arbitrum-one","arbitrum-nova","arbitrum-goerli","arbitrum-sepolia","stylus-testnet","xai-testnet","inspace-network","local","arbitrum-local"];function isValidChainQueryParam(e){if("string"==typeof e)return eQ.includes(e);let t=(0,eU.JB)(e,!0);return t.includes(e)}(T||(T={})).MAX="max";let useArbQueryParams=()=>(0,eJ.useQueryParams)({sourceChain:e0,destinationChain:e0,amount:(0,eJ.withDefault)(e$,""),l2ChainId:eJ.NumberParam,token:eJ.StringParam,settingsOpen:(0,eJ.withDefault)(eJ.BooleanParam,!1)}),isMax=e=>(null==e?void 0:e.toLowerCase())==="max",sanitizeAmountQueryParam=e=>{if(0===e.length)return e;let t=e.replace(/[,]/g,".").toLowerCase();return t.startsWith(".")?"0".concat(t):isNaN(Number(t))?isMax(t)?t:"":t.startsWith("-")?String(Math.abs(Number(t))):t.replace(/^0+(?=\d)/,"")},e$={encode:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return sanitizeAmountQueryParam(e)},decode:e=>{var t;let a=null!==(t=null==e?void 0:e.toString())&&void 0!==t?t:"";return sanitizeAmountQueryParam(a)}},e0={encode:function(e){if(e)try{let t=function(e){switch(e){case eU.a_.Ethereum:return"ethereum";case eU.a_.Goerli:return"goerli";case eU.a_.ArbitrumOne:return"arbitrum-one";case eU.a_.ArbitrumNova:return"arbitrum-nova";case eU.a_.ArbitrumGoerli:return"arbitrum-goerli";case eU.a_.StylusTestnet:return"stylus-testnet";case eU.a_.XaiTestnet:return"xai-testnet";case eU.a_.Sepolia:return"sepolia";case eU.a_.ArbitrumSepolia:return"arbitrum-sepolia";case eU.a_.Local:return"local";case eU.a_.ArbitrumLocal:return"arbitrum-local";case eU.a_.Inspace:return"inspace-network";default:let t=(0,eU.ud)(),a=t.find(t=>t.chainID===e);if(a)return a.chainID;throw Error("[getChainQueryParamForChain] Unexpected chain id: ".concat(e))}}(e);return t.toString()}catch(e){return}},decode:function(e){let t=(0,eJ.decodeString)(e);if(!t)return;let a=(0,eJ.decodeNumber)(e);return null!=a&&!Number.isNaN(a)&&isValidChainQueryParam(a)?a:isValidChainQueryParam(t)?function(e){switch(e){case"ethereum":return eF.RJ;case"goerli":return eF.ws;case"sepolia":return eF.Fo;case"arbitrum-one":return eF.yX;case"arbitrum-nova":return eH;case"arbitrum-goerli":return eF.Jn;case"arbitrum-sepolia":return eW;case"stylus-testnet":return eY;case"xai-testnet":return eZ;case"inspace-network":return ez;case"local":return eX;case"arbitrum-local":return eV;default:throw Error("[getChainForChainKeyQueryParam] Unexpected chainKeyQueryParam: ".concat(e))}}(t).id:void 0}};function ArbQueryParamProvider(e){let{children:t}=e;return(0,z.jsx)(eJ.QueryParamProvider,{adapter:eK.Mm,options:{searchStringToObject:eq.Z.parse,objectToSearchString:eq.Z.stringify,updateType:"replaceIn",removeDefaultsFromUrl:!0},children:t})}var e2=a(96615);let e1=["Arbitrum One","Arbitrum Nova"],shouldTrackAnalytics=e=>e1.includes(e);function trackEvent(e,t){e2.ZP.capture(e,t)}(i=N||(N={})).LOADING="loading",i.NOT_CONNECTED="not_connected",i.NOT_SUPPORTED="not_supported",i.CONNECTED="connected";let e3=void 0===(null===(k=a.g.window)||void 0===k?void 0:k.ethereum)?"not_connected":"loading",e4=(0,Y.createContext)(void 0);function useNetworksAndSigners(){let e=(0,Y.useContext)(e4);if(void 0===e)throw Error("The useNetworksAndSigners Hook must only be used inside NetworksAndSignersContext.Provider.");return e}function getBaseUrl(e){try{let t=new URL(e);return"".concat(t.protocol,"//").concat(t.hostname)}catch{return""}}function NetworksAndSignersProvider(e){let{selectedL2ChainId:t}=e,{address:a,connector:s,isDisconnected:r,isConnected:n}=(0,X.mA)(),{chain:i}=(0,X.LN)(),o=(0,X.yL)(),{openConnectModal:l}=(0,K.We)(),[d,c]=(0,Y.useState)({status:e3}),[u]=(0,ee.Z)(ex.Yc),m=useIsConnectedToArbitrum(),p=useIsConnectedToOrbitChain(),h=void 0!==u,[,x]=useArbQueryParams();(0,Y.useEffect)(()=>{var e;if((r||!n)&&c({status:"not_connected"}),n&&s){let e=function(e){switch(e){case"MetaMask":case"Coinbase Wallet":case"Trust Wallet":case"Safe":case"Injected":case"WalletConnectLegacy":case"WalletConnect":return"WalletConnect";default:return"Other"}}(s.name);trackEvent("Connect Wallet Click",{walletName:e})}ei.YA("wallet.name",null!==(e=null==s?void 0:s.name)&&void 0!==e?e:"")},[r,n,s]),(0,Y.useEffect)(()=>{var e,t;"connected"===d.status&&(ei.YA("network.parent_chain_id",d.l1.network.id),ei.YA("network.parent_chain_rpc_url",getBaseUrl(null!==(e=eU.Cl[d.l1.network.id])&&void 0!==e?e:"")),ei.YA("network.child_chain_id",d.l2.network.id),ei.YA("network.child_chain_rpc_url",getBaseUrl(null!==(t=eU.Cl[d.l2.network.id])&&void 0!==t?t:"")))},[d]),(0,Y.useEffect)(()=>{h&&(null==l||l())},[h,l]);let f=(0,Y.useRef)(0),g=(0,Y.useCallback)(async()=>{if(!a||!i)return;f.current+=1;let e=f.current,s=i.id,r=!(s in eU.fH);if(r){if(console.error("Chain ".concat(s," not supported")),e!==f.current)return;c({status:"not_supported",chainId:s});return}let n=(0,eU.CR)(t).isArbitrum,l=t,d=eU.fH[s];if(console.debug("fk, selected chain",t),console.debug("fk, selected is arbitrum",n),console.debug("fk, providerSupportedl id",d),console.debug("is connected to orbit chain?",p),console.debug("provider supported l2",d),p&&n){if(console.debug("case 1!!!!!!!!!"),e!==f.current)return;x({l2ChainId:s});return}if(void 0===(l=l||d[0])){console.debug("case 2!!!!!!!!!!"),console.error("Unknown provider chainId: ".concat(s)),c({status:"not_supported",chainId:s});return}if(!d.includes(l)){console.debug("case 3!!!!!!!!!!!"),x({l2ChainId:void 0});return}console.log("before case 4, provider",o),(0,ev.getParentChain)(o).then(async a=>{console.log("case 4!!!!!!!!!!!!!!");let s=(0,eU.CR)(a.chainID).isArbitrum;if(console.log("case 4 is parnt chain arbitrum?",s),console.log("case 4 parent chain",a.chainID),console.log("case 4 provider",o),s&&!t)throw Error();let r=new eP.c(eU.Cl[l]),i=await (0,ev.getChain)(r);s&&n&&(a=await (0,ev.getParentChain)(i.partnerChainID));let d=new eP.c(eU.Cl[a.chainID]);e===f.current&&(c({status:"connected",l1:{network:getWagmiChain(a.chainID),provider:d},l2:{network:getWagmiChain(i.chainID),provider:r}}),x({l2ChainId:i.chainID}))}).catch(t=>{if(s!==l&&!m){c({status:"not_supported",chainId:s});return}l&&t&&"noNetwork"===t.event&&(console.error("fuck here"),(0,ep.Jc)("Failed to connect to ".concat((0,eU.pp)(l),"."))),(0,ev.getChain)(o).then(async t=>{let a=t.partnerChainID;console.debug("parent!",a);let s=new eP.c(eU.Cl[a]),r=await (0,ev.getParentChain)(s);console.debug("parent chain!",r,s);let n=new eP.c(eU.Cl[t.chainID]);e===f.current&&(c({status:"connected",l1:{network:getWagmiChain(r.chainID),provider:s},l2:{network:getWagmiChain(t.chainID),provider:n}}),x({l2ChainId:t.chainID}))}).catch(()=>{e===f.current&&c({status:"not_supported",chainId:s})})})},[a,i,o,t,x,m,p]);if((0,Y.useEffect)(()=>{g()},[i,g]),"connected"!==d.status){let t=(d.status,{status:d.status});return e.fallback(t)}return(0,z.jsx)(e4.Provider,{value:d,children:e.children})}function useUpdateUSDCBalances(e){let{walletAddress:t}=e,{l1:a,l2:s}=useNetworksAndSigners(),{erc20:[,r]}=useBalance({provider:a.provider,walletAddress:t}),{erc20:[,n]}=useBalance({provider:s.provider,walletAddress:t}),i=(0,Y.useCallback)(e=>{let t=function(e){switch(e){case eM.Goerli.USDC:case eM.ArbitrumGoerli.USDC:case eM.ArbitrumGoerli["USDC.e"]:return eM.Goerli.USDC;case eM.Ethereum.USDC:case eM.ArbitrumOne.USDC:case eM.ArbitrumOne["USDC.e"]:default:return eM.Ethereum.USDC}}(e);r([t.toLowerCase()]),isTokenMainnetUSDC(t)?n([eM.ArbitrumOne.USDC,eM.ArbitrumOne["USDC.e"]]):isTokenGoerliUSDC(t)&&n([eM.ArbitrumGoerli.USDC,eM.ArbitrumGoerli["USDC.e"]])},[r,n]);return{updateUSDCBalances:i}}var e6=a(2303);let e5={...ex.Xx,logoUrl:"https://raw.githubusercontent.com/ethereum/ethereum-org-website/957567c341f3ad91305c60f7d0b71dcaebfff839/src/assets/assets/eth-diamond-black-gray.png",isCustom:!1};function useNativeCurrency(e){let{provider:t}=e,{data:a=e5}=(0,e6.Z)(["nativeCurrency",t],e=>{let[,t]=e;return fetchNativeCurrency({provider:t})},{shouldRetryOnError:!0,errorRetryCount:2,errorRetryInterval:1e3});return a}async function fetchNativeCurrency(e){let t,{provider:a}=e;try{t=await (0,ev.getChain)(a)}catch(e){return e5}let s=await ev.EthBridger.fromProvider(a);if(void 0===s.nativeToken)return e5;let r=s.nativeToken.toLowerCase(),n=t.partnerChainID,i=new eP.c(eU.Cl[n]),{name:o,symbol:l,decimals:d}=await fetchErc20Data({address:r,provider:i});return{name:o,symbol:l,decimals:d,address:r,isCustom:!0}}function getExecutedMessagesCacheKey(e){let{event:t,l2ChainId:a}=e;return void 0!==t.batchNumber?"l2ChainId: ".concat(a,", batchNumber: ").concat(t.batchNumber.toString(),", indexInBatch: ").concat(t.indexInBatch.toString()):"l2ChainId: ".concat(a,", position: ").concat(t.position.toString())}function getUniqueIdOrHashFromEvent(e){return e.hash?e.hash:e.uniqueId}let TokenDisabledError=class TokenDisabledError extends Error{constructor(e){super(e),this.name="TokenDisabledError"}};function percentIncrease(e,t){return e.add(e.mul(t).div(100))}let useArbTokenBridge=e=>{let{l1:t,l2:a}=e,{address:s}=(0,X.mA)(),[r,n]=(0,Y.useState)(void 0),{eth:[,i],erc20:[,o]}=useBalance({provider:t.provider,walletAddress:s}),{eth:[,l],erc20:[,d]}=useBalance({provider:a.provider,walletAddress:s}),c=useNativeCurrency({provider:a.provider}),{updateUSDCBalances:u}=useUpdateUSDCBalances({walletAddress:s}),[m,p]=(0,eS._)("arbitrum:bridge:executed-messages",{}),[h,x]=(0,Y.useState)({}),f=(0,Y.useMemo)(()=>String(t.network.id),[t.network.id]),g=(0,Y.useMemo)(()=>String(a.network.id),[a.network.id]);(0,Y.useEffect)(()=>{s&&x({})},[f,g,s]);let[b,{addTransaction:w,addTransactions:y,setDepositsInStore:T,setTransactionFailure:k,clearPendingTransactions:N,setTransactionConfirmed:j,setTransactionSuccess:S,updateTransaction:D,fetchAndUpdateL1ToL2MsgStatus:E,fetchAndUpdateL1ToL2MsgClassicStatus:L,fetchAndUpdateEthDepositMessageStatus:I}]=hooks_useTransactions(),depositEth=async e=>{let r,{amount:n,l1Signer:i,txLifecycle:l}=e;if(!s)return;let d=await ev.EthBridger.fromProvider(a.provider),u=await d.getDepositRequest({amount:n,from:s});try{let e=await t.provider.estimateGas(u.txRequest);r=await d.deposit({amount:n,l1Signer:i,overrides:{gasLimit:percentIncrease(e,eN.O$.from(5))}}),(null==l?void 0:l.onTxSubmit)&&l.onTxSubmit(r)}catch(e){return(null==l?void 0:l.onTxError)&&l.onTxError(e),e.message}w({type:"deposit-l1",status:"pending",value:ej.formatUnits(n,c.decimals),txID:r.hash,assetName:c.symbol,assetType:v.ETH,sender:s,destination:s,l1NetworkID:f,l2NetworkID:g});let m=await r.wait();(null==l?void 0:l.onTxConfirm)&&l.onTxConfirm(m);let[p]=await m.getEthDeposits(a.provider);if(!p)return;let h={fetchingUpdate:!1,status:ev.L1ToL2MessageStatus.NOT_YET_CREATED,retryableCreationTxID:p.l2DepositTxHash,l2TxID:void 0};D(m,r,h),updateEthBalances(),c.isCustom&&o([c.address])},withdrawEth=async e=>{let{amount:t,l2Signer:r,txLifecycle:n}=e;if(s)try{let e=await ev.EthBridger.fromProvider(a.provider),i=await e.withdraw({amount:t,l2Signer:r,destinationAddress:s,from:s});(null==n?void 0:n.onTxSubmit)&&n.onTxSubmit(i),w({type:"withdraw",status:"pending",value:ej.formatUnits(t,c.decimals),txID:i.hash,assetName:c.symbol,assetType:v.ETH,sender:s,destination:s,blockNumber:i.blockNumber,l1NetworkID:f,l2NetworkID:g});let o=await i.wait();(null==n?void 0:n.onTxConfirm)&&n.onTxConfirm(o),D(o,i),updateEthBalances();let l=o.getL2ToL1Events();if(1===l.length){let e=l[0];if(!e)return;let a=getUniqueIdOrHashFromEvent(e).toString(),s=ev.L2ToL1MessageStatus.UNCONFIRMED,r={...e,sender:i.from,type:v.ETH,value:t,outgoingMessageState:s,symbol:c.symbol,decimals:c.decimals,nodeBlockDeadline:A.NODE_NOT_CREATED,l2TxHash:i.hash};x(e=>({...e,[a]:r}))}return o}catch(e){(null==n?void 0:n.onTxError)&&n.onTxError(e),console.error("withdrawEth err",e)}},approveToken=async e=>{let{erc20L1Address:r,l1Signer:n}=e;if(!s)return;let i=await ev.Erc20Bridger.fromProvider(a.provider),o=await i.approveToken({erc20L1Address:r,l1Signer:n}),{symbol:l}=await fetchErc20Data({address:r,provider:t.provider});w({type:"approve",status:"pending",value:null,txID:o.hash,assetName:l,assetType:v.ERC20,sender:s,l1NetworkID:f});let d=await o.wait();D(d,o),R(r)},approveTokenL2=async e=>{let{erc20L1Address:n,l2Signer:i}=e;if(void 0===r||!s)return;let o=r[n];if(!o)throw Error("Bridge token not found");let{l2Address:l}=o;if(!l)throw Error("L2 address not found");let d=await fetchErc20L2GatewayAddress({erc20L1Address:n,l2Provider:a.provider}),c=await eE.ERC20__factory.connect(l,i),u=await c.functions.approve(d,eD.Bz),{symbol:m}=await fetchErc20Data({address:n,provider:t.provider});w({type:"approve-l2",status:"pending",value:null,txID:u.hash,assetName:m,assetType:v.ERC20,sender:s,blockNumber:u.blockNumber,l1NetworkID:f,l2NetworkID:g});let p=await u.wait();D(p,u),R(n)};async function depositToken(e){let{erc20L1Address:r,amount:n,l1Signer:i,txLifecycle:l,destinationAddress:d}=e;if(!s)return;let u=await ev.Erc20Bridger.fromProvider(a.provider);try{let{symbol:e,decimals:m}=await fetchErc20Data({address:r,provider:t.provider}),p=await u.getDepositRequest({l1Provider:t.provider,l2Provider:a.provider,from:s,erc20L1Address:r,destinationAddress:d,amount:n}),h=await t.provider.estimateGas(p.txRequest),x=await u.deposit({...p,l1Signer:i,overrides:{gasLimit:percentIncrease(h,eN.O$.from(5))}});(null==l?void 0:l.onTxSubmit)&&l.onTxSubmit(x),w({type:"deposit-l1",status:"pending",value:ej.formatUnits(n,m),txID:x.hash,assetName:e,assetType:v.ERC20,tokenAddress:r,sender:s,destination:null!=d?d:s,l1NetworkID:f,l2NetworkID:g});let b=await x.wait();(null==l?void 0:l.onTxConfirm)&&l.onTxConfirm(b);let[y]=await b.getL1ToL2Messages(a.provider);if(!y)return;let C={fetchingUpdate:!1,status:ev.L1ToL2MessageStatus.NOT_YET_CREATED,retryableCreationTxID:y.retryableCreationId,l2TxID:void 0};return D(b,x,C),R(r),updateEthBalances(),c.isCustom&&o([c.address]),b}catch(e){(null==l?void 0:l.onTxError)&&l.onTxError(e)}}let withdrawToken=async e=>{let{erc20L1Address:n,amount:i,l2Signer:o,txLifecycle:l,destinationAddress:d}=e;if(s)try{let e=await ev.Erc20Bridger.fromProvider(a.provider),c=o.provider,u=c&&(await c.getCode(String(n))).length<2;if(u&&!d)throw Error("Missing destination address");if(void 0===r)return;let m=r[n],{symbol:p,decimals:h}=await (async()=>{if(m){let{symbol:e,decimals:t}=m;return{symbol:e,decimals:t}}let{symbol:e,decimals:a}=await fetchErc20Data({address:n,provider:t.provider});return addToken(n),{symbol:e,decimals:a}})(),b=await e.withdraw({l2Signer:o,erc20l1Address:n,destinationAddress:null!=d?d:s,amount:i});(null==l?void 0:l.onTxSubmit)&&l.onTxSubmit(b),w({type:"withdraw",status:"pending",value:ej.formatUnits(i,h),txID:b.hash,assetName:p,assetType:v.ERC20,sender:s,destination:null!=d?d:s,blockNumber:b.blockNumber,l1NetworkID:f,l2NetworkID:g});let y=await b.wait();(null==l?void 0:l.onTxConfirm)&&l.onTxConfirm(y),D(y,b);let C=y.getL2ToL1Events();if(1===C.length){let e=C[0];if(!e)return;let t=getUniqueIdOrHashFromEvent(e).toString(),a=ev.L2ToL1MessageStatus.UNCONFIRMED,r={...e,sender:s,destinationAddress:null!=d?d:s,type:v.ERC20,tokenAddress:n,value:i,outgoingMessageState:a,symbol:p,decimals:h,nodeBlockDeadline:A.NODE_NOT_CREATED,l2TxHash:b.hash};x(e=>({...e,[t]:r}))}return R(n),y}catch(e){(null==l?void 0:l.onTxError)&&l.onTxError(e),console.warn("withdraw token err",e)}},addTokensFromList=async(e,s)=>{let r=t.network.id,i=a.network.id,l={},c=[];for(let t of e.tokens){let{address:a,name:n,symbol:o,extensions:d,decimals:m,logoURI:p,chainId:h}=t;if(![r,i].includes(h))continue;let x=(()=>{let isExtensions=e=>!!e&&!!e.bridgeInfo&&Object.keys(e.bridgeInfo).map(t=>e.bridgeInfo[t]).every(e=>e&&"tokenAddress"in e&&"originBridgeAddress"in e&&"destBridgeAddress"in e);return isExtensions(d)?d.bridgeInfo:null})();if(x){var u;let e=null===(u=x[f])||void 0===u?void 0:u.tokenAddress.toLowerCase();if(!e)return;l[e]={name:n,type:C.ERC20,symbol:o,address:e,l2Address:a.toLowerCase(),decimals:m,logoURI:p,listIds:new Set([s])}}else e.tokens.length<1e3&&c.push({name:n,type:C.ERC20,symbol:o,address:a.toLowerCase(),decimals:m,logoURI:p,listIds:new Set([s])})}let m=new Set(Object.keys(l).map(e=>e.toLowerCase()));for(let e of c)m.has(e.address.toLowerCase())||(l[e.address]=e);n(e=>{let t=[],a=[];for(let n in(0,eU.CR)(i).isArbitrumOne&&a.push(eM.ArbitrumOne.USDC),(0,eU.CR)(i).isArbitrumGoerli&&a.push(eM.ArbitrumGoerli.USDC),l){var r;let i=l[n];if(!i)return;let{address:o,l2Address:d}=i;o&&t.push(o),d&&a.push(d);let c=(null==e?void 0:null===(r=e[i.address])||void 0===r?void 0:r.listIds)||new Set;i.listIds=new Set([...c,s])}return o(t),d(a),{...e,...l}})};async function addToken(e){let r,i;if(!s)return;let l=e.toLowerCase(),c=await getL1ERC20Address({erc20L2Address:l,l2Provider:a.provider});c?(r=c,i=l):(r=l,i=await getL2ERC20Address({erc20L1Address:r,l1Provider:t.provider,l2Provider:a.provider}));let u={},m={address:r,provider:t.provider};if(!await isValidErc20(m))throw Error("".concat(r," is not a valid ERC-20 token"));let{name:p,symbol:h,decimals:x}=await fetchErc20Data(m),f=await l1TokenIsDisabled({erc20L1Address:r,l1Provider:t.provider,l2Provider:a.provider});if(f)throw new TokenDisabledError("Token currently disabled");let g=r.toLowerCase();u[g]={name:p,type:C.ERC20,symbol:h,address:g,l2Address:null==i?void 0:i.toLowerCase(),decimals:x,listIds:new Set},n(e=>({...e,...u})),o([g]),i&&d([i])}let R=(0,Y.useCallback)(async e=>{if(u(e),void 0===r)return;let t=e.toLowerCase(),a=r[t];if(!a)return;let s={[t]:a};n(e=>({...e,...s}));let{l2Address:i}=a;o([t]),i&&d([i])},[r,n,o,d]),updateEthBalances=async()=>{Promise.all([i(),l()])};function addToExecutedMessagesCache(e){let t={};e.forEach(e=>{let s=getExecutedMessagesCacheKey({event:e,l2ChainId:a.network.id});t[s]=!0}),p({...m,...t})}return{bridgeTokens:r,eth:{deposit:depositEth,withdraw:withdrawEth,triggerOutbox:async function(e){let{id:r,l1Signer:n}=e,i=h[r];if(!i)throw Error("Outbox message not found");if(!s)return;let{value:o}=i,l=ev.L2ToL1Message.fromEvent(n,i,t.provider),d=await l.execute(a.provider);w({status:"pending",type:"outbox",value:ej.formatUnits(o,c.decimals),assetName:c.symbol,assetType:v.ETH,sender:s,txID:d.hash,l1NetworkID:f,l2ToL1MsgData:{uniqueId:getUniqueIdOrHashFromEvent(i)}});let u=await d.wait();return 1===u.status?(S(u.transactionHash),addToExecutedMessagesCache([i]),x(e=>{let t={...e},a=t[r];return a&&(a.outgoingMessageState=ev.L2ToL1MessageStatus.EXECUTED),t})):k(u.transactionHash),u}},token:{add:addToken,addL2NativeToken:function(e){let t=function(e,t){var a;let s=(null!==(a=eB[t])&&void 0!==a?a:[]).find(t=>t.address.toLowerCase()===e.toLowerCase());if(void 0===s)throw Error("Can't find L2-native token with address ".concat(e," on chain ").concat(t));return s}(e,a.network.id);n(e=>({...e,["L2-NATIVE:".concat(t.address)]:{name:t.name,type:C.ERC20,symbol:t.symbol,address:t.address,l2Address:t.address,decimals:t.decimals,logoURI:t.logoURI,listIds:new Set,isL2Native:!0}}))},addTokensFromList,removeTokensFromList:e=>{n(t=>{let a={...t};for(let t in r){let s=r[t];s&&(s.listIds.delete(e),0===s.listIds.size&&delete a[t])}return a})},updateTokenData:R,approve:approveToken,approveL2:approveTokenL2,deposit:depositToken,withdraw:withdrawToken,triggerOutbox:async function(e){let{id:r,l1Signer:n}=e,i=h[r];if(!i)throw Error("Outbox message not found");if(!s)return;let{tokenAddress:o,value:l}=i,d=ev.L2ToL1Message.fromEvent(n,i,t.provider),c=await d.execute(a.provider),{symbol:u,decimals:m}=await fetchErc20Data({address:o,provider:t.provider});w({status:"pending",type:"outbox",value:ej.formatUnits(l,m),assetName:u,assetType:v.ERC20,sender:s,txID:c.hash,l1NetworkID:f,l2ToL1MsgData:{uniqueId:getUniqueIdOrHashFromEvent(i)}});let p=await c.wait();return 1===p.status?(S(p.transactionHash),addToExecutedMessagesCache([i]),x(e=>{let t={...e},a=t[r];return a&&(a.outgoingMessageState=ev.L2ToL1MessageStatus.EXECUTED),t})):k(p.transactionHash),p}},transactions:{transactions:b,setDepositsInStore:T,clearPendingTransactions:N,setTransactionConfirmed:j,updateTransaction:D,addTransaction:w,addTransactions:y,fetchAndUpdateL1ToL2MsgStatus:E,fetchAndUpdateL1ToL2MsgClassicStatus:L,fetchAndUpdateEthDepositMessageStatus:I},pendingWithdrawalsMap:h,setWithdrawalsInStore:e=>{let t={};e.forEach(e=>{let a=getUniqueIdOrHashFromEvent(e).toString();t[a]=e}),x(e=>({...e,...t}))}}},e8={[ev.L2ToL1MessageStatus.UNCONFIRMED]:"Unconfirmed",[ev.L2ToL1MessageStatus.CONFIRMED]:"Confirmed",[ev.L2ToL1MessageStatus.EXECUTED]:"Executed"},getDepositStatus=e=>{if("deposit"!==e.type&&"deposit-l1"!==e.type)return;if("failure"===e.status)return S.L1_FAILURE;if("pending"===e.status)return S.L1_PENDING;let{l1ToL2MsgData:t}=e;if(!t)return S.L2_PENDING;switch(t.status){case ev.L1ToL2MessageStatus.NOT_YET_CREATED:return S.L2_PENDING;case ev.L1ToL2MessageStatus.CREATION_FAILED:return S.CREATION_FAILED;case ev.L1ToL2MessageStatus.EXPIRED:return e.assetType===v.ETH?S.L2_SUCCESS:S.EXPIRED;case ev.L1ToL2MessageStatus.FUNDS_DEPOSITED_ON_L2:return e.assetType===v.ETH?S.L2_SUCCESS:S.L2_FAILURE;case ev.L1ToL2MessageStatus.REDEEMED:return S.L2_SUCCESS}},transformDeposit=e=>({sender:e.sender,destination:e.destination,direction:e.type,status:e.status,createdAt:e.timestampCreated?getStandardizedTimestamp(e.timestampCreated):null,resolvedAt:e.timestampResolved?getStandardizedTimestamp(e.timestampResolved):null,txId:e.txID,asset:e.assetName||"",assetType:e.assetType,value:e.value,uniqueId:null,isWithdrawal:!1,blockNum:e.blockNumber||null,tokenAddress:e.tokenAddress||null,l1ToL2MsgData:e.l1ToL2MsgData,l2ToL1MsgData:e.l2ToL1MsgData,depositStatus:getDepositStatus(e),chainId:Number(e.l2NetworkID),parentChainId:Number(e.l1NetworkID)}),transformWithdrawal=e=>{var t;let a=getUniqueIdOrHashFromEvent(e);return{sender:e.sender,destination:e.destinationAddress,direction:"outbox",status:e.nodeBlockDeadline===A.EXECUTE_CALL_EXCEPTION?"Failure":e8[e.outgoingMessageState],createdAt:getStandardizedTimestamp(String(1e3*eN.O$.from(e.timestamp).toNumber())),resolvedAt:null,txId:e.l2TxHash||"l2-tx-hash-not-found",asset:e.symbol||"",assetType:e.type,value:ej.formatUnits(null===(t=e.value)||void 0===t?void 0:t.toString(),e.decimals),uniqueId:a,isWithdrawal:!0,blockNum:e.ethBlockNum.toNumber(),tokenAddress:e.tokenAddress||null,nodeBlockDeadline:e.nodeBlockDeadline,chainId:e.chainId,parentChainId:e.parentChainId}},filterTransactions=(e,t,a,s)=>{let r=[];for(let n of e){let e=n.sender,i=n.l1NetworkID,o=n.l2NetworkID,l=e.toLowerCase()===t.toLowerCase(),d=i===String(a),c=void 0===o?d:o===String(s);l&&d&&c&&r.push(n)}return r},isTokenDeposit=e=>isDeposit(e)&&e.tokenAddress,isDeposit=e=>"deposit"===e.direction||"deposit-l1"===e.direction,isWithdrawal=e=>"withdraw"===e.direction||"outbox"===e.direction,isPending=e=>!!e.isCctp&&!e.resolvedAt&&"Failure"!==e.status||isDeposit(e)&&("pending"===e.status||e.depositStatus===S.L1_PENDING||e.depositStatus===S.L2_PENDING)||isWithdrawal(e)&&(e.status===e8[ev.L2ToL1MessageStatus.UNCONFIRMED]||e.status===e8[ev.L2ToL1MessageStatus.CONFIRMED]),isFailed=e=>isDeposit(e)&&("failure"===e.status||e.depositStatus==S.L1_FAILURE||e.depositStatus===S.L2_FAILURE)||isWithdrawal(e)&&e.nodeBlockDeadline==A.EXECUTE_CALL_EXCEPTION;function isCustomDestinationAddressTx(e){return!!e.sender&&!!e.destination&&e.sender.toLowerCase()!==e.destination.toLowerCase()}let isWithdrawalReadyToClaim=e=>isWithdrawal(e)&&isPending(e)&&e.status===e8[ev.L2ToL1MessageStatus.CONFIRMED],isDepositReadyToRedeem=e=>isDeposit(e)&&e.depositStatus===S.L2_FAILURE,getStandardizedTimestamp=e=>isNaN(Number(e))?ek()(new Date(e)).format():ek()(Number(e)).format(),getStandardizedTime=e=>ek()(e).format("hh:mm A (z)"),getStandardizedDate=e=>ek()(e).format("MMM DD, YYYY"),findMatchingL1TxForWithdrawal=e=>{let t=JSON.parse(window.localStorage.getItem("arbTransactions")||"[]"),a=t.filter(e=>"outbox"===e.type).map(transformDeposit);return a.find(t=>{let a=t.l2ToL1MsgData;if(!((null==a?void 0:a.uniqueId)&&(null==e?void 0:e.uniqueId)))return!1;let s=eN.O$.from(e.uniqueId),r=eN.O$.from(a.uniqueId);return s.eq(r)})};(o=j||(j={}))[o.VERIFYING=0]="VERIFYING",o[o.ALLOWED=1]="ALLOWED",o[o.DISALLOWED=2]="DISALLOWED",(l=S||(S={}))[l.L1_PENDING=1]="L1_PENDING",l[l.L1_FAILURE=2]="L1_FAILURE",l[l.L2_PENDING=3]="L2_PENDING",l[l.L2_SUCCESS=4]="L2_SUCCESS",l[l.L2_FAILURE=5]="L2_FAILURE",l[l.CREATION_FAILED=6]="CREATION_FAILED",l[l.EXPIRED=7]="EXPIRED",l[l.CCTP_DEFAULT_STATE=8]="CCTP_DEFAULT_STATE";let e9={arbTokenBridge:{},warningTokens:{},connectionState:et.em.LOADING,l1NetworkChainId:null,l2NetworkChainId:null,verifying:1,selectedToken:null,isDepositMode:!0,sortedTransactions:(0,Q.nK)(e=>{var t,a;let s=(null===(a=e.arbTokenBridge)||void 0===a?void 0:null===(t=a.transactions)||void 0===t?void 0:t.transactions)||[],r=(0,eA.D0)();return r.address?filterTransactions([...s],r.address,e.l1NetworkChainId,e.l2NetworkChainId):[]}),pendingTransactions:(0,Q.nK)(e=>e.sortedTransactions.filter(e=>"pending"===e.status)),l1DepositsWithUntrackedL2Messages:(0,Q.nK)(e=>e.sortedTransactions.filter(e=>("deposit"===e.type||"deposit-l1"===e.type)&&"success"===e.status&&(!e.l1ToL2MsgData||e.l1ToL2MsgData.status===ev.L1ToL2MessageStatus.NOT_YET_CREATED&&!e.l1ToL2MsgData.fetchingUpdate))),failedRetryablesToRedeem:(0,Q.nK)(e=>e.depositsTransformed.filter(e=>5===e.depositStatus)),depositsTransformed:(0,Q.nK)(e=>e.sortedTransactions.filter(e=>"deposit"===e.type||"deposit-l1"===e.type).map(transformDeposit)),withdrawalsTransformed:(0,Q.nK)(e=>{var t;let a=Object.values((null===(t=e.arbTokenBridge)||void 0===t?void 0:t.pendingWithdrawalsMap)||[]);return a.map(transformWithdrawal)}),mergedTransactions:(0,Q.nK)(e=>(0,ey.Z)((0,eC.Z)([...e.depositsTransformed,...e.withdrawalsTransformed],e=>(0,ew.Z)(e.createdAt)?-1:ek()(e.createdAt).unix()))),arbTokenBridgeLoaded:!1},e7={...e9},setConnectionState=(e,t)=>{let{state:a}=e;a.app.connectionState=t},setChainIds=(e,t)=>{let{state:a}=e;a.app.l1NetworkChainId=t.l1NetworkChainId,a.app.l2NetworkChainId=t.l2NetworkChainId},setIsDepositMode=(e,t)=>{let{state:a}=e;a.app.isDepositMode=t},setSelectedToken=(e,t)=>{let{state:a}=e;a.app.selectedToken=t?{...t}:null},actions_reset=(e,t)=>{let{state:a}=e;a.app.l1NetworkChainId!==t&&a.app.l2NetworkChainId!==t&&(a.app.selectedToken=null),a.app.arbTokenBridge={},a.app.verifying=j.ALLOWED,a.app.connectionState=et.em.LOADING,a.app.arbTokenBridgeLoaded=!1},setWarningTokens=(e,t)=>{let{state:a}=e;a.app.warningTokens=t},setWhitelistState=(e,t)=>{let{state:a}=e;a.app.verifying=t},setArbTokenBridgeLoaded=(e,t)=>{let{state:a}=e;a.app.arbTokenBridgeLoaded=t},setArbTokenBridge=(e,t)=>{let{state:a,actions:s}=e;a.app.arbTokenBridge=t,t&&!a.app.arbTokenBridgeLoaded&&s.app.setArbTokenBridgeLoaded(!0)},getPendingTransactions=e=>{let{state:t}=e;return t.app.pendingTransactions},l1DepositsWithUntrackedL2Messages=e=>{let{state:t}=e;return t.app.l1DepositsWithUntrackedL2Messages},getSortedTransactions=e=>{let{state:t}=e;return t.app.sortedTransactions},getFailedRetryablesToRedeem=e=>{let{state:t}=e;return t.app.failedRetryablesToRedeem},te=(0,eb.Z0)({app:{state:e7,actions:Z}}),tt=(0,$.hs)(),ta=(0,$.aV)();(0,$.ri)();var ts=a(73523),tr=a(39293),tn=a(93330),ti=a(22650),to=a(93844);let Alert=e=>{let{children:t,type:a}=e;return(0,z.jsx)("div",{className:"rounded-md bg-red-50 p-4 ".concat("red"===a?"bg-red-50":"blue"===a?"bg-blue-50":"yellow"===a?"bg-yellow-50":"bg-green-50"),children:(0,z.jsxs)("div",{className:"flex",children:[(0,z.jsxs)("div",{className:"shrink-0",children:["red"===a&&(0,z.jsx)(ts.Z,{className:"h-5 w-5 text-red-400","aria-hidden":"true"}),"blue"===a&&(0,z.jsx)(tr.Z,{className:"h-5 w-5 text-blue-400","aria-hidden":"true"}),"yellow"===a&&(0,z.jsx)(tn.Z,{className:"h-5 w-5 text-yellow-400","aria-hidden":"true"}),"green"===a&&(0,z.jsx)(ti.Z,{className:"h-5 w-5 text-green-400","aria-hidden":"true"}),"ramps"===a&&(0,z.jsx)(to.Z,{className:"h-5 w-5 text-green-400","aria-hidden":"true"})]}),(0,z.jsx)("div",{className:"ml-3",children:(0,z.jsx)("h3",{className:"text-sm ".concat("red"===a?"text-red-800":"blue"===a?"text-blue-800":"yellow"===a?"text-yellow-800":"text-green-700"),children:t})})]})})};var tl=a(65239),td=a(52480),tc=a(39721),tu=a(58105),tm=a(16003);function TokenDepositCheckDialog(e){let{type:t,symbol:a}=e,s=(0,Y.useMemo)(()=>{switch(t){case"user-added-token":return(0,z.jsxs)(z.Fragment,{children:["You are about to deposit ",a," to Arbitrum \uD83C\uDF89 ",(0,z.jsx)("br",{}),(0,z.jsx)("br",{}),(0,z.jsx)("span",{className:"text-red-600",children:"Do not bridge"})," if your token does something non-standard like generates passive interest or is a rebasing stablecoin. ",(0,z.jsx)("br",{}),(0,z.jsx)("br",{}),"Not sure if your token is compatible?",(0,z.jsxs)("ul",{children:[(0,z.jsxs)("li",{children:[""," ",(0,z.jsx)("a",{href:"".concat(ex.Gc,"/for-devs/concepts/token-bridge/token-bridge-erc20#the-arbitrum-generic-custom-gateway"),target:"_blank",rel:"noopener noreferrer",children:(0,z.jsx)("u",{children:"Check the docs"})})]}),(0,z.jsxs)("li",{children:[" ",""," ",(0,z.jsx)("a",{href:"https://discord.gg/ZpZuw7p",target:"_blank",rel:"noopener noreferrer",children:(0,z.jsx)("u",{children:"Join Discord and ask"})})]})]}),(0,z.jsx)("br",{})]});case"new-token":return(0,z.jsxs)(z.Fragment,{children:["You are the first to bridge ",a," to Arbitrum \uD83C\uDF89 ",(0,z.jsx)("br",{}),(0,z.jsx)("br",{}),(0,z.jsx)("b",{children:"Important facts"}),(0,z.jsxs)("ol",{children:[(0,z.jsx)("li",{children:"1. Some tokens are not compatible with the bridge"}),(0,z.jsx)("li",{children:"2. The initial bridge is more expensive than following ones"})]}),(0,z.jsx)("br",{}),(0,z.jsx)("span",{className:"text-red-600",children:"Do not bridge"})," if your token does something non-standard like generates passive interest or is a rebasing stablecoin. ",(0,z.jsx)("br",{}),(0,z.jsx)("br",{}),"Not sure if your token is compatible?",(0,z.jsxs)("ul",{children:[(0,z.jsxs)("li",{children:[""," ",(0,z.jsx)("a",{href:"".concat(ex.Gc,"/for-devs/concepts/token-bridge/token-bridge-erc20#the-arbitrum-generic-custom-gateway"),target:"_blank",rel:"noopener noreferrer",children:(0,z.jsx)("u",{children:"Check the docs"})})]}),(0,z.jsxs)("li",{children:[" ",""," ",(0,z.jsx)("a",{href:"https://discord.gg/ZpZuw7p",target:"_blank",rel:"noopener noreferrer",children:(0,z.jsx)("u",{children:"Join Discord and ask"})})]})]}),(0,z.jsx)("br",{})]})}},[t,a]),r=(0,Y.useMemo)(()=>{switch(t){case"user-added-token":return"Depositing ".concat(a," to Arbitrum");case"new-token":return"New Token Detected"}},[t,a]);return(0,z.jsx)(Dialog,{...e,title:r,children:(0,z.jsx)("p",{children:s})})}var tp=a(77458);let useERC20L1Address=e=>{let{eitherL1OrL2Address:t,l2Provider:a}=e,{data:s=null,isValidating:r}=(0,e6.Z)(["useERC20L1Address",t],async()=>{var e;let s=null!==(e=await getL1ERC20Address({erc20L2Address:t,l2Provider:a}))&&void 0!==e?e:t;return s.toLowerCase()},{shouldRetryOnError:!0,errorRetryCount:2,errorRetryInterval:1e3});return{data:s,isLoading:r}};function SafeImage(e){let{fallback:t=null,src:a,...s}=e,[r,n]=(0,Y.useState)(!1);return((0,Y.useEffect)(()=>{let e=new Image;if(void 0===a)n(!1);else{let t=(0,et.Ou)(a);e.onerror=()=>n(!1),e.onload=()=>n(t),e.src=t}return function(){e.src=""}},[a]),r)?(0,z.jsx)("img",{...s,src:r,alt:e.alt||""}):t}var th={src:"/_next/static/media/grumpy-cat.cc151e37.webp",height:400,width:400,blurDataURL:"data:image/webp;base64,UklGRloAAABXRUJQVlA4IE4AAADQAQCdASoIAAgAAkA4JQBOgMUAyKNPOAD2tEeiQn5/T/w6hMIVCWVPKf1Y0gPFqqBJseyYHj9ialXk1V2Kc78KdNyXk20px5pZ0Y4AAAA=",blurWidth:8,blurHeight:8},tx=a(37890),tf=a(27991),tg=a.n(tf),tb=a(75289),tw=a.n(tb),ty={src:"/_next/static/media/uniswap.13b9e818.png",height:256,width:256,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAQlBMVEX87fX9xuD+///+8Pj/r9VMaXH96/T+///9///+crP96/L/RJr94/D+0uf//f/9utn/8/3+Wqb/gLv/L4/+ncr/nNC4qgRVAAAADXRSTlMv/urp/gD9sfX9s/nsD54gYgAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEBJREFUeJwVy1sWgCAIQMGroUAFao/9b7XT/A8NNVManDHKrKDp4kcq1keP+zHMJWNdhr7uQ0ShZpS5wd/7TvsASvICD4A9eQgAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},tC={src:"/_next/static/media/gemini.6526af28.png",height:1e3,width:1e3,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAJFBMVEVMaXEA3foA2/kA4fwA4PoA2fgA3PoAv/8A3PkA3foA2voA6v+PF9dwAAAADHRSTlMAmHq/Sz+KBGWjIpLk8diUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAANklEQVR4nBXDiQ3AQAgEsVl+uP77jWLJ0MyujiYK8u+yMmdMEe8cvxcpG9zK5AlKqKA5aYfmAyZqAQdWvDHgAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},tv={src:"/_next/static/media/cmc.0dce0ee7.png",height:471,width:471,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAALVBMVEUAAABMaXEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAChzamIAAAAD3RSTlOrADZEnLtX0W0RgQ999Se0kXKNAAAACXBIWXMAACE4AAAhOAFFljFgAAAAOElEQVR4nBXHRxLAMAwDsSUpuaT9/7me4AZkurFwW/ra4F07o2jVXG8K/jwFzHtEV/C0lCVkgOgAIrEA69MAlmUAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8};let tA=[{id:0,originChainID:0,url:"https://tokenlist.arbitrum.io/ArbTokenLists/arbitrum_token_token_list.json",name:"Arbitrum Token",isDefault:!0,logoURI:{src:"/_next/static/media/ArbitrumFoundation.b054058d.png",height:280,width:280,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAZlBMVEVMaXGPvdyQlJ5dfZiUudfJy9Cap7ao7f+ax+n5//99pcS4vcNATWF3qc3T5/GPrsZ8ocCQxusefbQLWo1btOaqrbQCfcDr//8kMUYJis9BW3UvQ1zOy85NaocdcqWfu85Mkbxei6lUHQqtAAAAGnRSTlMAdP3tX/T+B18aoPv+XHWennb8+uv8+hr7+7ftlgMAAAAJcEhZcwAACxMAAAsTAQCanBgAAABCSURBVHicBcEFAoAgAACxoyTtBqz/f9IN8CHsgBWqFCUsLqe1OS6HK7I+c3LoHOu3ZU3bmDidr8Z2Rt7LaAHfDx5+cTcDMUiqGd0AAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},isArbitrumTokenTokenList:!0},{id:1,originChainID:42161,url:"https://tokenlist.arbitrum.io/ArbTokenLists/arbed_arb_whitelist_era.json",name:"Arbitrum Whitelist Era",isDefault:!0,logoURI:{src:"/_next/static/media/arbitrum.ae7c4187.svg",height:514,width:470,blurWidth:0,blurHeight:0}},{id:2,originChainID:42161,url:"https://tokenlist.arbitrum.io/ArbTokenLists/arbed_uniswap_labs_default.json",name:"Arbed Uniswap List",isDefault:!0,logoURI:ty},{id:3,originChainID:42161,url:"https://tokenlist.arbitrum.io/ArbTokenLists/arbed_gemini_token_list.json",name:"Arbed Gemini List",isDefault:!0,logoURI:tC},{id:5,originChainID:42161,url:"https://tokenlist.arbitrum.io/ArbTokenLists/arbed_coinmarketcap.json",name:"Arbed CMC List",isDefault:!1,logoURI:tv},{id:6,originChainID:42170,url:"https://tokenlist.arbitrum.io/ArbTokenLists/42170_arbed_uniswap_labs_default.json",name:"Arbed Uniswap List",isDefault:!0,logoURI:ty},{id:7,originChainID:42170,url:"https://tokenlist.arbitrum.io/ArbTokenLists/42170_arbed_gemini_token_list.json",name:"Arbed Gemini List",isDefault:!0,logoURI:tC},{id:8,originChainID:421613,url:"https://tokenlist.arbitrum.io/ArbTokenLists/421613_arbed_coinmarketcap.json",name:"Arbed CMC List",isDefault:!0,logoURI:tv},{id:9,originChainID:412346,url:"https://tokenlist.arbitrum.io/ArbTokenLists/421613_arbed_coinmarketcap.json",name:"Arbed CMC List",isDefault:!0,logoURI:tv}],tT={};tA.forEach(e=>{tT[e.id]=e.name});let validateTokenList=e=>{let t=new(tg());tw()(t);let a=t.compile(tx.fK);return a(e)},addBridgeTokenListToBridge=(e,t)=>{fetchTokenListFromURL(e.url).then(a=>{let{isValid:s,data:r}=a;s&&t.token.addTokensFromList(r,e.id)})};async function fetchTokenListFromURL(e){try{let{data:t}=await J.Z.get(e,{headers:{"Access-Control-Allow-Origin":"*"}});if(!validateTokenList(t))return console.warn("Token List Invalid",t),{isValid:!1,data:t};return{isValid:!0,data:t}}catch(t){return console.warn("Token List URL Invalid",e),{isValid:!1,data:void 0}}}function useTokenLists(e){return(0,e6.Z)(["useTokenLists",e],e=>{let[,t]=e;return new Promise(e=>{let a=tA.filter(e=>e.originChainID===t||e.isArbitrumTokenTokenList);Promise.all(a.map(e=>fetchTokenListFromURL(e.url))).then(s=>{let r=s.map((e,s)=>{var r;let{data:n,isValid:i}=e,o=null===(r=a[s])||void 0===r?void 0:r.id;return void 0===o?{...n,isValid:i}:{l2ChainId:t,bridgeTokenListId:o,isValid:i,...n}}).filter(e=>null==e?void 0:e.isValid);e(r)})})},{shouldRetryOnError:!0,errorRetryCount:2,errorRetryInterval:1e3})}function useTokensFromLists(){let{l1:{network:e},l2:{network:t}}=useNetworksAndSigners(),{data:a=[]}=useTokenLists(t.id);return(0,Y.useMemo)(()=>{var s,r;return void 0===e||void 0===t?{}:(s=String(e.id),r=String(t.id),a.reduce((e,t)=>(t.tokens.forEach(a=>{let n=a.address.toLowerCase(),i=String(a.chainId),o=e[n];if(i===s)void 0===o?e[n]={...a,type:C.ERC20,l2Address:void 0,listIds:new Set}:e[n]={...o,address:n},e[n].listIds.add(t.bridgeTokenListId);else if(i===r){var l;if(!(null===(l=a.extensions)||void 0===l?void 0:l.bridgeInfo))return;let r=a.extensions.bridgeInfo,i=r[s];if(i){let s=i.tokenAddress.toLowerCase();if(!s)return;void 0===e[s]?e[s]={name:a.name,symbol:a.symbol,type:C.ERC20,logoURI:a.logoURI,address:s,l2Address:n,decimals:a.decimals,listIds:new Set}:e[s].l2Address=n,e[s].listIds.add(t.bridgeTokenListId)}}}),e),{}))},[a,e,t])}function useTokensFromUser(){let{app:{arbTokenBridge:{bridgeTokens:e}}}=tt();return(0,Y.useMemo)(()=>{let t={};return void 0===e?{}:(Object.keys(e).forEach(a=>{let s=e[a];s&&0===s.listIds.size&&(t[a]={...s,listIds:new Set})}),t)},[e])}function TokenImportDialog(e){let{isOpen:t,onClose:a,tokenAddress:s}=e,{address:r}=(0,X.mA)(),{app:{arbTokenBridge:{bridgeTokens:n,token:i},selectedToken:o}}=tt(),{l1:l,l2:d}=useNetworksAndSigners(),c=ta(),u=useTokensFromUser(),m=(0,tm.Z)(u),p=useTokensFromLists(),h=(0,tm.Z)(p),x=(0,tm.Z)(n),[f,g]=(0,Y.useState)(0),[b,w]=(0,Y.useState)(!1),[y,C]=(0,Y.useState)(),{data:v,isLoading:A}=useERC20L1Address({eitherL1OrL2Address:s,l2Provider:d.provider}),T=(0,Y.useMemo)(()=>{switch(f){case 0:return"Loading token";case 1:case 2:return"Import known token";case 3:return(0,z.jsxs)("span",{children:["Import ",(0,z.jsx)("span",{style:{color:"#CD0000"},children:"unknown"})," token"," "]});case 4:return"Invalid token address"}},[f]),k=(0,Y.useCallback)(async()=>{if(!v||!r)return;let e={address:v,provider:l.provider};if(!await isValidErc20(e))throw Error("".concat(v," is not a valid ERC-20 token"));return fetchErc20Data(e)},[l,r,v]),N=(0,Y.useCallback)(e=>{let t=x.current;if(void 0===t)return{found:!1};let a=t[e];if(void 0!==a)return{found:!0,token:a,status:1};let s={...h.current,...m.current},r=s[e];return void 0!==r?{found:!0,token:r,status:2}:{found:!1}},[x,h,m]),j=(0,Y.useCallback)(async e=>{await i.updateTokenData(e.address),c.app.setSelectedToken(e)},[i,c]);async function storeNewToken(e){return i.add(e).catch(e=>{g(4),"TokenDisabledError"===e.name&&(0,ep.Iv)("This token is currently paused in the bridge")})}return((0,Y.useEffect)(()=>{if(t&&void 0!==n){if(!A&&!v){g(4);return}if(v){let e=N(v);if(e.found){g(e.status),C(e.token);return}}k().then(e=>{e&&(g(3),C(erc20DataToErc20BridgeToken(e)))}).catch(()=>{g(4)})}},[s,n,k,A,t,v,N]),(0,Y.useEffect)(()=>{if(!t||A&&!v)return;let e=u[v||s];void 0!==e&&e.address!==(null==o?void 0:o.address)&&(a(!0),j(e))},[A,s,t,v,a,j,o,u]),0===f)?(0,z.jsx)(Dialog,{isOpen:t,onClose:a,title:T,isCustom:!0,children:(0,z.jsx)("div",{className:"flex h-48 items-center justify-center md:min-w-[692px]",children:(0,z.jsx)(ea.a,{color:"black",size:"medium"})})}):4===f?(0,z.jsx)(Dialog,{isOpen:t,onClose:a,title:T,actionButtonProps:{className:"hidden"},children:(0,z.jsx)("div",{className:"flex flex-col space-y-2 md:min-w-[628px]",children:(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"flex flex-col",children:(0,z.jsxs)("span",{children:["Whoops, looks like this token address is invalid.",(0,z.jsx)("br",{}),"Try asking the token team to update their link."]})}),(0,z.jsx)("div",{className:"flex w-full justify-center py-4",children:(0,z.jsx)(en(),{src:th,alt:"Grumpy cat"})})]})})}):(0,z.jsx)(Dialog,{isOpen:t,onClose:a,title:T,actionButtonProps:{loading:b,onClick:function(){void 0!==n&&!b&&(w(!0),v&&(void 0!==n[v]?(a(!0),j(y)):storeNewToken(v).catch(()=>{g(4)})))}},actionButtonTitle:"Import token",children:(0,z.jsxs)("div",{className:"flex flex-col space-y-2 md:min-w-[628px] md:max-w-[628px]",children:[1===f&&(0,z.jsx)("span",{children:"This token is on an imported token list as:"}),2===f&&(0,z.jsx)("span",{children:"This token hasn't been imported yet but appears on a token list. Are you sure you want to import it?"}),3===f&&(0,z.jsxs)("div",{className:"flex flex-col items-center space-y-3 sm:flex-row sm:space-x-3 sm:space-y-0",children:[(0,z.jsx)(eh.Z,{style:{color:"#CD0000"},className:"h-6 w-6"}),(0,z.jsx)("div",{className:"flex flex-col",children:(0,z.jsxs)("span",{children:["This token isn't found on an active token list.",(0,z.jsx)("br",{}),"Make sure you trust the source that led you here."]})})]}),(0,z.jsxs)("div",{className:"flex flex-col items-center py-4",children:[(null==y?void 0:y.logoURI)&&(0,z.jsx)(SafeImage,{style:{width:"25px",height:"25px"},className:"mb-2 rounded-full",src:null==y?void 0:y.logoURI,alt:"".concat(null==y?void 0:y.name," logo")}),(0,z.jsx)("span",{className:"text-xl font-bold leading-6",children:null==y?void 0:y.symbol}),(0,z.jsx)("span",{className:"mb-3 mt-0",children:null==y?void 0:y.name}),(0,z.jsx)("a",{href:"".concat((0,eU.jY)(l.network.id),"/token/").concat(null==y?void 0:y.address),target:"_blank",rel:"noopener noreferrer",style:{color:"#1366C1"},className:"break-all underline",children:null==y?void 0:y.address}),3===f&&(0,z.jsx)("div",{className:"flex w-full justify-center pt-4",children:(0,z.jsx)(tc.ZP,{theme:"light",content:(0,z.jsxs)("div",{children:["This token address doesn't exist in any of the token lists we have. This doesn't mean it's not good, it just means"," ",(0,z.jsx)("span",{className:"font-bold",children:"proceed with caution."}),(0,z.jsx)("br",{}),(0,z.jsx)("br",{}),"It's easy to impersonate the name of any token, including ETH. Make sure you trust the source it came from. If it's a popular token, there's a good chance we have it on our list. If it's a smaller or newer token, it's reasonable to believe we might not have it."]}),children:(0,z.jsx)("span",{className:"cursor-pointer underline",children:"I'm confused"})})}),(0,z.jsxs)("div",{className:"mt-6 flex w-full justify-start gap-1 rounded-lg bg-cyan p-3 text-sm text-dark",children:[(0,z.jsx)(tp.Z,{className:"mt-[2px] h-4 w-4 shrink-0 stroke-dark"}),(0,z.jsx)("p",{children:"The bridge does not support tokens with non-standard behaviour in balance calculation, i.e. the token balance increases or decreases while sitting in a wallet address. If you are unsure, please contact the team behind the token."})]})]})]})})}(d=D||(D={}))[d.LOADING=0]="LOADING",d[d.KNOWN=1]="KNOWN",d[d.KNOWN_UNIMPORTED=2]="KNOWN_UNIMPORTED",d[d.UNKNOWN=3]="UNKNOWN",d[d.ERROR=4]="ERROR";var tk=a(68446),tN=a(62449),tj=a(76930);function Checkbox(e){return(0,z.jsxs)(tN.r.Group,{as:"div",className:"flex flex-row items-start space-x-3",children:[(0,z.jsx)(tN.r,{...e,className:"arb-hover mt-1 h-4 w-4 rounded transition duration-200 ease-in-out ".concat(e.checked?"bg-dark":"border border-dark bg-white"),children:(0,z.jsx)(tj.Z,{className:"h-4 w-4 text-white"})}),(0,z.jsx)(tN.r.Label,{className:"cursor-pointer",children:e.label})]})}function useETHPrice(){let{data:e,error:t,isValidating:a,mutate:s}=(0,eR.ZP)("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd",e=>J.Z.get(e).then(e=>e.data.ethereum.usd),{refreshInterval:3e4,shouldRetryOnError:!0,errorRetryCount:2,errorRetryInterval:3e3}),r=(0,Y.useCallback)(t=>{let a="number"==typeof e?e:0;return t*a},[e]);return{ethPrice:null!=e?e:0,ethToUSD:r,error:t,isValidating:a,mutate:s}}function formatUSD(e){let t=e.toLocaleString(void 0,{minimumFractionDigits:Number.isInteger(e)?void 0:2,maximumFractionDigits:2});return"$".concat(t)}(c=E||(E={}))[c.None=0]="None",c[c.Short=1]="Short",c[c.Compact=3]="Compact",c[c.Standard=4]="Standard",c[c.Long=5]="Long";let formatNumber=(e,t)=>Intl.NumberFormat("en",t).format(e),formatAmount=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{decimals:a,symbol:s}=t,r=eN.O$.isBigNumber(e)?parseFloat(ej.formatUnits(e,a)):e,n=s?" ".concat(s):"";if(0===r)return"0".concat(n);let i=!t.symbol||t.symbol.length<5;if(r<1){let e=i?5:4,t=Math.pow(10,-e);return r<t?"< 0.".concat("0".repeat(e-1),"1").concat(n):formatNumber(r,{maximumFractionDigits:i?5:4,notation:"compact"})+n}return i?r>=1e6?formatNumber(r,{maximumFractionDigits:3,notation:"compact"})+n:r>=1e4?formatNumber(r,{maximumFractionDigits:0,notation:"standard"})+n:formatNumber(r,{maximumFractionDigits:4,notation:"standard"})+n:formatNumber(r,{maximumFractionDigits:1,notation:"compact"})+n};function useGasPrice(e){let{provider:t}=e,a=useChainId({provider:t}),s=(0,Y.useMemo)(()=>void 0===a?null:["gasPrice",a],[a]),{data:r=eD._Y}=(0,eR.ZP)(s,()=>t.getGasPrice(),{refreshInterval:3e4,shouldRetryOnError:!0,errorRetryCount:2,errorRetryInterval:5e3});return r}var tS=a(75398);let tD=[{inputs:[{internalType:"uint32",name:"_localDomain",type:"uint32"},{internalType:"address",name:"_attester",type:"address"},{internalType:"uint32",name:"_maxMessageBodySize",type:"uint32"},{internalType:"uint32",name:"_version",type:"uint32"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"attester",type:"address"}],name:"AttesterDisabled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"attester",type:"address"}],name:"AttesterEnabled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousAttesterManager",type:"address"},{indexed:!0,internalType:"address",name:"newAttesterManager",type:"address"}],name:"AttesterManagerUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"newMaxMessageBodySize",type:"uint256"}],name:"MaxMessageBodySizeUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"caller",type:"address"},{indexed:!1,internalType:"uint32",name:"sourceDomain",type:"uint32"},{indexed:!0,internalType:"uint64",name:"nonce",type:"uint64"},{indexed:!1,internalType:"bytes32",name:"sender",type:"bytes32"},{indexed:!1,internalType:"bytes",name:"messageBody",type:"bytes"}],name:"MessageReceived",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"bytes",name:"message",type:"bytes"}],name:"MessageSent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferStarted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newAddress",type:"address"}],name:"PauserChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRescuer",type:"address"}],name:"RescuerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"oldSignatureThreshold",type:"uint256"},{indexed:!1,internalType:"uint256",name:"newSignatureThreshold",type:"uint256"}],name:"SignatureThresholdUpdated",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"attesterManager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"attester",type:"address"}],name:"disableAttester",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAttester",type:"address"}],name:"enableAttester",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"getEnabledAttester",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getNumEnabledAttesters",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"attester",type:"address"}],name:"isEnabledAttester",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"localDomain",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"maxMessageBodySize",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextAvailableNonce",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pauser",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes",name:"message",type:"bytes"},{internalType:"bytes",name:"attestation",type:"bytes"}],name:"receiveMessage",outputs:[{internalType:"bool",name:"success",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"originalMessage",type:"bytes"},{internalType:"bytes",name:"originalAttestation",type:"bytes"},{internalType:"bytes",name:"newMessageBody",type:"bytes"},{internalType:"bytes32",name:"newDestinationCaller",type:"bytes32"}],name:"replaceMessage",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"tokenContract",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"rescueERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rescuer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"destinationDomain",type:"uint32"},{internalType:"bytes32",name:"recipient",type:"bytes32"},{internalType:"bytes",name:"messageBody",type:"bytes"}],name:"sendMessage",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"destinationDomain",type:"uint32"},{internalType:"bytes32",name:"recipient",type:"bytes32"},{internalType:"bytes32",name:"destinationCaller",type:"bytes32"},{internalType:"bytes",name:"messageBody",type:"bytes"}],name:"sendMessageWithCaller",outputs:[{internalType:"uint64",name:"",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newMaxMessageBodySize",type:"uint256"}],name:"setMaxMessageBodySize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"newSignatureThreshold",type:"uint256"}],name:"setSignatureThreshold",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"signatureThreshold",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newAttesterManager",type:"address"}],name:"updateAttesterManager",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newPauser",type:"address"}],name:"updatePauser",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newRescuer",type:"address"}],name:"updateRescuer",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"usedNonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"version",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"}],tE=[{inputs:[{internalType:"address",name:"_messageTransmitter",type:"address"},{internalType:"uint32",name:"_messageBodyVersion",type:"uint32"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint64",name:"nonce",type:"uint64"},{indexed:!0,internalType:"address",name:"burnToken",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"address",name:"depositor",type:"address"},{indexed:!1,internalType:"bytes32",name:"mintRecipient",type:"bytes32"},{indexed:!1,internalType:"uint32",name:"destinationDomain",type:"uint32"},{indexed:!1,internalType:"bytes32",name:"destinationTokenMessenger",type:"bytes32"},{indexed:!1,internalType:"bytes32",name:"destinationCaller",type:"bytes32"}],name:"DepositForBurn",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"localMinter",type:"address"}],name:"LocalMinterAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"localMinter",type:"address"}],name:"LocalMinterRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"mintRecipient",type:"address"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!0,internalType:"address",name:"mintToken",type:"address"}],name:"MintAndWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferStarted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint32",name:"domain",type:"uint32"},{indexed:!1,internalType:"bytes32",name:"tokenMessenger",type:"bytes32"}],name:"RemoteTokenMessengerAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint32",name:"domain",type:"uint32"},{indexed:!1,internalType:"bytes32",name:"tokenMessenger",type:"bytes32"}],name:"RemoteTokenMessengerRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRescuer",type:"address"}],name:"RescuerChanged",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newLocalMinter",type:"address"}],name:"addLocalMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"domain",type:"uint32"},{internalType:"bytes32",name:"tokenMessenger",type:"bytes32"}],name:"addRemoteTokenMessenger",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint32",name:"destinationDomain",type:"uint32"},{internalType:"bytes32",name:"mintRecipient",type:"bytes32"},{internalType:"address",name:"burnToken",type:"address"}],name:"depositForBurn",outputs:[{internalType:"uint64",name:"_nonce",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint32",name:"destinationDomain",type:"uint32"},{internalType:"bytes32",name:"mintRecipient",type:"bytes32"},{internalType:"address",name:"burnToken",type:"address"},{internalType:"bytes32",name:"destinationCaller",type:"bytes32"}],name:"depositForBurnWithCaller",outputs:[{internalType:"uint64",name:"nonce",type:"uint64"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"remoteDomain",type:"uint32"},{internalType:"bytes32",name:"sender",type:"bytes32"},{internalType:"bytes",name:"messageBody",type:"bytes"}],name:"handleReceiveMessage",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"localMessageTransmitter",outputs:[{internalType:"contract IMessageTransmitter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"localMinter",outputs:[{internalType:"contract ITokenMinter",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"messageBodyVersion",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"",type:"uint32"}],name:"remoteTokenMessengers",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"removeLocalMinter",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"domain",type:"uint32"}],name:"removeRemoteTokenMessenger",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes",name:"originalMessage",type:"bytes"},{internalType:"bytes",name:"originalAttestation",type:"bytes"},{internalType:"bytes32",name:"newDestinationCaller",type:"bytes32"},{internalType:"bytes32",name:"newMintRecipient",type:"bytes32"}],name:"replaceDepositForBurn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"tokenContract",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"rescueERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rescuer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newRescuer",type:"address"}],name:"updateRescuer",outputs:[],stateMutability:"nonpayable",type:"function"}];console.warn("NEXT_PUBLIC_CCTP_SUBGRAPH_BASE_URL variable missing."),(u=L||(L={}))[u.Ethereum=0]="Ethereum",u[u.ArbitrumOne=3]="ArbitrumOne";let tL={[eU.a_.Ethereum]:{tokenMessengerContractAddress:eM.Ethereum.tokenMessengerContractAddress,targetChainDomain:L.ArbitrumOne,targetChainId:eU.a_.ArbitrumOne,usdcContractAddress:eM.Ethereum.USDC,messageTransmitterContractAddress:"0xc30362313fbba5cf9163f0bb16a0e01f01a896ca",attestationApiUrl:"https://iris-api.circle.com/v1",tokenMinterContractAddress:"0xc4922d64a24675e16e1586e3e3aa56c06fabe907"},[eU.a_.Goerli]:{tokenMessengerContractAddress:eM.Goerli.tokenMessengerContractAddress,targetChainDomain:L.ArbitrumOne,targetChainId:eU.a_.ArbitrumGoerli,usdcContractAddress:eM.Goerli.USDC,messageTransmitterContractAddress:"0x109bc137cb64eab7c0b1dddd1edf341467dc2d35",attestationApiUrl:"https://iris-api-sandbox.circle.com/v1",tokenMinterContractAddress:"0xca6b4c00831ffb77afe22e734a6101b268b7fcbe"},[eU.a_.ArbitrumOne]:{tokenMessengerContractAddress:eM.ArbitrumOne.tokenMessengerContractAddress,targetChainDomain:L.Ethereum,targetChainId:eU.a_.Ethereum,usdcContractAddress:eM.ArbitrumOne.USDC,messageTransmitterContractAddress:"0x0a992d191deec32afe36203ad87d7d289a738f81",attestationApiUrl:"https://iris-api.circle.com/v1",tokenMinterContractAddress:"0xe7ed1fa7f45d05c508232aa32649d89b73b8ba48"},[eU.a_.ArbitrumGoerli]:{tokenMessengerContractAddress:eM.ArbitrumGoerli.tokenMessengerContractAddress,targetChainDomain:L.Ethereum,targetChainId:eU.a_.Goerli,usdcContractAddress:eM.ArbitrumGoerli.USDC,messageTransmitterContractAddress:"0x26413e8157cd32011e726065a5462e97dd4d03d9",attestationApiUrl:"https://iris-api-sandbox.circle.com/v1",tokenMinterContractAddress:"0xe997d7d2f6e065a9a93fa2175e878fb9081f1f0a"}};function useCCTP_getContracts(e){return e&&tL[e]||tL[eU.a_.Ethereum]}function useCCTP(e){let{sourceChainId:t}=e,{tokenMessengerContractAddress:a,targetChainDomain:s,targetChainId:r,attestationApiUrl:n,usdcContractAddress:i,messageTransmitterContractAddress:o}=useCCTP_getContracts(t),l=(0,Y.useCallback)(async e=>{let{amount:t,signer:r,recipient:n}=e,o=tS.hexlify(tS.zeroPad(n,32)),l=await (0,eA.$q)({address:a,abi:tE,functionName:"depositForBurn",signer:r,args:[t,s,o,i]});return(0,eA.n9)(l)},[a,s,i]),d=(0,Y.useCallback)(async e=>{let t=await fetch("".concat(n,"/attestations/").concat(e),{method:"GET",headers:{accept:"application/json"}}),a=await t.json();return a},[n]),c=(0,Y.useCallback)(async e=>{for(;;){let t=await d(e);if("complete"===t.status)return t.attestation;await new Promise(e=>setTimeout(e,3e4))}},[d]),u=(0,Y.useCallback)(async e=>{let{messageBytes:t,attestation:a,signer:s}=e,n=await (0,eA.$q)({address:o,abi:tD,functionName:"receiveMessage",chainId:r,signer:s,args:[t,a]});return(0,eA.n9)(n)},[o,r]),m=(0,Y.useCallback)(async(e,t)=>{let s=eE.ERC20__factory.connect(i,t);return s.functions.approve(a,e)},[i,a]);return{approveForBurn:m,depositForBurn:l,receiveMessage:u,fetchAttestation:d,waitForAttestation:c}}let approveTokenEstimateGas=async e=>{let{erc20L1Address:t,address:a,l1Provider:s,l2Provider:r}=e,n=await fetchErc20L1GatewayAddress({erc20L1Address:t,l1Provider:s,l2Provider:r}),i=eE.ERC20__factory.connect(t,s);return i.estimateGas.approve(n,eD.Bz,{from:a})};async function approveCctpEstimateGas(e,t,a){let{usdcContractAddress:s,tokenMessengerContractAddress:r}=useCCTP_getContracts(e),n=eE.ERC20__factory.connect(s,a);try{return await n.estimateGas.approve(r,t)}catch(e){return eD._Y}}function getChainLayerByChainId(e){let{isEthereumMainnetOrTestnet:t,isArbitrum:a}=(0,eU.CR)(e);return t?"L1":a?"L2":"Orbit"}let useChainLayers=()=>{let{l1:e,l2:t}=useNetworksAndSigners();return{parentLayer:getChainLayerByChainId(e.network.id),layer:getChainLayerByChainId(t.network.id)}};function shortenAddress(e){let t=e.length;return"".concat(e.substring(0,5),"...").concat(e.substring(t-4,t))}function shortenTxHash(e){let t=e.length;return"".concat(e.substring(0,7),"...").concat(e.substring(t-4,t))}let tI=!!window.Cypress,createBlockExplorerUrlForToken=e=>{let{explorerLink:t,tokenAddress:a}=e;if(t&&a)try{let e=new URL(t);return e.pathname+="token/".concat(a),e.toString()}catch(e){ei.Tb(e);return}};function TokenApprovalDialog(e){let{address:t}=(0,X.mA)(),{allowance:a,isOpen:s,amount:r,token:n,isCctp:i}=e,{app:{isDepositMode:o}}=tt(),l=a&&n?ej.formatUnits(a,n.decimals):0,{ethToUSD:d}=useETHPrice(),{l1:c,l2:u}=useNetworksAndSigners(),{parentLayer:m,layer:p}=useChainLayers(),{isEthereumMainnet:h,isTestnet:x}=(0,eU.CR)(c.network.id),f=o?c.provider:u.provider,g=useGasPrice({provider:f}),b=(0,X.xx)(),{data:w}=(0,X.mx)({chainId:b}),[y,C]=(0,Y.useState)(!1),[v,A]=(0,Y.useState)(eD._Y),[T,k]=(0,Y.useState)(""),N=(0,Y.useMemo)(()=>parseFloat(ej.formatEther(v.mul(g))),[v,g]),j=(0,Y.useMemo)(()=>{let e=formatAmount(N,{symbol:ex.Xx.symbol}),t=formatUSD(d(N));return"".concat(e).concat(h?" (".concat(t,")"):"")},[N,d,h]);(0,Y.useEffect)(()=>{s&&async function(){let e;(null==n?void 0:n.address)&&(i?e=w?await approveCctpEstimateGas(b,eD.Bz,w):eD._Y:t&&(e=await approveTokenEstimateGas({erc20L1Address:n.address,address:t,l1Provider:c.provider,l2Provider:u.provider})),e&&A(e))}()},[i,s,o,x,b,w,t,null==n?void 0:n.address,c.provider,u.provider]),(0,Y.useEffect)(()=>{let getContractAddress=async function(){if(i){var e;k(null===(e=useCCTP_getContracts(b))||void 0===e?void 0:e.tokenMessengerContractAddress);return}if(!(null==n?void 0:n.address)){k("");return}if(o){k(await fetchErc20L1GatewayAddress({erc20L1Address:n.address,l1Provider:c.provider,l2Provider:u.provider}));return}k(await fetchErc20L2GatewayAddress({erc20L1Address:n.address,l2Provider:u.provider}))};getContractAddress()},[b,i,o,c.provider,u.provider,null==n?void 0:n.address]);let S=a&&!a.isZero(),D=o?i?"the CCTP ".concat(p," deposit fee."):"the standard ".concat(p," deposit fee."):i?"the CCTP ".concat(m," deposit fee."):"the standard ".concat(m," deposit fee.");return(0,z.jsx)(Dialog,{...e,onClose:function(t){e.onClose(t),C(!1)},title:"Acknowledge approval and deposit fees",actionButtonTitle:"Pay approval fee of ".concat(j),actionButtonProps:{disabled:!y},children:(0,z.jsxs)("div",{className:"flex flex-col space-y-6 md:max-w-[490px]",children:[(0,z.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,z.jsx)(SafeImage,{src:null==n?void 0:n.logoURI,alt:"".concat(null==n?void 0:n.name," logo"),className:"h-8 w-8 grow-0 rounded-full",fallback:(0,z.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-ocl-blue text-sm font-medium text-white",children:"?"})}),(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,z.jsx)("span",{className:"text-base font-medium text-gray-900",children:null==n?void 0:n.symbol}),(0,z.jsx)("span",{className:"text-xs text-gray-500",children:null==n?void 0:n.name})]}),(0,z.jsx)(ed.d,{href:"".concat((0,eU.jY)(o?c.network.id:u.network.id),"/token/").concat(null==n?void 0:n.address),className:"text-xs text-blue-link underline",children:null==n?void 0:n.address.toLowerCase()})]})]}),(0,z.jsx)(Checkbox,{label:(0,z.jsxs)("span",{className:"font-light",children:["I understand that I have to pay a one-time"," ",(0,z.jsxs)("span",{className:"font-medium",children:["approval fee of ",j,"*"]})," ","for each new token or spending cap. This transaction gives permission to the"," ",(0,z.jsx)(ed.d,{className:"text-blue-link underline",href:"".concat((0,eU.jY)(o?c.network.id:u.network.id),"/address/").concat(T),onClick:e=>{e.stopPropagation()},children:shortenTxHash(T)})," ","contract to transfer a capped amount of a specific token."]}),checked:y,onChange:C}),(0,z.jsxs)("div",{className:"flex flex-col md:max-w-[490px]",children:[S&&(0,z.jsxs)("div",{className:"flex flex-row items-center space-x-2 rounded-lg bg-yellow-50 px-2 py-3",children:[(0,z.jsx)(tk.Z,{className:"h-8 w-8 text-yellow-400"}),(0,z.jsxs)("span",{className:"text-sm font-light",children:["You are seeing this dialog because the current allowance you have set for this token",(0,z.jsxs)("span",{className:"font-medium",children:[" (",l,") "]}),"is less than the amount you are trying to bridge",(0,z.jsxs)("span",{className:"font-medium",children:[" (",r,")"]}),"."]})]}),(0,z.jsxs)("div",{className:"flex flex-row items-center space-x-2 rounded-lg bg-cyan px-2 py-3 ".concat(S&&"mt-4"),children:[(0,z.jsx)(tp.Z,{className:"h-6 w-6 text-cyan-dark"}),(0,z.jsxs)("span",{className:"text-sm font-light text-cyan-dark",children:["After approval, you'll see a second prompt in your wallet for"," ",D," ",(0,z.jsx)(ed.d,{href:ex.E2,className:"underline",children:"Learn more."})]})]})]})]})})}var tR=a(62671);let tM=(0,Y.forwardRef)((e,t)=>{var a;return(0,z.jsx)(tR.O,{ref:t,className:"".concat("rounded-tl-lg rounded-tr-lg px-8 py-3 transition-colors duration-300 ui-selected:bg-white ui-not-selected:bg-ocl-blue ui-not-selected:text-white ui-not-selected:hover:text-gray-4"," ").concat(null!==(a=e.className)&&void 0!==a?a:""),...e,children:e.children})});tM.displayName="TabButton";var tU=a(38673),tO=a(19808),t_=a(46112);function BridgesTable(e){let[t,a]=(0,eS.ZP)("arbitrum:bridge:favorite-fast-bridges",[]);function onClick(t){e.selectedNonCanonicalToken?trackEvent("Fast Bridge Click",{bridge:t,tokenSymbol:e.selectedNonCanonicalToken}):trackEvent("Fast Bridge Click",{bridge:t})}function isFavorite(e){return t.includes(e)}let s=e.bridgeList.sort((e,t)=>{let a=isFavorite(e.name),s=isFavorite(t.name);return a&&!s?-1:!a&&s?1:e.name<t.name?-1:1});return(0,z.jsxs)("table",{className:"w-full border border-gray-3",children:[(0,z.jsx)("thead",{className:"bg-gray-1 text-left",children:(0,z.jsxs)("tr",{className:"text-gray-6",children:[(0,z.jsx)("th",{className:"w-1/6 px-6 py-4 font-normal",children:"Favorite"}),(0,z.jsx)("th",{className:"w-4/6 px-6 py-4 font-normal",children:"Exchange"}),(0,z.jsx)("th",{className:"w-1/6 px-6 py-4 font-normal"})]})}),(0,z.jsx)("tbody",{className:"font-light",children:s.map(e=>(0,z.jsxs)("tr",{className:"cursor-pointer border border-gray-3 hover:bg-cyan",children:[(0,z.jsx)("td",{children:(0,z.jsx)(ed.d,{href:e.href,className:"flex h-16 items-center px-6",onClick:()=>onClick(e.name),children:(0,z.jsx)("button",{onClick:s=>{var r;s.preventDefault(),r=e.name,t.includes(r)?a(t.filter(e=>e!==r)):a([...t,r])},children:isFavorite(e.name)?(0,z.jsx)(t_.Z,{className:"h-6 w-6 text-ocl-blue"}):(0,z.jsx)(tU.Z,{className:"h-6 w-6 text-ocl-blue"})})})}),(0,z.jsx)("td",{children:(0,z.jsx)(ed.d,{href:e.href,onClick:()=>onClick(e.name),children:(0,z.jsxs)("div",{className:"flex h-16 items-center space-x-4 px-6",children:[(0,z.jsx)(en(),{src:e.imageSrc,alt:e.name,className:"bridge-logos h-8 w-8 rounded-full object-contain",width:32,height:32}),(0,z.jsx)("span",{children:e.name})]})})}),(0,z.jsx)("td",{children:(0,z.jsx)(ed.d,{href:e.href,className:"arb-hover flex h-16 w-full items-center justify-center text-gray-4 hover:text-ocl-blue",onClick:()=>onClick(e.name),children:(0,z.jsx)(tO.Z,{className:"h-5 w-5"})})})]},e.name))})]})}var tB={src:"/_next/static/media/hop.536c4a3a.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAS1BMVEXCSejUa8jjhq7ff7PXc8nokarbeLzQY9LLWNjFS9/fhsTRbd723/Pxz/DuxevMYN7hmdvafMvbi+P89fzRX8fkj7jllsDhlNLpqc00L/x6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAQUlEQVR4nAXBBQKAMAwEsOusMjfg/y8lARMl72KE8Jz2uAjJrZZyHTSvM/bnoWuP85oHeqm1WQI0dw4hAVARpvADWsICcjWWLVoAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},tP={src:"/_next/static/media/celer.e65b3a45.png",height:400,width:950,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAGFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABWNxwqAAAACHRSTlMKQlBWI4icK2KHbhsAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAfSURBVHicBcEHAQAACMOwlnH8OyaBNAegtbPTEMvIAwMPADjilh2HAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:3},tF={src:"/_next/static/media/connext.2be95308.png",height:192,width:192,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAVFBMVEVMaXHALc82tv+jFPe3oKPhdn2XG/7oiWiyCvSMK/xQi/2cH/xEl/3OS6nohmvwk2LieXnXY5BYdP94S/04pPl8R/1nZ/vQT6lZeP1Mjv1pa/zmdYcuNmCNAAAAG3RSTlMA5g5+CNBkHiY26Ea9X880fqEu7y3rRYPElmiaZXefAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAPUlEQVR4nC3LxwGAMAwAsUu1nYTeYf89eYD+guj5rGUnK/h2bhac0C6qcSTKjSpjz7zk6qYkYIHuGf4pkRdDYwHhHX9I+AAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},tG={src:"/_next/static/media/across.5e8e8be4.png",height:480,width:480,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAG1BMVEVs+ths+dhq+dpMaXFr+Ndn6MtHg3hXtKBYuaSO0TO1AAAABXRSTlP6sSkAsnfSyH0AAAAJcEhZcwAAA+gAAAPoAbV7UmsAAAAwSURBVHicPYtBDgAgDMI6Npz/f7FxiXIipZAKKCViIoplLwJwt4e69y3xpi/PPZQHE8wAiNQORCcAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},tW={src:"/_next/static/media/stargate.3334d012.png",height:64,width:64,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAD1BMVEUAAAAHBwcrKytKSkqUlJTJD9Y0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIklEQVR4nGNgQAKMjBCamYmJGcxnYmFhAonBGXAphGIIAAAHmAA1GJxR6AAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8},tH={src:"/_next/static/media/synapse.03157cce.png",height:64,width:64,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAARVBMVEUAAAD8BPx2OphnMYVSBFoZDiCCRPcnFjLKIfs5EVtjK61WEG59Hq2oB61+QqUPBxO5Jve4Kfo+Hm+LFauVEq1rBW0vGTzSg7HdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAP0lEQVR4nBXKRxLAIAwAsQUMtqmp/P+pmegsQhgijxnhJWeaMSBG6MiOupI6stPSqc4NaULF2p+vwnF291rKBz6HAdr7bSdtAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8};function getFastBridges(e){let{from:t,to:a,tokenSymbol:s,amount:r}=e;function chainIdToSlug(e){switch(e){case eU.a_.Ethereum:return"ethereum";case eU.a_.ArbitrumOne:return"arbitrum";default:return""}}function getBridgeDeepLink(e){switch(e){case"Hop":return"https://app.hop.exchange/#/send?sourceNetwork=".concat(chainIdToSlug(t),"&destNetwork=").concat(chainIdToSlug(a),"&token=").concat(s,"&amount=").concat(r);case"Celer":return"https://cbridge.celer.network/".concat(t,"/").concat(a,"/").concat(s);case"Connext":return"https://bridge.connext.network/".concat(s,"-from-").concat(chainIdToSlug(t),"-to-").concat(chainIdToSlug(a),"?amount=").concat(r);case"Across":return"https://across.to/?from=".concat(t,"&to=").concat(a,"&asset=").concat(s,"&amount=").concat(r);case"Stargate":return"https://stargate.finance/transfer?srcChain=".concat(chainIdToSlug(t),"&dstChain=").concat(chainIdToSlug(a),"&srcToken=").concat(s);case"Synapse":return"https://synapseprotocol.com/?inputCurrency=".concat(s,"&outputCurrency=").concat(s,"&outputChain=").concat(a);default:return""}}let n={Hop:{imageSrc:tB,href:getBridgeDeepLink("Hop")},Celer:{imageSrc:tP,href:getBridgeDeepLink("Celer")},Connext:{imageSrc:tF,href:getBridgeDeepLink("Connext")},Across:{imageSrc:tG,href:getBridgeDeepLink("Across")},Stargate:{imageSrc:tW,href:getBridgeDeepLink("Stargate")},Synapse:{imageSrc:tH,href:getBridgeDeepLink("Synapse")}};return Object.values(I).filter(e=>{switch(e){case"LI.FI":case"Wormhole":case"Router":return!1;default:return!0}}).map(e=>({name:e,imageSrc:n[e].imageSrc,href:n[e].href}))}(m=I||(I={})).Hop="Hop",m.Celer="Celer",m.Connext="Connext",m.Across="Across",m.Stargate="Stargate",m.Synapse="Synapse",m.Wormhole="Wormhole",m.LIFI="LI.FI",m.Router="Router",(R||(R={})).USDC="USDC",(M||(M={})).FRAX="FRAX",(U||(U={})).FRAX="0x853d955acef822db058eb8505911ed77f175b99e";let tZ={"0x853d955acef822db058eb8505911ed77f175b99e":{tokenSymbol:"FRAX",supportedBridges:["Celer"],learnMoreUrl:"https://docs.frax.finance/cross-chain/bridge",bridgeUrl:"https://app.frax.finance/bridge?chain=arbitrum"}};ex.Bu;let tz=[{name:"Celer",imageSrc:tP,getHref:e=>{let{transferMode:t}=e;return"deposit"===t?"https://cbridge.celer.network/bridge/ethereum-arbitrum/":"https://cbridge.celer.network/bridge/arbitrum-ethereum/"}},{name:"LI.FI",imageSrc:{src:"/_next/static/media/lifi.ab7290a1.webp",height:256,width:256,blurDataURL:"data:image/webp;base64,UklGRmQAAABXRUJQVlA4IFgAAABQAgCdASoIAAgAAkA4JZgCdLoAEIAZf+tQq8AA/uiuPjnzwrOfPbnf9w/icPSn3RXOq/JwHZWPId3XjvxPzs/95xqRSC9S3wKDtTjts+L1BoGK2vhcAAAA",blurWidth:8,blurHeight:8},getHref:e=>{let{from:t,to:a,fromTokenAddress:s,toTokenAddress:r,amount:n,transferMode:i}=e;return"https://jumper.exchange/?fromChain=".concat(t,"&fromToken=").concat(s,"&toChain=").concat(a,"&toToken=").concat(r,"&fromAmount=").concat(n)}},{name:"Wormhole",imageSrc:{src:"/_next/static/media/wormhole.d7a63e27.svg",height:40,width:40,blurWidth:0,blurHeight:0},getHref:()=>"https://www.portalbridge.com/usdc-bridge/"},{name:"Router",imageSrc:{src:"/_next/static/media/router.80a9736e.webp",height:96,width:96,blurDataURL:"data:image/webp;base64,UklGRlQAAABXRUJQVlA4IEgAAADQAQCdASoIAAgAAkA4JQBOgB6R/ruugAD+99SGQNjoL9eA9QlK0NsfMJId8Qa6oYfVPTgBWOEEum90I2qHz4aKvJpjP38D5AA=",blurWidth:8,blurHeight:8},getHref:e=>{let{from:t,to:a,fromTokenAddress:s,toTokenAddress:r,transferMode:n}=e;return"https://app.thevoyager.io/swap?fromChain=".concat(t,"&toChain=").concat(a,"&fromToken=").concat(s,"&toToken=").concat(r)}}];function WithdrawalConfirmationDialog(e){var t;let{l1:a,l2:s}=useNetworksAndSigners(),{parentLayer:r}=useChainLayers(),n=useIsConnectedToArbitrum(),i=(0,eU.pp)(a.network.id),{app:{selectedToken:o}}=tt(),l=useNativeCurrency({provider:s.provider}),d=n?s.network:a.network,c=n?a.network:s.network,u=getFastBridges({from:d.id,to:c.id,tokenSymbol:null!==(t=null==o?void 0:o.symbol)&&void 0!==t?t:l.symbol,amount:e.amount}),[m,p]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)(!1),f=(0,eU.NM)(a.network.id)*(0,eU.i5)(s.network.id),g=Math.ceil(f/86400),b="",w=Math.ceil(f/3600);b=g>=2?"".concat(g," day").concat(g>1?"s":""):"".concat(w," hour").concat(w>1?"s":"");let{isArbitrumOne:y,isOrbitChain:C}=(0,eU.CR)(s.network.id);function closeWithReset(t){e.onClose(t),p(!1),x(!1)}return(0,z.jsx)(Dialog,{...e,onClose:closeWithReset,isCustom:!0,children:(0,z.jsx)("div",{className:"flex flex-col md:min-w-[725px] md:max-w-[725px]",children:(0,z.jsxs)(tR.O.Group,{children:[(0,z.jsxs)("div",{className:"flex flex-row items-center justify-between bg-ocl-blue px-8 py-4",children:[(0,z.jsxs)(es.V.Title,{className:"text-2xl font-medium text-white",children:["Move funds to ",i]}),(0,z.jsx)("button",{className:"arb-hover",onClick:()=>closeWithReset(!1),children:(0,z.jsx)(eu.Z,{className:"h-6 w-6 text-white"})})]}),(0,z.jsxs)(tR.O.List,{className:"bg-ocl-blue",children:[y&&(0,z.jsx)(tM,{children:"Use a third-party bridge"}),(0,z.jsx)(tM,{children:"Use Arbitrums bridge"})]}),y&&(0,z.jsxs)(tR.O.Panel,{className:"flex flex-col space-y-3 px-8 py-4",children:[(0,z.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,z.jsx)("p",{className:"font-light",children:"Get your funds in under 30 min with a fast exit bridge."}),(0,z.jsxs)("div",{className:"flex flex-row items-center space-x-1",children:[(0,z.jsx)(eh.Z,{className:"h-6 w-6 text-orange-dark"}),(0,z.jsx)("span",{className:"font-medium text-orange-dark",children:"Security not guaranteed by Arbitrum"})]})]}),(0,z.jsx)(BridgesTable,{bridgeList:u})]}),(0,z.jsxs)(tR.O.Panel,{className:"flex flex-col justify-between px-8 py-4 md:min-h-[430px]",children:[(0,z.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,z.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,z.jsxs)("p",{className:"font-light",children:["Get your funds in ~",b," and pay a small fee twice."," ",(0,z.jsx)(ed.d,{href:ex.wn,className:"underline",children:"Learn more."})]}),"L1"===r&&(0,z.jsxs)("div",{className:"flex flex-row items-center space-x-1",children:[(0,z.jsx)(tj.Z,{className:"h-6 w-6 text-lime-dark"}),(0,z.jsx)("span",{className:"font-medium text-lime-dark",children:"Security guaranteed by Ethereum"})]})]}),(0,z.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,z.jsx)(Checkbox,{label:(0,z.jsxs)("span",{className:"font-light",children:["I understand that it will take ~",b," ","before I can claim my funds on"," ","L1"===r?"Ethereum ":"",i]}),checked:m,onChange:p}),(0,z.jsx)(Checkbox,{label:(0,z.jsxs)("span",{className:"font-light",children:["I understand that after claiming my funds, Ill have to send"," ",(0,z.jsxs)("span",{className:"font-medium",children:["another transaction on ",r]})," ","and pay another ",r," fee"]}),checked:h,onChange:x}),(0,z.jsxs)("div",{className:"flex flex-col justify-center space-y-2.5 rounded bg-cyan py-4 align-middle ",children:[(0,z.jsxs)("p",{className:"text-center text-sm font-light",children:["Set calendar reminder for ",b," from now"]}),(0,z.jsx)("div",{className:"flex justify-center",children:(0,z.jsxs)(ed.d,{href:function(e,t,a,s){let r="".concat(t," ").concat(a," Withdrawal from ").concat(s),n=ek()().add(e+1,"hour"),i=n.format("YYYYMMDD[T]HH[0000%2F]YYYYMMDD[T]HH[0000]");return"https://calendar.google.com/calendar/render?action=TEMPLATE&text=".concat(r,"&dates=").concat(i,"&details=Withdrawn+on+%3Ca%20href=%22https://bridge.arbitrum.io%22%3Ehttps://bridge.arbitrum.io%3C/a%3E")}(w,e.amount,(null==o?void 0:o.symbol)||l.symbol,(0,eU.pp)(s.network.id)),onClick:()=>trackEvent("Add to Google Calendar Click"),className:"arb-hover flex space-x-2 rounded border border-ocl-blue px-4 py-2 text-ocl-blue",children:[(0,z.jsx)(en(),{src:"/images/GoogleCalendar.svg",alt:"Google Calendar Icon",width:24,height:24}),(0,z.jsx)("span",{children:"Add to Google Calendar"})]})}),(0,z.jsx)("p",{className:"text-center text-sm font-light",children:"We dont store any email data"})]})]})]}),(0,z.jsxs)("div",{className:"mt-2 flex flex-row justify-end space-x-2",children:[(0,z.jsx)(el,{variant:"secondary",onClick:()=>closeWithReset(!1),children:"Cancel"}),(0,z.jsx)(el,{variant:"primary",disabled:!(m&&h),onClick:()=>{closeWithReset(!0),trackEvent("Slow Bridge Click")},children:"Continue"})]})]})]})})})}function DepositConfirmationDialog(e){let{app:{selectedToken:t}}=tt(),{l1:a,l2:s}=useNetworksAndSigners(),r=useIsConnectedToArbitrum(),n=(0,eU.pp)(s.network.id),{isArbitrumOne:i}=(0,eU.CR)(s.network.id),o=r?s.network:a.network,l=r?a.network:s.network,d=null==t?void 0:t.symbol,c=null==t?void 0:t.address,u=tZ[c];if(!u)return null;let m=[...getFastBridges({from:o.id,to:l.id,tokenSymbol:d,amount:e.amount})].filter(e=>d&&u.supportedBridges.includes(e.name));return(0,z.jsx)(Dialog,{...e,isCustom:!0,children:(0,z.jsx)("div",{className:"flex flex-col md:min-w-[725px] md:max-w-[725px]",children:(0,z.jsxs)(tR.O.Group,{children:[(0,z.jsxs)("div",{className:"flex flex-row items-center justify-between bg-ocl-blue px-8 py-4",children:[(0,z.jsxs)(es.V.Title,{className:"text-2xl font-medium text-white",children:["Move funds to ",n]}),(0,z.jsx)("button",{className:"arb-hover",onClick:()=>{e.onClose(!1)},children:(0,z.jsx)(eu.Z,{className:"h-6 w-6 text-white"})})]}),(0,z.jsx)(tR.O.List,{className:"bg-ocl-blue",children:i&&(0,z.jsx)(tM,{children:"Use a third-party bridge"})}),i&&d&&(0,z.jsxs)(tR.O.Panel,{className:"flex flex-col space-y-3 px-8 py-4",children:[(0,z.jsx)("div",{className:"flex flex-col space-y-3",children:(0,z.jsxs)("p",{className:"font-light",children:["To get the canonical variant of ",d," directly onto"," ",n," youll have to use a bridge that ",d," ","has fully integrated with."," ",(0,z.jsx)(ed.d,{href:u.learnMoreUrl,className:"underline",children:"Learn more"}),"."]})}),(0,z.jsx)(BridgesTable,{bridgeList:m,selectedNonCanonicalToken:d}),(0,z.jsx)("div",{className:"mt-2 flex flex-row justify-end space-x-2",children:(0,z.jsx)(el,{variant:"secondary",onClick:()=>e.onClose(!1),children:"Cancel"})})]})]})})})}function Tooltip(e){let{show:t=!0,content:a,wrapperClassName:s="w-max",theme:r="light",children:n}=e;return a?t?(0,z.jsx)(tc.ZP,{theme:r,content:a,children:(0,z.jsx)("div",{className:s,children:n})}):(0,z.jsx)(z.Fragment,{children:n}):null}function useDebouncedValue(e,t){let[a,s]=(0,Y.useState)(e);return(0,Y.useEffect)(()=>{let a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t]),a}var tY=a(18091);async function fetchFallbackGasEstimates(e){let{inboxAddress:t,l1Provider:a}=e,s=await a.getGasPrice(),r=tY.Inbox__factory.connect(t,a),n=await r.calculateRetryableSubmissionFee(eN.O$.from(1e3),s.add(s.mul(eN.O$.from(3))));return{estimatedL1Gas:eN.O$.from(24e4),estimatedL2Gas:eN.O$.from(1e5),estimatedL2SubmissionCost:n}}async function allowanceIsInsufficient(e){let{amount:t,address:a,erc20L1Address:s,l1Provider:r,l2Provider:n}=e,i=await fetchErc20L1GatewayAddress({erc20L1Address:s,l1Provider:r,l2Provider:n}),o=await fetchErc20Allowance({address:s,provider:r,owner:a,spender:i});return o.lt(t)}async function depositTokenEstimateGas(e){let{amount:t,address:a,erc20L1Address:s,l1Provider:r,l2Provider:n}=e,i=await ev.Erc20Bridger.fromProvider(n);if(await allowanceIsInsufficient(e))return console.warn('Gateway allowance for "'.concat(s,'" is too low, falling back to hardcoded values.')),fetchFallbackGasEstimates({inboxAddress:i.l2Network.ethBridge.inbox,l1Provider:r});let{txRequest:o,retryableData:l}=await i.getDepositRequest({amount:t,erc20L1Address:s,l1Provider:r,l2Provider:n,from:a,retryableGasOverrides:{gasLimit:{percentIncrease:eN.O$.from(30)}}});return{estimatedL1Gas:await r.estimateGas(o),estimatedL2Gas:l.gasLimit,estimatedL2SubmissionCost:l.maxSubmissionCost}}async function fetchFallbackGasEstimatesForOrbitChainWithCustomFeeToken(){return{estimatedL1Gas:eN.O$.from(1e5),estimatedL2Gas:eN.O$.from(0),estimatedL2SubmissionCost:eN.O$.from(0)}}async function customFeeTokenAllowanceIsInsufficient(e){let{amount:t,address:a,l1Provider:s,l2Provider:r}=e,n=await (0,ev.getChain)(r);if(void 0===n.nativeToken)throw Error("[customFeeTokenAllowanceIsInsufficient] expected nativeToken to be defined");let i=await fetchErc20Allowance({address:n.nativeToken,provider:s,owner:a,spender:n.ethBridge.inbox});return i.lt(t)}async function depositEthEstimateGas(e){let{amount:t,address:a,l1Provider:s,l2Provider:r}=e,n=await ev.EthBridger.fromProvider(r),i=void 0!==n.nativeToken;if(i&&await customFeeTokenAllowanceIsInsufficient(e))return fetchFallbackGasEstimatesForOrbitChainWithCustomFeeToken();let o=await n.getDepositRequest({amount:t,from:a}),l=await s.estimateGas(o.txRequest);return{estimatedL1Gas:l,estimatedL2Gas:eD._Y,estimatedL2SubmissionCost:eD._Y}}var tX=a(34407),tV=a(69328);async function withdrawTokenEstimateGas(e){let{amount:t,address:a,erc20L1Address:s,l2Provider:r}=e,n=await ev.Erc20Bridger.fromProvider(r),i=await n.getWithdrawalRequest({amount:t,destinationAddress:a,erc20l1Address:s,from:a}),o=tX.NodeInterface__factory.connect(tV.NODE_INTERFACE_ADDRESS,r);try{let e=await o.callStatic.gasEstimateComponents(a,!1,i.txRequest.data),t=eN.O$.from(e.gasEstimateForL1),s=eN.O$.from(Math.ceil(1.3*Number(e.gasEstimate))),r=s.sub(t);return{estimatedL1Gas:t,estimatedL2Gas:r}}catch(e){return ei.Tb(e),{estimatedL1Gas:eN.O$.from(498e3),estimatedL2Gas:eN.O$.from(15e4)}}}async function withdrawEthEstimateGas(e){let{amount:t,address:a,l2Provider:s}=e,r=await ev.EthBridger.fromProvider(s),n=await r.getWithdrawalRequest({amount:t,destinationAddress:a,from:a}),i=tX.NodeInterface__factory.connect(tV.NODE_INTERFACE_ADDRESS,s);try{let e=await i.callStatic.gasEstimateComponents(a,!1,n.txRequest.data),t=eN.O$.from(e.gasEstimateForL1),s=eN.O$.from(Math.ceil(1.3*Number(e.gasEstimate))),r=s.sub(t);return{estimatedL1Gas:t,estimatedL2Gas:r}}catch(a){ei.Tb(a);let e=eN.O$.from(13e4),t=await s.estimateGas(n.txRequest).catch(e=>(ei.Tb(e),eN.O$.from(43e5)));return{estimatedL1Gas:e,estimatedL2Gas:t.sub(e)}}}let depositGasFeeTooltip=e=>{let{l1NetworkName:t,l2NetworkName:a,depositToOrbit:s=!1}=e;return{L1:"".concat(t," fees go to Ethereum Validators."),L2:"".concat(s?t:a," fees are collected by the chain to cover costs of execution. This is an estimated fee, if the true fee is lower, you'll be refunded."),Orbit:"".concat(a," fees are collected by the chain to cover costs of execution. This is an estimated fee, if the true fee is lower, you'll be refunded.")}};function TransferPanelSummaryContainer(e){let{children:t,className:a=""}=e;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"block lg:hidden",children:[(0,z.jsx)("span",{className:"text-xl text-gray-dark lg:text-2xl",children:"Summary"}),(0,z.jsx)("div",{className:"h-4"})]}),(0,z.jsx)("div",{className:"flex flex-col space-y-4 text-lg lg:min-h-[257px] ".concat(a),children:t}),(0,z.jsx)("div",{className:"h-10"})]})}function TransferPanelSummary(e){let{amount:t,token:a,gasSummary:s}=e,{status:r,estimatedL1GasFees:n,estimatedL2GasFees:i}=s,{app:{isDepositMode:o}}=tt(),{ethToUSD:l}=useETHPrice(),{l1:d,l2:c}=useNetworksAndSigners(),{parentLayer:u,layer:m}=useChainLayers(),p=useNativeCurrency({provider:c.provider}),h=useNativeCurrency({provider:d.provider}),layerGasFeeTooltipContent=e=>{if(!o)return null;let{isOrbitChain:t}=(0,eU.CR)(c.network.id);return depositGasFeeTooltip({l1NetworkName:(0,eU.pp)(d.network.id),l2NetworkName:(0,eU.pp)(c.network.id),depositToOrbit:t})[e]},x=null===a&&!p.isCustom,f=x&&!(0,eU.CR)(d.network.id).isTestnet,g=!p.isCustom&&o,b=(0,Y.useMemo)(()=>a?sanitizeTokenSymbol(a.symbol,{erc20L1Address:a.address,chain:o?d.network:c.network}):p.symbol,[a,p,o,d.network,c.network]),w=(0,Y.useMemo)(()=>p.isCustom===h.isCustom,[p,h]),y=(0,Y.useMemo)(()=>n+i,[n,i]);if("loading"===r){let e=o?"bg-ocl-blue":"bg-eth-dark";return(0,z.jsxs)(TransferPanelSummaryContainer,{className:"animate-pulse",children:[(0,z.jsx)("div",{className:"h-[28px] w-full opacity-10 ".concat(e)}),(0,z.jsx)("div",{className:"h-[28px] w-full opacity-10 lg:h-[56px] ".concat(e)}),(0,z.jsxs)("div",{className:"flex flex-col space-y-2 pl-4",children:[(0,z.jsx)("div",{className:"h-[28px] w-full opacity-10 ".concat(e)}),(0,z.jsx)("div",{className:"h-[28px] w-full opacity-10 ".concat(e)})]}),x&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"h-2"}),(0,z.jsx)("div",{className:"lg:border-b lg:border-gray-2"}),(0,z.jsx)("div",{className:"h-2"})]}),(0,z.jsx)("div",{className:"h-[28px] w-full opacity-10 ".concat(e)})]})]})}return"unavailable"===r?(0,z.jsxs)(TransferPanelSummaryContainer,{children:[(0,z.jsx)("div",{className:"flex flex-row justify-between text-sm text-gray-dark lg:text-base",children:"Gas estimates are not available for this action."}),(0,z.jsxs)("div",{className:"flex flex-row justify-between text-sm text-gray-dark lg:text-base",children:[(0,z.jsx)("span",{className:"w-2/5 font-light",children:"You're moving"}),(0,z.jsx)("div",{className:"flex w-3/5 flex-row justify-between",children:(0,z.jsx)("span",{children:formatAmount(t,{symbol:b})})})]})]}):(0,z.jsxs)(TransferPanelSummaryContainer,{children:[(0,z.jsxs)("div",{className:"flex flex-row justify-between text-sm text-gray-dark lg:text-base",children:[(0,z.jsx)("span",{className:"w-3/5 font-light",children:"You're moving"}),(0,z.jsxs)("div",{className:"flex w-2/5 flex-row justify-between tabular-nums",children:[(0,z.jsx)("span",{children:formatAmount(t,{symbol:b})}),f&&(0,z.jsx)("span",{className:"font-medium text-dark",children:formatUSD(l(t))})]})]}),(0,z.jsxs)("div",{className:"flex flex-row items-center justify-between text-sm text-gray-dark lg:text-base",children:[(0,z.jsx)("span",{className:"w-3/5 font-light",children:"You'll now pay in gas fees"}),(0,z.jsx)("div",{className:"flex w-2/5 justify-between tabular-nums",children:w?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{children:formatAmount(y,{symbol:p.symbol})}),f&&(0,z.jsx)("span",{className:"font-medium text-dark",children:formatUSD(l(y))})]}):(0,z.jsxs)("span",{children:[formatAmount(n,{symbol:h.symbol})," + ",formatAmount(i,{symbol:p.symbol})]})})]}),g&&(0,z.jsxs)("div",{className:"flex flex-col space-y-2 text-sm text-gray-dark lg:text-base",children:[(0,z.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,z.jsxs)("div",{className:"flex flex-row items-center space-x-2",children:[(0,z.jsxs)("span",{className:"pl-4 font-light",children:[u," gas"]}),(0,z.jsx)(Tooltip,{content:layerGasFeeTooltipContent(u),children:(0,z.jsx)(tp.Z,{className:"h-4 w-4"})})]}),(0,z.jsxs)("div",{className:"flex w-2/5 flex-row justify-between tabular-nums",children:[(0,z.jsx)("span",{className:"font-light",children:formatAmount(n,{symbol:h.symbol})}),f&&(0,z.jsx)("span",{className:"font-light",children:formatUSD(l(n))})]})]}),(0,z.jsxs)("div",{className:"flex flex-row justify-between text-gray-dark",children:[(0,z.jsxs)("div",{className:"flex flex-row items-center space-x-2",children:[(0,z.jsxs)("span",{className:"pl-4 font-light ",children:[m," gas"]}),(0,z.jsx)(Tooltip,{content:layerGasFeeTooltipContent(m),children:(0,z.jsx)(tp.Z,{className:"h-4 w-4 "})})]}),(0,z.jsxs)("div",{className:"flex w-2/5 flex-row justify-between tabular-nums",children:[(0,z.jsx)("span",{className:"font-light",children:formatAmount(i,{symbol:p.symbol})}),f&&(0,z.jsx)("span",{className:"font-light",children:formatUSD(l(i))})]})]})]}),!o&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{children:[(0,z.jsx)("div",{className:"h-2"}),(0,z.jsx)("div",{className:"border-b border-gray-5"}),(0,z.jsx)("div",{className:"h-2"})]}),(0,z.jsxs)("div",{className:"flex flex-col gap-3 text-sm font-light text-gray-dark lg:text-base",children:[(0,z.jsxs)("p",{children:["This transaction will initiate the withdrawal on ",c.network.name,"."]}),(0,z.jsxs)("p",{children:["When the withdrawal is ready for claiming on ",d.network.name,", you will have to pay gas fees for the claim transaction."]})]})]})]})}var tK=a(58131),tq=a(88164),tJ=a(58194),tQ=a(40624),t$=a(89456),t0=a(95415),t2=a(87070);async function addressIsSmartContract(e,t){try{return(await t.getCode(e)).length>2}catch(e){return!1}}async function addressIsDenylisted(e){try{let t=await fetch("".concat((0,et.DZ)(),"/api/denylist?address=").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});return(await t.json()).data}catch(e){return console.error(e),!1}}function useAccountType(){let{address:e}=(0,X.mA)(),t=(0,X.yL)(),{data:a=!1,isLoading:s}=(0,e6.Z)(e?[e,t,"useAccountType"]:null,e=>{let[t,a]=e;return addressIsSmartContract(t,a)});return{isEOA:!a,isSmartContractWallet:a,isLoading:s}}(p=O||(O={})).INVALID_ADDRESS="The destination address is not a valid address.",p.REQUIRED_ADDRESS="The destination address is required.",p.DENYLISTED_ADDRESS="The address you entered is a known contract address, and sending funds to it would likely result in losing said funds. If you think this is a mistake, please contact our support.",(_||(_={})).CONTRACT_ADDRESS="The destination address is a contract address. Please make sure it is the right address.";let t1=(0,tQ.Ue)(e=>({error:null,destinationAddress:void 0,setError:t=>e(()=>({error:t})),setDestinationAddress:t=>e(()=>({destinationAddress:t}))}));async function getDestinationAddressError(e){let{destinationAddress:t,isSmartContractWallet:a}=e;return!t&&a?"The destination address is required.":t?(0,tu.isAddress)(t)?await addressIsDenylisted(t)?"The address you entered is a known contract address, and sending funds to it would likely result in losing said funds. If you think this is a mistake, please contact our support.":null:"The destination address is not a valid address.":null}async function getDestinationAddressWarning(e){let{destinationAddress:t,isEOA:a,destinationProvider:s}=e;if(!t||!(0,tu.isAddress)(t))return null;let r=await addressIsSmartContract(t,s);return a&&r?"The destination address is a contract address. Please make sure it is the right address.":null}let AdvancedSettings=()=>{let{app:{selectedToken:e,isDepositMode:t}}=tt(),{l1:a,l2:s}=useNetworksAndSigners(),{address:r}=(0,X.mA)(),{isEOA:n,isSmartContractWallet:i}=useAccountType(),[o,l]=(0,Y.useState)(!0),[d,c]=(0,Y.useState)(!0),[u,m]=(0,Y.useState)(null),{error:p,setError:h,destinationAddress:x,setDestinationAddress:f}=t1();(0,Y.useEffect)(()=>{l(n),c(n)},[n]),(0,Y.useEffect)(()=>{(async function(){h(await getDestinationAddressError({destinationAddress:x,isSmartContractWallet:i}))})()},[x,i,h]),(0,Y.useEffect)(()=>{let e=!0;return async function(){let r=await getDestinationAddressWarning({destinationAddress:x,isEOA:n,destinationProvider:(t?s:a).provider});e&&m(r)}(),()=>{e=!1}},[x,t,n,s,a]);let g=(0,Y.useMemo)(()=>n&&!x,[x,n]);return e&&(n||i)?(0,z.jsxs)("div",{className:"mt-6",children:[(0,z.jsxs)("button",{onClick:function(){if(!g){l(!1);return}l(!o)},className:(0,eo.m6)("arb-hover flex flex-row items-center text-gray-dark",g?"":"pointer-events-none"),children:[(0,z.jsx)("span",{className:"font-medium",children:"Advanced Settings"}),g&&(0,z.jsx)(tK.Z,{className:(0,eo.m6)("ml-1 h-4 w-4",o?"":"rotate-180")})]}),!o&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"mt-2",children:[(0,z.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,z.jsx)("span",{className:"font-medium",children:"Custom Destination Address"}),(0,z.jsx)(Tooltip,{content:(0,z.jsxs)("span",{children:["This is where your funds will end up at.",n?" Defaults to your wallet address.":""]}),children:(0,z.jsx)(tp.Z,{strokeWidth:2,height:16})})]}),(0,z.jsx)("p",{className:"my-2 text-sm font-light text-gray-dark",children:n?(0,z.jsxs)(z.Fragment,{children:["Send your funds to a different address."," ",(0,z.jsx)("span",{className:"font-semibold",children:"This is not standard."})," ","Be sure you mean to send it here, or it may lead to an irrecoverable loss of funds."]}):(0,z.jsxs)(z.Fragment,{children:["With Smart Contract Wallets, you"," ",(0,z.jsx)("span",{className:"font-semibold",children:"must specify an address"})," ","you'd like the funds sent to."]})}),(0,z.jsxs)("div",{className:(0,eo.m6)("my-1 flex w-full items-center rounded-lg border border-gray-dark px-2 py-1 shadow-input",d?"bg-slate-200":"bg-white",p?"border-red-400":"",u&&!p?"border-yellow-500":""),children:[(0,z.jsx)("input",{className:"w-full",placeholder:n?r:"Enter Custom Destination Address",value:x,disabled:d,spellCheck:!1,onChange:e=>{var t;return f(null===(t=e.target.value)||void 0===t?void 0:t.toLowerCase().trim())}}),n&&(0,z.jsx)("button",{onClick:()=>c(!d),children:d?(0,z.jsx)(t0.Z,{height:20,className:"mr-2 text-slate-600"}):(0,z.jsx)(t2.Z,{height:20,className:"mr-2 text-slate-600"})})]})]}),p&&(0,z.jsx)("p",{className:"text-xs text-red-400",children:p}),!p&&u&&(0,z.jsx)("p",{className:"text-xs text-yellow-500",children:u}),x&&!p&&(0,z.jsxs)(ed.d,{className:"arb-hover mt-2 flex w-fit items-center text-xs font-bold text-gray-dark",href:"".concat((0,eU.jY)((t?s:a).network.id),"/address/").concat(x),children:[(0,z.jsx)(t$.Z,{height:12,strokeWidth:3,className:"mr-1 -rotate-90"}),"View account in explorer"]})]})]}):null};var t3=a(43913),t4=a(20247),t6=a(92056),t5=a(3851),t8=a(6917),t9=a(85126);let t7={blue:"bg-cyan text-cyan-dark",yellow:"bg-orange text-orange-dark border-orange-dark border",green:"bg-lime text-lime-dark",red:"bg-brick text-brick-dark border border-brick-dark",gray:"bg-gray-3 text-gray-dark"};function StatusBadge(e){let{variant:t="blue",children:a,...s}=e;return(0,z.jsx)("div",{className:"status-badge w-max rounded-full px-3 py-1 text-sm ".concat(t7[t]," flex flex-nowrap items-center gap-1"),...s,children:a})}function tokenListIdsToNames(e){return e.map(e=>tT[e]).join(", ")}function TokenLogoFallback(){return(0,z.jsx)("div",{className:"flex h-8 w-8 min-w-[2rem] items-center justify-center rounded-full bg-ocl-blue text-sm font-medium text-white",children:"?"})}function BlockExplorerTokenLink(e){let{chain:t,address:a}=e;return void 0===a?null:(0,z.jsx)(ed.d,{href:"".concat((0,eU.jY)(t.id),"/token/").concat(a),className:"text-xs text-blue-link underline",onClick:e=>e.stopPropagation(),children:shortenAddress(a).toLowerCase()})}function TokenRow(e){let{style:t,onClick:a,token:s}=e,{address:r}=(0,X.mA)(),{app:{arbTokenBridge:{bridgeTokens:n},isDepositMode:i}}=tt(),{isLoading:o}=useAccountType(),{l1:{network:l,provider:d},l2:{network:c,provider:u}}=useNetworksAndSigners(),m=(0,t8.Z)("(max-width: 419px)"),p=useNativeCurrency({provider:u}),h=(0,Y.useMemo)(()=>s?function(e,t){if(!t.erc20L1Address)return e;let{isArbitrumOne:a,isArbitrumGoerli:s}=(0,eU.CR)(t.chain.id);return isTokenMainnetUSDC(t.erc20L1Address)||isTokenGoerliUSDC(t.erc20L1Address)?a||s?"Bridged USDC":"USD Coin":e}(s.name,{erc20L1Address:s.address,chain:i?l:c}):p.name,[s,p,i,c,l]),x=(0,Y.useMemo)(()=>s?sanitizeTokenSymbol(s.symbol,{erc20L1Address:s.address,chain:i?l:c}):p.symbol,[s,p,i,c,l]),f=(0,Y.useMemo)(()=>{var e;return null!==(e=null==s?void 0:s.isL2Native)&&void 0!==e&&e},[s]),g=(0,Y.useMemo)(()=>isTokenArbitrumOneNativeUSDC(null==s?void 0:s.address),[s]),b=(0,Y.useMemo)(()=>isTokenArbitrumGoerliNativeUSDC(null==s?void 0:s.address),[s]),{eth:[w],erc20:[y]}=useBalance({provider:d,walletAddress:r}),{eth:[C],erc20:[v]}=useBalance({provider:u,walletAddress:r}),A=(0,Y.useMemo)(()=>s?s.logoURI:p.logoUrl,[s,p]),T=(0,Y.useMemo)(()=>{var e;return s?i?null==y?void 0:y[s.address.toLowerCase()]:s.l2Address&&null!==(e=null==v?void 0:v[s.l2Address.toLowerCase()])&&void 0!==e?e:eD._Y:p.isCustom?i?null==y?void 0:y[p.address]:C:i?w:C},[w,C,s,p,i,y,v]),k=(0,Y.useMemo)(()=>!!s&&s.listIds.has(0),[s]),N=(0,Y.useMemo)(()=>!!s&&!k&&(s.name.toLowerCase().startsWith("arb")||s.symbol.toLowerCase().startsWith("arb")),[s,k]),j=(0,Y.useMemo)(()=>{if(!s)return null;if(g)return"Native USDC on Arbitrum One";if(b)return"Native USDC on Arbitrum Goerli";let e=s.listIds,t=e.size;if(0===t)return"Added by User";let a=Array.from(e);if(t<2)return tokenListIdsToNames(a);let r=a.slice(0,1),n=t-1;return tokenListIdsToNames(r)+" and ".concat(n," more list").concat(n>1?"s":"")},[s,b,g]),S=(0,Y.useMemo)(()=>void 0===n||!s||!!g||!!b||void 0!==n[s.address],[n,s,g,b]),D=(0,Y.useMemo)(()=>!s||void 0!==s.l2Address,[s]),E=(0,Y.useMemo)(()=>!f&&(!!i||D),[i,D,f]),L=null===s&&p.isCustom,I=(0,Y.useMemo)(()=>{let e=(0,eU.pp)(i?l.id:c.id);return(0,z.jsxs)("span",{children:["This is the official Arbitrum token on ",e,". Please beware of fake tokens trying to impersonate it."]})},[i,l,c]),R=(0,Y.useMemo)(()=>S?o&&(b||g)?(0,z.jsx)("div",{className:"mr-2",children:(0,z.jsx)(ea.a,{color:"#28A0F0",size:"small"})}):(0,z.jsx)("span",{className:"flex items-center whitespace-nowrap text-sm text-gray-500",children:T?formatAmount(T,{decimals:null==s?void 0:s.decimals,symbol:x}):(0,z.jsx)("div",{className:"mr-2",children:(0,z.jsx)(ea.a,{color:"#28A0F0",size:"small"})})}):(0,z.jsx)("span",{className:"text-sm font-medium text-blue-link",children:"Import"}),[o,null==s?void 0:s.decimals,T,S,b,g,x]);return(0,z.jsx)("button",{type:"button",onClick:a,style:{...t,minHeight:"84px"},disabled:!E,className:(0,eo.m6)("flex w-full flex-row items-center justify-between bg-white px-4 py-3 hover:bg-gray-100",E?"cursor-pointer opacity-100":"cursor-not-allowed opacity-50"),children:(0,z.jsxs)("div",{className:"flex w-full flex-row items-center justify-start space-x-4",children:[(0,z.jsx)(SafeImage,{src:A,alt:"".concat(h," logo"),className:"h-8 w-8 grow-0 rounded-full",fallback:(0,z.jsx)(TokenLogoFallback,{})}),(0,z.jsxs)("div",{className:"flex w-full flex-col items-start truncate",children:[(0,z.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,z.jsx)("span",{className:"text-base font-medium text-gray-900",children:x}),(0,z.jsx)("span",{className:"text-xs text-gray-500",children:h}),k&&(0,z.jsx)(Tooltip,{content:I,children:(0,z.jsxs)(StatusBadge,{variant:"green",children:[(0,z.jsx)(t9.Z,{className:"h-4 w-4"}),(0,z.jsxs)("span",{className:"text-xs",children:["Official",m?"":" ARB token"]})]})}),!s&&(0,z.jsx)("div",{className:"flex w-full justify-end",children:R}),N&&(0,z.jsx)(Tooltip,{content:"This token is different from the official Arbitrum token (ARB).",children:(0,z.jsxs)("div",{className:"box-border flex w-max flex-nowrap items-center gap-1 rounded-full border-[1px] border-gray-dark px-1 py-[2px] pr-2 text-sm",children:[(0,z.jsx)(eh.Z,{className:"h-4 w-4 text-gray-dark"}),(0,z.jsx)("span",{className:"text-xs text-gray-dark",children:"Careful"})]})})]}),s&&(0,z.jsxs)("div",{className:"flex w-full flex-col items-start space-y-1",children:[(0,z.jsxs)("div",{className:"flex w-full justify-between",children:[i?(0,z.jsx)(z.Fragment,{children:f?(0,z.jsx)(BlockExplorerTokenLink,{chain:c,address:s.address}):(0,z.jsx)(BlockExplorerTokenLink,{chain:l,address:s.address})}):(0,z.jsx)(z.Fragment,{children:D?(0,z.jsx)(BlockExplorerTokenLink,{chain:c,address:s.l2Address}):(0,z.jsxs)("span",{className:"text-xs text-gray-900",children:["This token hasn't been bridged to"," ",(0,eU.pp)(c.id),"."]})}),E&&R]}),f?(0,z.jsx)("span",{className:"flex gap-1 text-xs font-normal",children:"This token is native to ".concat((0,eU.pp)(c.id)," and cant be bridged.")}):(0,z.jsx)("span",{className:"flex gap-1 whitespace-normal text-left text-xs font-normal text-gray-500",children:j})]}),L&&(0,z.jsx)("div",{className:"flex w-full flex-col items-start space-y-1",children:(0,z.jsx)("div",{className:"flex w-full justify-between",children:i&&(0,z.jsx)(BlockExplorerTokenLink,{chain:l,address:p.address})})})]})]})})}(h=B||(B={}))[h.TOKENS=0]="TOKENS",h[h.LISTS=1]="LISTS";let ae={...e_,listIds:new Set,type:C.ERC20,address:eM.ArbitrumOne.USDC,l2Address:eM.ArbitrumOne.USDC},at={...e_,listIds:new Set,type:C.ERC20,address:eM.ArbitrumGoerli.USDC,l2Address:eM.ArbitrumGoerli.USDC};function TokenListsPanel(){let{app:{arbTokenBridge:e}}=tt(),{l2:{network:t}}=useNetworksAndSigners(),{bridgeTokens:a,token:s}=e,r=(0,Y.useMemo)(()=>void 0===t?[]:tA.filter(e=>!e.isArbitrumTokenTokenList&&e.originChainID===t.id),[t]),toggleTokenList=(t,a)=>{a?s.removeTokensFromList(t.id):addBridgeTokenListToBridge(t,e)};return void 0===a?null:(0,z.jsx)("div",{className:"flex flex-col gap-6 rounded-md border border-gray-300 p-6",children:r.map(e=>{let t=Object.keys(a).some(t=>{let s=a[t];return null==s?void 0:s.listIds.has(null==e?void 0:e.id)});return(0,z.jsxs)("label",{className:"flex items-center justify-start space-x-3",children:[(0,z.jsxs)("div",{className:"switch",children:[(0,z.jsx)("input",{type:"checkbox",checked:t,onChange:()=>toggleTokenList(e,t)}),(0,z.jsx)("span",{className:"slider round"})]}),(0,z.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,z.jsx)(en(),{src:e.logoURI,alt:"".concat(e.name," Logo"),className:"h-6 w-6 rounded-full",width:24,height:24}),(0,z.jsx)("span",{className:"text-sm text-gray-900",children:e.name})]})]},e.id)})})}let aa="native_currency";function TokensPanel(e){let{onTokenSelected:t}=e,{address:a}=(0,X.mA)(),{app:{arbTokenBridge:{token:s,bridgeTokens:r},isDepositMode:n}}=tt(),{l1:{provider:i},l2:{provider:o,network:l}}=useNetworksAndSigners(),{parentLayer:d,layer:c}=useChainLayers(),u=(0,t8.Z)("(min-width: 1024px)"),{eth:[m],erc20:[p]}=useBalance({provider:i,walletAddress:a}),{eth:[h],erc20:[x]}=useBalance({provider:o,walletAddress:a}),f=useNativeCurrency({provider:o}),{isArbitrumOne:g,isArbitrumGoerli:b}=(0,eU.CR)(l.id),w=useTokensFromUser(),y=useTokensFromLists(),[C,v]=(0,Y.useState)(""),[A,T]=(0,Y.useState)(""),[k,N]=(0,Y.useState)(!1),j=u?5:3.5,S=(0,Y.useCallback)(e=>{var t;if(e===aa)return f.isCustom?n?null==p?void 0:p[f.address]:h:n?m:h;if(n)return null==p?void 0:p[e.toLowerCase()];if(void 0===r)return null;if(isTokenArbitrumOneNativeUSDC(e)||isTokenArbitrumGoerliNativeUSDC(e))return null==x?void 0:x[e.toLowerCase()];let a=null===(t=r[e.toLowerCase()])||void 0===t?void 0:t.l2Address;return a?null==x?void 0:x[a.toLowerCase()]:null},[f,r,p,x,m,h,n]),D=(0,Y.useMemo)(()=>{let e=C.trim().toLowerCase(),t=[...Object.keys(w),...Object.keys(y)];!n&&(g&&t.push(eM.ArbitrumOne.USDC),b&&t.push(eM.ArbitrumGoerli.USDC));let a=[aa,...new Set(t)];return a.filter(t=>{let a=w[t]||y[t];if(isTokenArbitrumOneNativeUSDC(t)&&(a=ae),isTokenArbitrumGoerliNativeUSDC(t)&&(a=at),f.isCustom&&t!==aa)return t.toLowerCase()!==f.address;if(!e){if(t===aa||(null==a?void 0:a.listIds.has(0)))return!0;let e=S(t);return e&&e.gt(0)}if(t===aa)return"".concat(f.name).concat(f.symbol).toLowerCase().includes(e);if(!a)return!1;let{name:s,symbol:r,address:n,l2Address:i=""}=a;return(s+r+n+i).toLowerCase().includes(e)}).sort((e,t)=>{if(e===aa)return -1;if(t===aa)return 1;let a=S(e),s=S(t);return a||s?a?s?a.gt(s)?-1:1:-1:1:0})},[C,w,y,n,g,b,S,f]),storeNewToken=async()=>{if(!a)return;let e="Token not found on this network.",t=!1;try{s.addL2NativeToken(C),t=!0}catch(e){}try{await s.add(C),t=!0}catch(t){"TokenDisabledError"===t.name&&(e="This token is currently paused in the bridge.")}t||T(e)},addNewToken=async e=>{if(e.preventDefault(),T(""),(0,tu.isAddress)(C)&&!k){N(!0);try{await storeNewToken()}catch(e){console.log(e)}finally{N(!1)}}};return(0,z.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,z.jsxs)("form",{onSubmit:addNewToken,className:"flex flex-col",children:[(0,z.jsxs)("div",{className:"flex items-stretch gap-2",children:[(0,z.jsxs)("div",{className:"relative flex h-full w-full grow items-center rounded-lg border-[1px] border-gray-dark bg-white px-2 text-gray-dark shadow-input",children:[(0,z.jsx)(t6.Z,{className:"h-4 w-4 shrink-0 text-dark"}),(0,z.jsx)("input",{id:"newTokenAddress",value:C,onChange:e=>{T(""),v(e.target.value)},placeholder:"Search by token name, symbol, ".concat(d," or ").concat(c," address"),className:"h-full w-full p-2 text-sm font-light text-dark placeholder:text-xs placeholder:text-gray-dark"})]}),(0,z.jsx)(el,{type:"submit",variant:"secondary",loading:k,loadingProps:{loaderColor:"#999999"},disabled:""===C||!(0,tu.isAddress)(C),className:"border border-dark py-1 disabled:border disabled:border-current disabled:bg-white disabled:text-gray-4","aria-label":"Add New Token",children:"Add"})]}),A&&(0,z.jsx)("p",{className:"text-xs text-red-400",children:A})]}),(0,z.jsx)("div",{className:"flex flex-grow flex-col overflow-auto rounded-md border border-gray-2 lg:shadow-[0px_4px_10px_rgba(120,120,120,0.25)]","data-cy":"tokenSearchList",children:(0,z.jsx)(t4.qj,{disableHeight:!0,children:e=>{let{width:a}=e;return(0,z.jsx)(t4.aV,{width:a-2,height:84*j,rowCount:D.length,rowHeight:84,rowRenderer:e=>{let a=D[e.index];if(a===aa)return(0,z.jsx)(TokenRow,{onClick:()=>t(null),token:null},"TokenRowNativeCurrency");let s=null;return isTokenArbitrumOneNativeUSDC(a)?s=ae:isTokenArbitrumGoerliNativeUSDC(a)?s=at:a&&(s=y[a]||w[a]||null),(0,z.jsx)(TokenRow,{style:e.style,onClick:()=>t(s),token:s},a)}})}})})]})}function TokenSearch(e){let{close:t,onImportToken:a}=e,{address:s}=(0,X.mA)(),{app:{arbTokenBridge:{token:r,bridgeTokens:n}}}=tt(),{app:{setSelectedToken:i}}=ta(),{l1:o,l2:l}=useNetworksAndSigners(),{updateUSDCBalances:d}=useUpdateUSDCBalances({walletAddress:s}),{isLoading:c}=useAccountType(),{isValidating:u}=useTokenLists(l.network.id),[m,p]=(0,Y.useState)(0);async function selectToken(e){if(t(),null===e){i(null);return}if(e.address&&void 0!==n)try{let t=isTokenArbitrumOneNativeUSDC(e.address)||isTokenArbitrumGoerliNativeUSDC(e.address);if(t){if(c)return;d(e.address),i({name:"USD Coin",type:C.ERC20,symbol:"USDC",address:e.address,decimals:6,listIds:new Set});return}if(void 0===n[e.address]){a(e.address);return}if(!s)return;let l=await fetchErc20Data({address:e.address,provider:o.provider});l&&(r.updateTokenData(e.address),i({...erc20DataToErc20BridgeToken(l),l2Address:e.l2Address}))}catch(e){console.warn(e),"TokenDisabledError"===e.name&&(0,ep.Iv)("This token is currently paused in the bridge")}}return 0===m?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"flex flex-row items-center justify-between pb-4",children:[(0,z.jsx)("span",{className:"text-xl font-medium",children:"Select Token"}),(0,z.jsx)("button",{className:"arb-hover",onClick:t,children:(0,z.jsx)(eu.Z,{className:"h-6 w-6 text-gray-5"})})]}),(0,z.jsx)(TokensPanel,{onTokenSelected:selectToken}),(0,z.jsx)("div",{className:"flex justify-end pt-6",children:u?(0,z.jsxs)("span",{className:"flex flex-row items-center gap-2 text-sm font-normal text-gray-6",children:[(0,z.jsx)(ea.a,{color:"#28A0F0",size:"small"}),"Fetching Tokens..."]}):(0,z.jsx)("button",{className:"arb-hover text-gray text-sm font-medium text-blue-link",onClick:()=>p(1),children:"Manage token lists"})})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:"flex flex-row items-center justify-between pb-4",children:[(0,z.jsx)("span",{className:"text-xl font-medium",children:"Token Lists"}),(0,z.jsx)("button",{className:"arb-hover",onClick:t,children:(0,z.jsx)(eu.Z,{className:"h-6 w-6 text-gray-5"})})]}),(0,z.jsx)("div",{className:"flex justify-start pb-6",children:(0,z.jsxs)("button",{className:"arb-hover flex items-center space-x-2 text-sm font-medium text-blue-link",onClick:()=>p(0),children:[(0,z.jsx)(t5.Z,{className:"h-6 w-6"}),(0,z.jsx)("span",{children:"Back to Select Token"})]})}),(0,z.jsx)(TokenListsPanel,{})]})}function TokenButton(){let{app:{isDepositMode:e,selectedToken:t,arbTokenBridge:{bridgeTokens:a},arbTokenBridgeLoaded:s}}=tt(),{status:r,l1:n,l2:i}=useNetworksAndSigners(),[o,l]=(0,Y.useState)(),[d,c]=useDialog(),u=useNativeCurrency({provider:i.provider}),m=(0,Y.useMemo)(()=>{var e;let n=null==t?void 0:t.address;if(!n)return u.logoUrl;if(r!==N.CONNECTED||!s||void 0===a)return;let i=null===(e=a[n])||void 0===e?void 0:e.logoURI;if(i)return(0,et.Ou)(i)},[u,a,null==t?void 0:t.address,r,s]),p=(0,Y.useMemo)(()=>t?sanitizeTokenSymbol(t.symbol,{erc20L1Address:t.address,chain:e?n.network:i.network}):u.symbol,[t,u,e,i.network,n.network]);function importToken(e){l(e),c()}return(0,z.jsxs)(z.Fragment,{children:[void 0!==o&&(0,z.jsx)(TokenImportDialog,{...d,onClose:function(){l(void 0),d.onClose(!1)},tokenAddress:o}),(0,z.jsxs)(t3.J,{className:"h-full",children:[(0,z.jsx)(t3.J.Button,{className:"arb-hover h-full w-max rounded-bl-xl rounded-tl-xl bg-white px-3 hover:bg-gray-2","aria-label":"Select Token",children:(0,z.jsxs)("div",{className:"flex items-center space-x-2",children:[m&&(0,z.jsx)("img",{src:m,alt:"Token logo",className:"h-5 w-5 rounded-full sm:h-8 sm:w-8"}),(0,z.jsx)("span",{className:"text-xl font-light sm:text-3xl",children:p}),(0,z.jsx)(tK.Z,{className:"h-4 w-4 text-gray-6"})]})}),(0,z.jsx)(t3.J.Panel,{className:"absolute left-0 top-0 z-50 w-full rounded-lg bg-white px-6 py-4 shadow-[0px_4px_12px_#9e9e9e] lg:left-auto lg:top-auto lg:h-auto lg:w-[466px] lg:p-6",children:e=>{let{close:t}=e;return(0,z.jsx)(TokenSearch,{close:t,onImportToken:importToken})}})]})]})}function MaxButton(e){let{loading:t,className:a="",...s}=e;return t?(0,z.jsx)("div",{className:"px-3",children:(0,z.jsx)(ea.a,{color:"#999999",size:"small"})}):(0,z.jsx)("button",{type:"button",className:"p-2 text-sm font-light text-gray-dark ".concat(a),...s,children:"MAX"})}function TransferPanelMainInput(e){let{errorMessage:t,maxButtonProps:a,value:s,...r}=e,{visible:n,...i}=a;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("div",{className:(0,eo.m6)("flex h-12 flex-row items-center rounded-lg bg-white shadow-input lg:h-16",void 0!==t?"border border-[#cd0000]":"border border-gray-6"),children:[(0,z.jsx)(TokenButton,{}),(0,z.jsx)("div",{className:"h-full border-r border-gray-2"}),(0,z.jsxs)("div",{className:"flex h-full flex-grow flex-row items-center justify-center px-3",children:[(0,z.jsx)("input",{type:"text",inputMode:"decimal",placeholder:"Enter amount",className:"h-full w-full bg-transparent text-xl font-light placeholder:text-gray-dark sm:text-3xl",value:s,...r}),n&&(0,z.jsx)(MaxButton,{...i})]})]}),void 0!==t&&(0,z.jsx)("span",{className:"text-sm text-brick",children:t})]})}function useIsSwitchingL2Chain(){let{app:e}=tt(),{isDepositMode:t}=e,{l2:a}=useNetworksAndSigners(),s=useIsConnectedToArbitrum(),[{l2ChainId:r}]=useArbQueryParams();return(0,Y.useMemo)(()=>!(void 0===s||s||!t||!r||isNaN(r))&&a.network.id!==r,[s,t,a,r])}function isUserRejectedError(e){return(null==e?void 0:e.code)===4001||(null==e?void 0:e.code)==="ACTION_REJECTED"}let handleSwitchNetworkNotSupported=(e,t)=>{let a=(0,eU.CR)(e).isEthereumMainnetOrTestnet,s=(0,eU.pp)(e),r=t?"Please connect to ".concat(s," on your wallet before signing your ").concat(a?"deposit":"withdraw"," transaction."):"Please connect to ".concat(s," on your wallet.");(0,ep.Iv)(r)};function handleSwitchNetworkError(e,t){let{chainId:a}=t,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{isSwitchingNetworkBeforeTx:!1},{isSwitchingNetworkBeforeTx:r}=s;isUserRejectedError(e)||("SwitchChainNotSupportedError"===e.name?handleSwitchNetworkNotSupported(a,r):ei.Tb(e))}function useSwitchNetworkWithConfig(){let{isSwitchingNetworkBeforeTx:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,X.g0)({throwForSwitchChainNotSupported:!0,onMutate:()=>({isSwitchingNetworkBeforeTx:e}),onError:handleSwitchNetworkError})}var as=a(52621);function NetworkListbox(e){let{disabled:t=!1,label:a,options:s,value:r,onChange:n}=e,i=(0,Y.useMemo)(()=>{let{isArbitrum:e,isArbitrumNova:t,isOrbitChain:a,isXaiTestnet:s,isStylusTestnet:n,isInspace:i}=(0,eU.CR)(r.id);return s?"bg-xai-primary":i?"bg-eth-primary":n?"bg-stylus-primary":a?"bg-orbit-primary":e?t?"bg-arb-nova-primary":"bg-arb-one-primary":"bg-eth-primary"},[r]),o=(0,Y.useCallback)(e=>0===e?"rounded-tl-xl rounded-tr-xl":e===s.length-1?"rounded-bl-xl rounded-br-xl":"",[s.length]);return(0,z.jsxs)(as.R,{as:"div",className:"relative",disabled:t,value:r,onChange:n,children:[(0,z.jsxs)(as.R.Button,{className:"arb-hover flex w-max items-center space-x-1 rounded-full px-3 py-2 text-sm text-white md:text-2xl lg:px-4 lg:py-3 ".concat(i),children:[(0,z.jsxs)("span",{className:"max-w-[220px] truncate md:max-w-[250px]",children:[a," ",(0,eU.pp)(r.id)]}),!t&&(0,z.jsx)(tK.Z,{className:"h-4 w-4"})]}),(0,z.jsx)(ec.u,{as:Y.Fragment,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,z.jsx)(as.R.Options,{className:"absolute z-20 ml-2 mt-2 overflow-hidden rounded-xl bg-white shadow-[0px_4px_12px_#9e9e9e]",children:s.map((e,t)=>(0,z.jsxs)(as.R.Option,{value:e,className:(0,eo.m6)("ui-selected:bg-[rgba(0,0,0,0.2) flex h-12 min-w-max cursor-pointer select-none items-center space-x-2 px-4 py-7 hover:bg-[rgba(0,0,0,0.2)] ui-active:bg-[rgba(0,0,0,0.2)]",o(t)),children:[(0,z.jsx)("div",{className:"flex h-8 w-8 items-center justify-center",children:(0,z.jsx)(en(),{src:(0,eU.Kn)(e.id),alt:"".concat((0,eU.pp)(e.id)," logo"),className:"max-h-7 w-auto",width:36,height:36})}),(0,z.jsx)("span",{className:"max-w-[140px] truncate",children:(0,eU.pp)(e.id)})]},e.id))})})]})}function OneNovaTransferDialog(e){let{app:{selectedToken:t}}=tt(),{destinationChainId:a}=e;if(!a)return null;let s=a===eU.a_.ArbitrumNova?eU.a_.ArbitrumOne:eU.a_.ArbitrumNova,r=s===eU.a_.ArbitrumOne?"arbitrum":"nova",n=a===eU.a_.ArbitrumOne?"arbitrum":"nova",i="https://app.hop.exchange/#/send?sourceNetwork=".concat(r,"&destNetwork=").concat(n,"&token=").concat((null==t?void 0:t.symbol)||ex.Xx.symbol,"&amount=").concat(e.amount),o=[{name:I.Hop,imageSrc:tB,href:i}];return(0,z.jsx)(Dialog,{...e,isCustom:!0,children:(0,z.jsx)("div",{className:"flex flex-col md:min-w-[725px]",children:(0,z.jsxs)(tR.O.Group,{children:[(0,z.jsxs)("div",{className:"flex flex-row items-center justify-between bg-ocl-blue px-8 py-4",children:[(0,z.jsxs)(es.V.Title,{className:"text-2xl font-medium text-white",children:["Move funds from ",(0,eU.pp)(s)," to"," ",(0,eU.pp)(a)]}),(0,z.jsx)("button",{className:"arb-hover",onClick:()=>{e.onClose(!1)},children:(0,z.jsx)(eu.Z,{className:"h-6 w-6 text-white"})})]}),(0,z.jsx)(tR.O.List,{className:"bg-ocl-blue",children:(0,z.jsx)(tM,{children:"Use a third-party bridge"})}),(0,z.jsxs)(tR.O.Panel,{className:"flex flex-col space-y-3 px-8 py-4",children:[(0,z.jsx)("div",{className:"flex flex-col space-y-3",children:(0,z.jsx)("p",{className:"font-light",children:"Use a third party bridge to transfer funds between Arbitrum One and Arbitrum Nova."})}),(0,z.jsx)(BridgesTable,{bridgeList:o}),(0,z.jsx)("div",{className:"mt-2 flex flex-row justify-end space-x-2",children:(0,z.jsx)(el,{variant:"secondary",onClick:()=>e.onClose(!1),children:"Cancel"})})]})]})})})}function getInsufficientFundsErrorMessage(e){let{asset:t,chain:a}=e;return"Insufficient ".concat(t,". Please add more funds to ").concat(a,".")}function getInsufficientFundsForGasFeesErrorMessage(e){let{asset:t,chain:a}=e;return"Insufficient ".concat(t," to pay for gas fees. Please add more funds to ").concat(a,".")}function SwitchNetworksButton(e){let{isEOA:t,isSmartContractWallet:a,isLoading:s}=useAccountType();return(0,z.jsx)("button",{type:"button",disabled:a||s,className:(0,eo.m6)("min-h-14 lg:min-h-16 min-w-14 lg:min-w-16 flex h-14 w-14 items-center justify-center rounded-full bg-white p-3 shadow-[0_0_4px_0_rgba(0,0,0,0.25)] transition duration-200 lg:h-16 lg:w-16 lg:p-4",t?"hover:animate-rotate-180 focus-visible:animate-rotate-180 hover:bg-gray-1 focus-visible:ring-2 focus-visible:ring-gray-4 active:bg-gray-2":""),...e,children:a?(0,z.jsx)(tK.Z,{className:"text-dark"}):(0,z.jsx)(tq.Z,{className:"text-dark"})})}function CustomAddressBanner(e){let{network:t,customAddress:a}=e,{isArbitrum:s,isArbitrumNova:r}=(0,eU.CR)(t.id),n=(0,Y.useMemo)(()=>s?r?"bg-orange border-arb-nova-dark":"bg-cyan border-arb-one-dark":"bg-cyan border-eth-dark",[s,r]);return a?(0,z.jsx)("div",{className:(0,eo.m6)("w-full rounded-t-lg border-4 p-1 text-center text-sm",n),children:(0,z.jsxs)("span",{children:["Showing balance for Custom Destination Address:"," ",(0,z.jsx)(ed.d,{className:"arb-hover underline",href:"".concat((0,eU.jY)(t.id),"/address/").concat(a),children:shortenAddress(a)})]})}):null}function NetworkContainer(e){let{network:t,customAddress:a,children:s}=e,{address:r}=(0,X.mA)(),{backgroundImage:n,backgroundClassName:i}=(0,Y.useMemo)(()=>{let{isArbitrum:e,isArbitrumNova:a,isOrbitChain:s,isXaiTestnet:r,isStylusTestnet:n,isInspace:i}=(0,eU.CR)(t.id);return i?{backgroundImage:"url('/images/InspaceLogo.png')",backgroundClassName:"bg-xai-dark"}:r?{backgroundImage:"url('/images/XaiLogo.svg')",backgroundClassName:"bg-xai-dark"}:n?{backgroundImage:"url('/images/StylusLogo.svg')",backgroundClassName:"bg-stylus-dark"}:s?{backgroundImage:"url('/images/OrbitLogoWhite.svg')",backgroundClassName:"bg-orbit-dark"}:e?a?{backgroundImage:"url('/images/ArbitrumNovaLogo.svg')",backgroundClassName:"bg-arb-nova-dark"}:{backgroundImage:"url('/images/ArbitrumOneLogo.svg')",backgroundClassName:"bg-arb-one-dark"}:{backgroundImage:"url('/images/TransparentEthereumLogo.webp')",backgroundClassName:"bg-eth-dark"}},[t]),o=null==r?void 0:r.toLowerCase(),l=(0,Y.useMemo)(()=>!!a&&!!o&&a!==o&&tJ.isAddress(a),[a,o]);return(0,z.jsxs)(z.Fragment,{children:[l&&(0,z.jsx)(CustomAddressBanner,{network:t,customAddress:a}),(0,z.jsxs)("div",{className:(0,eo.m6)("relative rounded-xl p-1 transition-colors ".concat(i),l?"rounded-t-none":""),children:[(0,z.jsx)("div",{className:"absolute left-0 top-0 z-0 h-full w-full bg-contain bg-left bg-no-repeat bg-origin-content p-2 opacity-50",style:{backgroundImage:n}}),(0,z.jsx)("div",{className:"relative space-y-3.5 bg-contain bg-no-repeat p-3 sm:flex-row lg:p-2",children:s})]})]})}function StyledLoader(){return(0,z.jsx)(ea.a,{color:"white",size:"small"})}function ETHBalance(e){let{balance:t,prefix:a=""}=e;return t?(0,z.jsxs)("p",{children:[(0,z.jsx)("span",{className:"font-light",children:a}),(0,z.jsx)("span",{className:"tabular-nums",children:formatAmount(t,{symbol:ex.Xx.symbol})})]}):(0,z.jsx)(StyledLoader,{})}function TokenBalance(e){let{forToken:t,balance:a,on:s,prefix:r="",tokenSymbolOverride:n}=e,{l1:i,l2:o}=useNetworksAndSigners(),l="l1"===s,d=l?i.network:o.network,c=(0,Y.useMemo)(()=>{if(t)return null!=n?n:sanitizeTokenSymbol(t.symbol,{erc20L1Address:t.address,chain:d})},[t,n,d]);return t?a?(0,z.jsxs)("p",{"aria-label":"".concat(c," balance on ").concat(s),children:[(0,z.jsx)("span",{className:"font-light",children:r}),(0,z.jsx)("span",{className:"tabular-nums",children:formatAmount(a,{decimals:t.decimals})})," ",null===t||t.hasOwnProperty("isCustom")||isTokenUSDC(t.address)?(0,z.jsx)("span",{children:c}):(0,z.jsx)(ed.d,{className:"arb-hover underline",href:createBlockExplorerUrlForToken({explorerLink:d.blockExplorers?d.blockExplorers.default.url:void 0,tokenAddress:l?t.address:t.l2Address}),children:(0,z.jsx)("span",{children:c})})]}):(0,z.jsx)(StyledLoader,{}):null}function BalancesContainer(e){let{children:t}=e;return(0,z.jsx)("div",{className:"ml-1 flex flex-col flex-nowrap items-end break-all text-sm font-extralight tracking-[.25px] text-white md:text-lg lg:font-medium",children:t})}function NetworkListboxPlusBalancesContainer(e){let{children:t}=e;return(0,z.jsx)("div",{className:"flex flex-col items-start justify-between gap-1 gap-y-2.5 whitespace-nowrap sm:flex-row sm:items-center",children:t})}function TransferPanelMain(e){var t;let{amount:a,setAmount:s,errorMessage:r}=e,n=ta(),{l1:i,l2:o}=useNetworksAndSigners(),{layer:l}=useChainLayers(),d=useIsConnectedToArbitrum(),c=useIsConnectedToOrbitChain(),{isArbitrumOne:u,isArbitrumGoerli:m}=(0,eU.CR)(o.network.id),{isSmartContractWallet:p}=useAccountType(),h=useNativeCurrency({provider:o.provider}),{switchNetworkAsync:x}=useSwitchNetworkWithConfig({isSwitchingNetworkBeforeTx:!0}),f=useGasPrice({provider:i.provider}),g=useGasPrice({provider:o.provider}),{app:b}=tt(),{address:w}=(0,X.mA)(),{arbTokenBridge:y,isDepositMode:v,selectedToken:A}=b,{token:k}=y,{destinationAddress:N,setDestinationAddress:j}=t1(),S=N||w,D=v?w:S,E=v?S:w,{eth:[L],erc20:[I,R]}=useBalance({provider:i.provider,walletAddress:D}),{eth:[M],erc20:[U,O]}=useBalance({provider:o.provider,walletAddress:E}),{updateUSDCBalances:_}=useUpdateUSDCBalances({walletAddress:S});(0,Y.useEffect)(()=>{h.isCustom&&R([h.address])},[h,R]),(0,Y.useEffect)(()=>{if(A&&S&&tJ.isAddress(S)){if(isTokenMainnetUSDC(A.address)||isTokenGoerliUSDC(A.address)||isTokenArbitrumOneNativeUSDC(A.address)||isTokenArbitrumGoerliNativeUSDC(A.address)){_(A.address);return}R([A.address]),A.l2Address&&O([A.l2Address])}},[A,R,O,S,_]);let B=useIsSwitchingL2Chain(),F=(0,Y.useMemo)(()=>{var e;return h.isCustom?{l1:null!==(e=null==I?void 0:I[h.address])&&void 0!==e?e:null,l2:M}:{l1:L,l2:M}},[h,L,M,I]),G=(0,Y.useMemo)(()=>{var e,t,a,s,r,n;let i={l1:null,l2:null};return A?(I&&(i.l1=null!==(e=I[A.address])&&void 0!==e?e:null),U&&A.l2Address&&(i.l2=null!==(t=U[A.l2Address])&&void 0!==t?t:null),isTokenArbitrumOneNativeUSDC(A.address)&&I&&U)?{l1:null!==(a=I[eM.Ethereum.USDC])&&void 0!==a?a:null,l2:null!==(s=U[A.address])&&void 0!==s?s:null}:isTokenArbitrumGoerliNativeUSDC(A.address)&&I&&U?{l1:null!==(r=I[eM.Goerli.USDC])&&void 0!==r?r:null,l2:null!==(n=U[A.address])&&void 0!==n?n:null}:i:i},[I,U,A]),[W,H]=(0,Y.useMemo)(()=>{let e=(0,eU.CR)(i.network.id).isArbitrum;return e?d?[i.network,o.network]:[o.network,i.network]:d?[o.network,i.network]:[i.network,o.network]},[i,o,d]),[Z,V]=(0,Y.useState)(W),[K,q]=(0,Y.useState)(H),[J,Q]=(0,Y.useState)(!1),[$,ee]=useDialog(),[et,ea]=useDialog(),[es,er]=(0,Y.useState)(null),en=a===T.MAX,eo=isTokenMainnetUSDC(null==A?void 0:A.address)&&u||isTokenGoerliUSDC(null==A?void 0:A.address)&&m,[,el]=useArbQueryParams();(0,Y.useEffect)(()=>{V(W),q(H)},[W,H]);let ec=(0,Y.useCallback)(async e=>{if(!w)return{estimatedL1Gas:eD._Y,estimatedL2Gas:eD._Y,estimatedL2SubmissionCost:eD._Y};if(v){let t=await depositEthEstimateGas({amount:e,address:w,l1Provider:i.provider,l2Provider:o.provider});return t}let t=await withdrawEthEstimateGas({amount:e,address:w,l2Provider:o.provider});return{...t,estimatedL2SubmissionCost:eD._Y}},[w,v,o.provider,i.provider]),eu=(0,Y.useCallback)(async()=>{var e,t,a,r,n;if(A){let t=v?G.l1:G.l2;t&&s(ej.formatUnits(t,null!==(e=null==A?void 0:A.decimals)&&void 0!==e?e:0));return}let i=F.l1;if(h.isCustom&&v&&i){s(ej.formatUnits(i,h.decimals));return}let o=v?L:M;if(o)try{Q(!0);let e=await ec(o),i=(t=e.estimatedL1Gas,a=v?f:g,parseFloat(ej.formatEther(t.mul(a)))),l=(r=e.estimatedL2Gas,n=e.estimatedL2SubmissionCost,parseFloat(ej.formatEther(r.mul(g).add(n)))),d=parseFloat(ej.formatUnits(o,h.decimals)),c=d-1.4*(i+l);s(String(c>0?c:d))}catch(e){console.error(e)}finally{Q(!1)}},[h,ec,L,M,v,f,g,A,s,G,F]);(0,Y.useEffect)(()=>{el({amount:a}),en&&eu()},[a,en,eu,el]),(0,Y.useEffect)(()=>{A||j(void 0)},[A,j]);let em=(0,Y.useMemo)(()=>{let e=v?L:M,t=v?G.l1:G.l2;return A?!!t&&!t.isZero():!!e&&!e.isZero()},[L,M,G,A,v]),ep=(0,Y.useMemo)(()=>{if(void 0!==r){if("string"==typeof r)return r;switch(r){case P.GAS_ESTIMATION_FAILURE:return(0,z.jsxs)("span",{children:["Gas estimation failed, join our"," ",(0,z.jsx)(ed.d,{href:"https://discord.com/invite/ZpZuw7p",className:"underline",children:"Discord"})," ","and reach out in #support for assistance."]});case P.TOKEN_WITHDRAW_ONLY:case P.TOKEN_TRANSFER_DISABLED:return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("span",{children:"This token can't be bridged over."})," ",(0,z.jsx)("button",{className:"arb-hover underline",onClick:ee,children:"Learn more."})]})}}},[r,ee]),eh=(0,Y.useCallback)(()=>{V(K),q(Z),n.app.setIsDepositMode(!b.isDepositMode)},[n.app,b.isDepositMode,Z,K]);(0,Y.useEffect)(()=>{let e=isTokenArbitrumOneNativeUSDC(null==A?void 0:A.address),t=isTokenArbitrumGoerliNativeUSDC(null==A?void 0:A.address);if(!v||!k)return;let a={name:"USD Coin",type:C.ERC20,symbol:"USDC",decimals:6,listIds:new Set};e?(k.updateTokenData(eM.Ethereum.USDC),n.app.setSelectedToken({...a,address:eM.Ethereum.USDC,l2Address:eM.ArbitrumOne["USDC.e"]})):t&&(k.updateTokenData(eM.Goerli.USDC),n.app.setSelectedToken({...a,address:eM.Goerli.USDC,l2Address:eM.ArbitrumGoerli["USDC.e"]}))},[n.app,v,A,k]);let ef=(0,Y.useMemo)(()=>{var e;let t=(e=i.network,(0,eU.$F)(e.id).map(e=>getWagmiChain(e)));function mapChainToDefaultPartnerChain(e){let t=(0,eU.LD)(e);if(t)return t.partnerChainID;switch(e){case eU.a_.Sepolia:case eU.a_.StylusTestnet:return eU.a_.ArbitrumSepolia;default:return eU.a_.ArbitrumGoerli}}function updatePreferredL2Chain(e){el({l2ChainId:e})}function modifyOptions(e,a){let s=(0,eU.CR)(Z.id).isOrbitChain,r=(0,eU.CR)(K.id).isOrbitChain,{isArbitrum:n}=(0,eU.CR)(e);return[i.network,...t].filter(t=>{let i="from"===a,o="to"===a,l=t.id===Z.id,d=t.id===K.id,{isEthereumMainnetOrTestnet:c,isOrbitChain:u}=(0,eU.CR)(t.id);return(!p||!o||!l)&&(!n||!i||!u||!!d)&&(!n||!o||!u||!!l)&&(!s||!o||!c&&(!u||!!l))&&(!r||!i||!c&&(!u||!!d))&&t.id!==e})}let a=modifyOptions(Z.id,"from"),s=modifyOptions(K.id,"to");function shouldOpenOneNovaDialog(e){return[eU.a_.ArbitrumOne,eU.a_.ArbitrumNova].every(t=>e.includes(t))}return v?{from:{disabled:!a.length||p||void 0===p,options:a,value:Z,onChange:async e=>{let{isEthereumMainnetOrTestnet:t}=(0,eU.CR)(e.id);if(shouldOpenOneNovaDialog([e.id,K.id])){er(K.id),ea();return}try{await (null==x?void 0:x(e.id));let a=(0,eU.CR)(o.network.id).isOrbitChain;if(t&&a){updatePreferredL2Chain(mapChainToDefaultPartnerChain(e.id));return}updatePreferredL2Chain(e.id)}catch(e){isUserRejectedError(e)||ei.Tb(e)}}},to:{disabled:!s.length,options:s,value:K,onChange:async e=>{let{isEthereumMainnetOrTestnet:t,isOrbitChain:a}=(0,eU.CR)(e.id),s=mapChainToDefaultPartnerChain(e.id);if(e.id===Z.id){eh();return}if(shouldOpenOneNovaDialog([e.id,Z.id])){er(e.id),ea();return}let r=(0,eU.CR)(o.network.id).isOrbitChain;if(t&&r){updatePreferredL2Chain(s);return}if(a)try{d||await (null==x?void 0:x(s))}catch(e){isUserRejectedError(e)||ei.Tb(e);return}updatePreferredL2Chain(e.id),q(e)}}}:{from:{disabled:!a.length||p||void 0===p,options:a,value:Z,onChange:async e=>{let{isEthereumMainnetOrTestnet:t}=(0,eU.CR)(e.id);if(shouldOpenOneNovaDialog([e.id,K.id])){er(K.id),ea();return}try{await (null==x?void 0:x(e.id));let a=(0,eU.CR)(o.network.id).isOrbitChain;if(t&&a){updatePreferredL2Chain(mapChainToDefaultPartnerChain(e.id));return}updatePreferredL2Chain(e.id)}catch(e){isUserRejectedError(e)||ei.Tb(e)}}},to:{disabled:!s.length,options:s,value:K,onChange:async e=>{let{isEthereumMainnetOrTestnet:t,isOrbitChain:a}=(0,eU.CR)(e.id),s=mapChainToDefaultPartnerChain(e.id);if(e.id===Z.id){eh();return}if(shouldOpenOneNovaDialog([e.id,Z.id])){er(e.id),ea();return}if(t){if(c)try{await (null==x?void 0:x(s)),updatePreferredL2Chain(s);return}catch(e){isUserRejectedError(e)||ei.Tb(e);return}updatePreferredL2Chain(s)}if(a){let t=!d&&!c;t&&await (null==x?void 0:x(s));let a=(0,eU.CR)(o.network.id).isOrbitChain;a&&await (null==x?void 0:x(s)),updatePreferredL2Chain(e.id)}q(e)}}}},[i.network,o.network,Z,K,p,v,el,x,eh,ea,d,c]);return(0,z.jsxs)("div",{className:"flex flex-col px-6 py-6 lg:min-w-[540px] lg:px-0 lg:pl-6",children:[(0,z.jsxs)(NetworkContainer,{network:Z,children:[(0,z.jsxs)(NetworkListboxPlusBalancesContainer,{children:[(0,z.jsx)(NetworkListbox,{label:"From:",...ef.from}),(0,z.jsx)(BalancesContainer,{children:B?(0,z.jsx)(StyledLoader,{}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(TokenBalance,{on:b.isDepositMode?"l1":"l2",balance:b.isDepositMode?G.l1:G.l2,forToken:A,prefix:A?"BALANCE: ":""}),h.isCustom?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(TokenBalance,{on:b.isDepositMode?"l1":"l2",balance:b.isDepositMode?F.l1:F.l2,forToken:h,prefix:A?"":"BALANCE: "}),b.isDepositMode&&(0,z.jsx)(ETHBalance,{balance:L})]}):(0,z.jsx)(ETHBalance,{balance:b.isDepositMode?L:M,prefix:A?"":"BALANCE: "})]})})]}),(0,z.jsxs)("div",{className:"flex flex-col space-y-1 pb-2.5",children:[(0,z.jsx)(TransferPanelMainInput,{maxButtonProps:{visible:em,loading:en||J,onClick:eu},errorMessage:ep,disabled:B,value:en?"":a,onChange:e=>{s(e.target.value)}}),eo&&(0,z.jsxs)("p",{className:"mt-1 text-xs font-light text-white",children:["Bridged USDC (USDC.e) will work but is different from Native USDC."," ",(0,z.jsx)(ed.d,{href:ex.Bu,className:"arb-hover underline",children:"Learn more"}),"."]}),v&&A&&(0,z.jsxs)("p",{className:"mt-1 text-xs font-light text-white",children:["Make sure you have ETH in your ",l," wallet, youll need it to power transactions.",(0,z.jsx)("br",{}),(0,z.jsx)(ed.d,{href:ex.bA,className:"arb-hover underline",children:"Learn more"}),"."]})]})]}),(0,z.jsx)("div",{className:"z-10 flex h-10 w-full items-center justify-center lg:h-12",children:(0,z.jsx)(SwitchNetworksButton,{onClick:eh,"aria-label":"Switch Networks"})}),(0,z.jsx)(NetworkContainer,{network:K,customAddress:N,children:(0,z.jsxs)(NetworkListboxPlusBalancesContainer,{children:[(0,z.jsx)(NetworkListbox,{label:"To:",...ef.to}),(0,z.jsx)(BalancesContainer,{children:B?(0,z.jsx)(StyledLoader,{}):S&&tJ.isAddress(S)&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(TokenBalance,{balance:b.isDepositMode?G.l2:G.l1,on:b.isDepositMode?"l2":"l1",forToken:A,prefix:A?"BALANCE: ":""}),b.isDepositMode&&eo&&(0,z.jsx)(TokenBalance,{balance:null!==(t=u?null==U?void 0:U[eM.ArbitrumOne.USDC]:null==U?void 0:U[eM.ArbitrumGoerli.USDC])&&void 0!==t?t:eD._Y,on:"l2",forToken:A?{...A,symbol:"USDC"}:null,tokenSymbolOverride:"USDC"}),h.isCustom?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(TokenBalance,{on:b.isDepositMode?"l2":"l1",balance:b.isDepositMode?F.l2:F.l1,forToken:h,prefix:A?"":"BALANCE: "}),!b.isDepositMode&&(0,z.jsx)(ETHBalance,{balance:L})]}):(0,z.jsx)(ETHBalance,{balance:b.isDepositMode?M:L,prefix:A?"":"BALANCE: "})]})})]})}),(0,z.jsx)(AdvancedSettings,{}),(0,z.jsx)(Dialog,{closeable:!0,title:"Token not supported",cancelButtonProps:{className:"hidden"},actionButtonTitle:"Close",...$,className:"md:max-w-[628px]",children:(0,z.jsxs)("p",{children:["The Arbitrum bridge does not currently support ",null==A?void 0:A.symbol,", please ask the ",null==A?void 0:A.symbol," team for more info."]})}),(0,z.jsx)(OneNovaTransferDialog,{...et,onClose:()=>er(null),destinationChainId:es,amount:a})]})}(x=P||(P={}))[x.GAS_ESTIMATION_FAILURE=0]="GAS_ESTIMATION_FAILURE",x[x.TOKEN_WITHDRAW_ONLY=1]="TOKEN_WITHDRAW_ONLY",x[x.TOKEN_TRANSFER_DISABLED=2]="TOKEN_TRANSFER_DISABLED",(f=F||(F={})).l1="l1",f.l2="l2";let ar={[eU.a_.ArbitrumOne]:[{symbol:"LPT",l1Address:"0x58b6A8A3302369DAEc383334672404Ee733aB239",l2Address:"0x289ba1701C2F088cf0faf8B3705246331cB8A839"},{symbol:"GRT",l1Address:"0xc944e90c64b2c07662a292be6244bdf05cda44a7",l2Address:"0x9623063377AD1B27544C965cCd7342f7EA7e88C7"},{symbol:"ARB",l1Address:"0xB50721BCf8d664c30412Cfbc6cf7a15145234ad1",l2Address:"0x912CE59144191C1204E64559FE8253a0e49E6548"}],[eU.a_.ArbitrumNova]:[{symbol:"ARB",l1Address:"0xB50721BCf8d664c30412Cfbc6cf7a15145234ad1",l2Address:"0xf823C3cD3CeBE0a1fA952ba88Dc9EEf8e0Bf46AD"}],[eU.a_.ArbitrumGoerli]:[{symbol:"GRT",l1Address:"0x5c946740441C12510a167B447B7dE565C20b9E3C",l2Address:"0x18C924BD5E8b83b47EFaDD632b7178E2Fd36073D"},{symbol:"ARB",l1Address:"0xECCc8dE9b0a0F1074D8dc6E1092964A3Bc400a41",l2Address:"0xF861378B543525ae0C47d33C90C954Dc774Ac1F9"}]};function USDCDepositConfirmationDialogCheckbox(e){var t,a,s;let{onChange:r,onAllCheckboxesCheched:n,isBridgingNativeUSDC:i}=e,[o,l]=(0,Y.useState)([!1,!1,!1]),d=(0,X.xx)(),{isTestnet:c}=(0,eU.CR)(d);return(0,Y.useEffect)(()=>{o.every(e=>e)&&(null==n||n())},[o,n]),(0,z.jsxs)(z.Fragment,{children:[i&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Checkbox,{label:(0,z.jsxs)("span",{className:"select-none font-light",children:["I understand that I'll have to send"," ",(0,z.jsx)("span",{className:"font-medium",children:"a second transaction on L2"})," ","and pay another L2 fee to claim my USDC."]}),checked:null!==(t=o[0])&&void 0!==t&&t,onChange:e=>{r(e),l(t=>{let a=[...t];return a[0]=e,a})}}),(0,z.jsx)(Checkbox,{label:(0,z.jsxs)("span",{className:"select-none font-light",children:["I understand that it will take"," ",(0,z.jsx)("span",{className:"font-medium",children:c?"~1 minute":"~15 minutes"})," ","before I can claim my USDC on"," ",c?"Arbitrum Goerli":"Arbitrum One","."]}),checked:null!==(a=o[1])&&void 0!==a&&a,onChange:e=>{r(e),l(t=>{let a=[...t];return a[1]=e,a})}})]}),(0,z.jsx)(Checkbox,{label:(0,z.jsxs)("span",{className:"select-none font-light",children:["I understand ",(0,z.jsx)("span",{className:"font-medium",children:"USDC.e"})," is different from ",(0,z.jsx)("span",{className:"font-medium",children:"USDC"}),"."," ",(0,z.jsx)(ed.d,{className:"arb-hover text-blue-link underline",href:"https://arbitrumfoundation.medium.com/usdc-to-come-natively-to-arbitrum-f751a30e3d83",onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation()},children:"Learn more"}),"."]}),checked:null!==(s=o[2])&&void 0!==s&&s,onChange:e=>{r(e),l(t=>{let a=[...t];return a[2]=e,a})}})]})}function useCCTPIsBlocked(){let{fetchAttestation:e}=useCCTP({sourceChainId:eU.a_.Ethereum});return(0,e6.Z)(["cctp-check"],async()=>{try{return await e("0x"),!1}catch(e){return!0}})}let CctpTabContent=e=>{let{toNetworkName:t,children:a}=e,{data:s,isLoading:r}=useCCTPIsBlocked();return r||s?(0,z.jsxs)("p",{className:"font-light",children:["Access to Circle's bridge is restricted in certain jurisdictions. For more details, please consult Circle's"," ",(0,z.jsx)(ed.d,{className:"arb-hover text-blue-link underline",href:ex.A2,children:"documentation."})," "]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("p",{className:"font-light",children:["Receive Native USDC on ",t," with Circle's"," ",(0,z.jsx)(ed.d,{className:"arb-hover text-blue-link underline",href:ex.A2,children:"Cross-Chain Transfer Protocol"})," ","within the Arbitrum Bridge."]}),a]})};function USDCDepositConfirmationDialog(e){let{app:{selectedToken:t}}=tt(),{l1:a,l2:s}=useNetworksAndSigners(),r=(0,eU.pp)(s.network.id),{isArbitrumGoerli:n}=(0,eU.CR)(s.network.id),[i,o]=(0,Y.useState)(!1),l=a.network,d=s.network,c=(0,eU.pp)(d.id);if((0,Y.useEffect)(()=>{o(!1)},[e.isOpen]),!t||!isTokenMainnetUSDC(t.address)&&!isTokenGoerliUSDC(t.address))return null;let u=R.USDC,m=tz.map(t=>({name:t.name,imageSrc:t.imageSrc,href:t.getHref({from:l.id,to:d.id,fromTokenAddress:n?eM.Goerli.USDC:eM.Ethereum.USDC,toTokenAddress:n?eM.ArbitrumGoerli.USDC:eM.ArbitrumOne.USDC,amount:e.amount,transferMode:"deposit"})}));return(0,z.jsx)(Dialog,{...e,isCustom:!0,children:(0,z.jsx)("div",{className:"flex max-h-screen w-full flex-col md:w-[750px] lg:w-[925px]",children:(0,z.jsxs)(tR.O.Group,{onChange:()=>{o(!1)},children:[(0,z.jsxs)("div",{className:"flex flex-row items-center justify-between bg-ocl-blue px-8 py-4",children:[(0,z.jsxs)(es.V.Title,{className:"text-2xl font-medium text-white",children:["Move funds to ",r]}),(0,z.jsx)("button",{className:"arb-hover",onClick:()=>{e.onClose(!1)},children:(0,z.jsx)(eu.Z,{className:"h-6 w-6 text-white"})})]}),(0,z.jsxs)(tR.O.List,{className:"flex bg-ocl-blue",children:[(0,z.jsx)(tM,{"aria-label":"Arbitrum's bridge (USDC.e)",children:"Arbitrum's bridge (USDC.e)"}),(0,z.jsx)(tM,{"aria-label":"Third party (USDC)",children:"Third party (USDC)"}),(0,z.jsx)(tM,{"aria-label":"Circle (USDC)",children:"Circle (USDC)"})]}),(0,z.jsxs)(tR.O.Panel,{className:"flex flex-col space-y-3 px-8 py-4",children:[(0,z.jsxs)("div",{className:"flex flex-col space-y-6",children:[(0,z.jsxs)("p",{className:"font-light",children:["Receive"," ",(0,z.jsx)("span",{className:"font-medium",children:"Bridged USDC (USDC.e)"})," on"," ",c," using Arbitrum's native bridge."]}),(0,z.jsx)("div",{className:"flex flex-col space-y-3",children:(0,z.jsx)(USDCDepositConfirmationDialogCheckbox,{onChange:e=>{o(e)}})})]}),(0,z.jsxs)("div",{className:"mt-2 flex flex-row justify-end space-x-2",children:[(0,z.jsx)(el,{variant:"secondary",onClick:()=>e.onClose(!1),children:"Cancel"}),(0,z.jsx)(el,{variant:"primary",disabled:!i,onClick:()=>{e.onClose(!0,"bridged"),o(!1),trackEvent("Use Arbitrum Bridge Click",{tokenSymbol:u})},children:"Confirm"})]})]}),(0,z.jsxs)(tR.O.Panel,{className:"flex flex-col space-y-3 px-8 py-4",children:[(0,z.jsx)("div",{className:"flex flex-col space-y-3",children:(0,z.jsxs)("p",{className:"font-light",children:["Receive ",(0,z.jsx)("span",{className:"font-medium",children:"Native USDC"})," on Arbitrum One using a third-party bridge with Circle's"," ",(0,z.jsx)(ed.d,{className:"arb-hover text-blue-link underline",href:ex.A2,children:"Cross-Chain Transfer Protocol"})," ","integrated."]})}),(0,z.jsx)(BridgesTable,{bridgeList:m,selectedNonCanonicalToken:u}),(0,z.jsx)("div",{className:"mt-2 flex flex-row justify-end space-x-2",children:(0,z.jsx)(el,{variant:"secondary",onClick:()=>e.onClose(!1),children:"Cancel"})})]}),(0,z.jsxs)(tR.O.Panel,{className:"flex flex-col space-y-3 px-8 py-4",children:[(0,z.jsx)("div",{className:"flex flex-col space-y-6",children:(0,z.jsx)(CctpTabContent,{toNetworkName:c,children:(0,z.jsx)("div",{className:"flex flex-col space-y-3",children:(0,z.jsx)(USDCDepositConfirmationDialogCheckbox,{onAllCheckboxesCheched:()=>{o(!0)},onChange:e=>{e||o(!1)},isBridgingNativeUSDC:!0})})})}),(0,z.jsxs)("div",{className:"mt-2 flex flex-row justify-end space-x-2",children:[(0,z.jsx)(el,{variant:"secondary",onClick:()=>e.onClose(!1),children:"Cancel"}),(0,z.jsx)(el,{variant:"primary",disabled:!i,onClick:()=>{e.onClose(!0,"cctp"),o(!1),trackEvent("Use Arbitrum Bridge Click",{tokenSymbol:u})},children:"Confirm"})]})]})]})})})}function USDCWithdrawalConfirmationDialogCheckbox(e){var t,a;let{onChange:s,onAllCheckboxesCheched:r}=e,[n,i]=(0,Y.useState)([!1,!1]),o=(0,X.xx)(),{parentLayer:l}=useChainLayers(),{isTestnet:d}=(0,eU.CR)(o);return(0,Y.useEffect)(()=>{n.every(e=>e)&&(null==r||r())},[n,r]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(Checkbox,{label:(0,z.jsxs)("span",{className:"select-none font-light",children:["I understand that I'll have to send"," ",(0,z.jsxs)("span",{className:"font-medium",children:["a second transaction on ",l]})," ","and pay another ",l," fee to claim my USDC."]}),checked:null!==(t=n[0])&&void 0!==t&&t,onChange:e=>{s(e),i(t=>{let a=[...t];return a[0]=e,a})}}),(0,z.jsx)(Checkbox,{label:(0,z.jsxs)("span",{className:"select-none font-light",children:["I understand that it will take"," ",(0,z.jsx)("span",{className:"font-medium",children:d?"~1 minute":"~15 minutes"})," ","before I can claim my USDC on ",d?"Goerli":"Ethereum","."]}),checked:null!==(a=n[1])&&void 0!==a&&a,onChange:e=>{s(e),i(t=>{let a=[...t];return a[1]=e,a})}})]})}function USDCWithdrawalConfirmationDialog(e){let{l1:t,l2:a}=useNetworksAndSigners(),[s,r]=(0,Y.useState)(!1),{isArbitrumGoerli:n}=(0,eU.CR)(a.network.id),i=a.network,o=t.network,l=(0,eU.pp)(o.id),d=R.USDC;(0,Y.useEffect)(()=>{r(!1)},[e.isOpen]);let c=tz.map(t=>({name:t.name,imageSrc:t.imageSrc,href:t.getHref({from:i.id,to:o.id,fromTokenAddress:n?eM.ArbitrumGoerli.USDC:eM.ArbitrumOne.USDC,toTokenAddress:n?eM.Goerli.USDC:eM.Ethereum.USDC,amount:e.amount,transferMode:"withdraw"})}));return(0,z.jsx)(Dialog,{...e,isCustom:!0,children:(0,z.jsx)("div",{className:"flex max-h-screen w-full flex-col md:w-[750px] lg:w-[925px]",children:(0,z.jsxs)(tR.O.Group,{children:[(0,z.jsxs)("div",{className:"flex flex-row items-center justify-between bg-ocl-blue px-8 py-4",children:[(0,z.jsxs)(es.V.Title,{className:"text-2xl font-medium text-white",children:["Move funds to ",l]}),(0,z.jsx)("button",{className:"arb-hover",onClick:()=>{e.onClose(!1)},children:(0,z.jsx)(eu.Z,{className:"h-6 w-6 text-white"})})]}),(0,z.jsxs)(tR.O.List,{className:"flex bg-ocl-blue",children:[(0,z.jsx)(tM,{"aria-label":"Third party (USDC)",children:"Third party (USDC)"}),(0,z.jsx)(tM,{"aria-label":"Circle (USDC)",children:"Circle (USDC)"})]}),(0,z.jsxs)(tR.O.Panel,{className:"flex flex-col space-y-3 px-8 py-4",children:[(0,z.jsx)("div",{className:"flex flex-col space-y-3 font-light",children:(0,z.jsxs)("p",{children:["Receive ",(0,z.jsx)("span",{className:"font-medium",children:"USDC"})," on"," ",l," using a third-party bridge with Circle's"," ",(0,z.jsx)(ed.d,{className:"arb-hover text-blue-link underline",href:ex.A2,children:"Cross-Chain Transfer Protocol"})," ","integrated."]})}),(0,z.jsx)(BridgesTable,{bridgeList:c,selectedNonCanonicalToken:d}),(0,z.jsx)("div",{className:"mt-2 flex flex-row justify-end space-x-2",children:(0,z.jsx)(el,{variant:"secondary",onClick:()=>e.onClose(!1),children:"Cancel"})})]}),(0,z.jsxs)(tR.O.Panel,{className:"flex flex-col space-y-3 px-8 py-4",children:[(0,z.jsx)("div",{className:"flex flex-col space-y-6",children:(0,z.jsx)(CctpTabContent,{toNetworkName:l,children:(0,z.jsx)("div",{className:"flex flex-col space-y-3",children:(0,z.jsx)(USDCWithdrawalConfirmationDialogCheckbox,{onAllCheckboxesCheched:()=>{r(!0)},onChange:e=>{e||r(!1)}})})})}),(0,z.jsxs)("div",{className:"mt-2 flex flex-row justify-end space-x-2",children:[(0,z.jsx)(el,{variant:"secondary",onClick:()=>e.onClose(!1),children:"Cancel"}),(0,z.jsx)(el,{variant:"primary",disabled:!s,onClick:()=>{e.onClose(!0),r(!1)},children:"Confirm"})]})]})]})})})}async function approveCustomFeeTokenEstimateGas(e){let{erc20L1Address:t}=e;return void 0!==t?approveCustomFeeTokenForGatewayEstimateGas({...e,erc20L1Address:t}):approveCustomFeeTokenForInboxEstimateGas(e)}async function approveCustomFeeTokenForInboxEstimateGas(e){let{l1Signer:t,l2Provider:a}=e,s=await ev.EthBridger.fromProvider(a),r=s.getApproveFeeTokenRequest();return t.estimateGas(r)}async function approveCustomFeeTokenForGatewayEstimateGas(e){let{erc20L1Address:t,l1Signer:a,l1Provider:s,l2Provider:r}=e,n=await ev.Erc20Bridger.fromProvider(r),i=await n.getApproveFeeTokenRequest({erc20L1Address:t,l1Provider:s});return a.estimateGas(i)}function CustomFeeTokenApprovalDialog(e){let{customFeeToken:t,isOpen:a}=e,{ethToUSD:s}=useETHPrice(),{app:r}=tt(),{selectedToken:n}=r,{l1:i,l2:o}=useNetworksAndSigners(),{isEthereumMainnet:l}=(0,eU.CR)(i.network.id),{data:d}=(0,X.mx)({chainId:i.network.id}),c=useGasPrice({provider:i.provider}),[u,m]=(0,Y.useState)(!1),[p,h]=(0,Y.useState)(eD._Y),x=(0,Y.useMemo)(()=>parseFloat(ej.formatEther(p.mul(c))),[p,c]),f=(0,Y.useMemo)(()=>{let e=formatAmount(x,{symbol:"ETH"}),t=formatUSD(s(x));return"".concat(e).concat(l?" (".concat(t,")"):"")},[x,s,l]);return((0,Y.useEffect)(()=>{a&&async function(){d&&h(await approveCustomFeeTokenEstimateGas({erc20L1Address:null==n?void 0:n.address,l1Signer:d,l1Provider:i.provider,l2Provider:o.provider}))}()},[a,n,d,i.provider,o.provider]),t)?(0,z.jsx)(Dialog,{...e,onClose:function(t){e.onClose(t),m(!1)},title:"Acknowledge approval fees",actionButtonTitle:"Pay approval fee of ".concat(f),actionButtonProps:{disabled:!u},children:(0,z.jsxs)("div",{className:"flex flex-col space-y-6 md:max-w-[490px]",children:[(0,z.jsxs)("div",{className:"flex flex-row items-center space-x-4",children:[(0,z.jsx)(SafeImage,{src:t.logoUrl,alt:"".concat(t.name," logo"),className:"h-8 w-8 grow-0 rounded-full",fallback:(0,z.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-ocl-blue text-sm font-medium text-white",children:"?"})}),(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,z.jsx)("span",{className:"text-base font-medium text-gray-900",children:t.symbol}),(0,z.jsx)("span",{className:"text-xs text-gray-500",children:t.name})]}),(0,z.jsx)(ed.d,{href:"".concat((0,eU.jY)(i.network.id),"/token/").concat(t.address),className:"text-xs text-blue-link underline",children:t.address})]})]}),(0,z.jsxs)("span",{className:"font-light",children:["The network you are trying to deposit to uses"," ",(0,z.jsxs)("span",{className:"font-medium",children:[t.name," (",t.symbol,")"]})," ","as the fee token. Before continuing with your deposit, you must first allow the bridge contract to access your"," ",(0,z.jsx)("span",{className:"font-medium",children:t.symbol}),"."]}),(0,z.jsx)(Checkbox,{label:(0,z.jsxs)("span",{className:"font-light",children:["I understand that I have to pay a one-time"," ",(0,z.jsxs)("span",{className:"font-medium",children:["approval fee of ",f,"*"]})," ","for this."]}),checked:u,onChange:m}),(0,z.jsx)("div",{className:"flex flex-col md:max-w-[490px]",children:(0,z.jsxs)("div",{className:"flex flex-row items-center space-x-2 rounded-lg bg-cyan px-2 py-3",children:[(0,z.jsx)(tp.Z,{className:"h-6 w-6 text-cyan-dark"}),n?(0,z.jsxs)("span",{className:"text-sm font-light text-cyan-dark",children:["After approval, you'll see additional prompts related to depositing your"," ",(0,z.jsx)("span",{className:"font-medium",children:n.symbol}),"."]}):(0,z.jsxs)("span",{className:"text-sm font-light text-cyan-dark",children:["After approval, you'll see an additional prompt in your wallet to deposit your"," ",(0,z.jsx)("span",{className:"font-medium",children:t.symbol}),"."]})]})})]})}):null}let an=[{inputs:[{internalType:"address",name:"_tokenController",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"localTokenMessenger",type:"address"}],name:"LocalTokenMessengerAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"localTokenMessenger",type:"address"}],name:"LocalTokenMessengerRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferStarted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[],name:"Pause",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newAddress",type:"address"}],name:"PauserChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"newRescuer",type:"address"}],name:"RescuerChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"burnLimitPerMessage",type:"uint256"}],name:"SetBurnLimitPerMessage",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"tokenController",type:"address"}],name:"SetTokenController",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"localToken",type:"address"},{indexed:!1,internalType:"uint32",name:"remoteDomain",type:"uint32"},{indexed:!1,internalType:"bytes32",name:"remoteToken",type:"bytes32"}],name:"TokenPairLinked",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address",name:"localToken",type:"address"},{indexed:!1,internalType:"uint32",name:"remoteDomain",type:"uint32"},{indexed:!1,internalType:"bytes32",name:"remoteToken",type:"bytes32"}],name:"TokenPairUnlinked",type:"event"},{anonymous:!1,inputs:[],name:"Unpause",type:"event"},{inputs:[],name:"acceptOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newLocalTokenMessenger",type:"address"}],name:"addLocalTokenMessenger",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"burnToken",type:"address"},{internalType:"uint256",name:"burnAmount",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"burnLimitsPerMessage",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"remoteDomain",type:"uint32"},{internalType:"bytes32",name:"remoteToken",type:"bytes32"}],name:"getLocalToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"localToken",type:"address"},{internalType:"uint32",name:"remoteDomain",type:"uint32"},{internalType:"bytes32",name:"remoteToken",type:"bytes32"}],name:"linkTokenPair",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"localTokenMessenger",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"sourceDomain",type:"uint32"},{internalType:"bytes32",name:"burnToken",type:"bytes32"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"mint",outputs:[{internalType:"address",name:"mintToken",type:"address"}],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"pauser",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"pendingOwner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"remoteTokensToLocalTokens",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"removeLocalTokenMessenger",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"tokenContract",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"rescueERC20",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"rescuer",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"localToken",type:"address"},{internalType:"uint256",name:"burnLimitPerMessage",type:"uint256"}],name:"setMaxBurnAmountPerMessage",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newTokenController",type:"address"}],name:"setTokenController",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"tokenController",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"localToken",type:"address"},{internalType:"uint32",name:"remoteDomain",type:"uint32"},{internalType:"bytes32",name:"remoteToken",type:"bytes32"}],name:"unlinkTokenPair",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unpause",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_newPauser",type:"address"}],name:"updatePauser",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"newRescuer",type:"address"}],name:"updateRescuer",outputs:[],stateMutability:"nonpayable",type:"function"}];var ai=a(71926);function mapCCTPTransfer(e){var t;return e.messageSent.amount=(t=e.messageSent.amount,ej.formatUnits(t,6)),e}async function fetchCCTP(e){let{walletAddress:t,l1ChainId:a,pageNumber:s,pageSize:r,type:n}=e,i=new URLSearchParams((0,et.$m)({walletAddress:t,l1ChainId:a,pageNumber:s,pageSize:r})),o=await fetch("".concat((0,et.DZ)(),"/api/cctp/").concat(n,"?").concat(i),{method:"GET",headers:{"Content-Type":"application/json"}}),l=await o.json(),{pending:d,completed:c}=l.data;return{pending:d.map(e=>mapCCTPTransfer(e)),completed:c.map(e=>mapCCTPTransfer(e))}}async function fetchCCTPDeposits(e){return fetchCCTP({...e,type:"deposits"})}async function fetchCCTPWithdrawals(e){return fetchCCTP({...e,type:"withdrawals"})}var ao=a(59256),al=a(71320),ad=a(64973);function getAttestationHashAndMessageFromReceipt(e){let t=ao.keccak256(al.Y0("MessageSent(bytes)")),a=e.logs.find(e=>e.topics[0]===t);if(!a)return{messageBytes:null,attestationHash:null};let s=ad.$.decode(["bytes"],a.data)[0];return{messageBytes:s,attestationHash:ao.keccak256(s)}}function getBlockBeforeConfirmation(e){let{isTestnet:t}=(0,eU.CR)(e);return t?7:85}function getUsdcTokenAddressFromSourceChainId(e){return({[eU.a_.Ethereum]:eM.Ethereum,[eU.a_.ArbitrumOne]:eM.ArbitrumOne,[eU.a_.Goerli]:eM.Goerli,[eU.a_.ArbitrumGoerli]:eM.ArbitrumGoerli})[e].USDC}function parseTransferToMergedTransaction(e,t){let{messageSent:a}=e,s="Unconfirmed",r=null,n=null;if("messageReceived"in e){let{messageReceived:t}=e;s="Executed",r=getStandardizedTimestamp((1e3*parseInt(t.blockTimestamp,10)).toString()),n=t.transactionHash}let i=function(e,t){let{isTestnet:a}=(0,eU.CR)(t);return e===L.Ethereum?a?eU.a_.Goerli:eU.a_.Ethereum:a?eU.a_.ArbitrumGoerli:eU.a_.ArbitrumOne}(parseInt(a.sourceDomain,10),t),o=parseInt(a.sourceDomain,10)===L.Ethereum;return{sender:a.sender,destination:a.recipient,direction:o?"deposit":"withdraw",status:s,createdAt:getStandardizedTimestamp((1e3*parseInt(a.blockTimestamp,10)).toString()),resolvedAt:r,txId:a.transactionHash,asset:"USDC",assetType:v.ERC20,value:a.amount,uniqueId:null,isWithdrawal:!o,blockNum:parseInt(a.blockNumber,10),tokenAddress:getUsdcTokenAddressFromSourceChainId(i),depositStatus:S.CCTP_DEFAULT_STATE,isCctp:!0,cctpData:{sourceChainId:i,attestationHash:a.attestationHash,messageBytes:a.message,receiveMessageTransactionHash:n,receiveMessageTimestamp:r||null}}}function parseSWRResponse(e,t){let{pending:a,completed:s}=e;return{pending:a.map(e=>parseTransferToMergedTransaction(e,t)),completed:s.map(e=>parseTransferToMergedTransaction(e,t))}}let useCCTPDeposits=e=>{let{walletAddress:t,l1ChainId:a,pageNumber:s,pageSize:r,enabled:n}=e;return(0,e6.Z)(()=>t&&n?[t,a,s,r,"cctp-deposits"]:null,e=>{let[t,a,s,r]=e;return fetchCCTPDeposits({walletAddress:t,l1ChainId:a,pageNumber:s,pageSize:r}).then(e=>parseSWRResponse(e,a))})},useCCTPWithdrawals=e=>{let{walletAddress:t,l1ChainId:a,pageNumber:s,pageSize:r,enabled:n}=e;return(0,e6.Z)(()=>t&&n?[t,a,s,r,"cctp-withdrawals"]:null,e=>{let[t,a,s,r]=e;return fetchCCTPWithdrawals({walletAddress:t,l1ChainId:a,pageNumber:s,pageSize:r}).then(e=>parseSWRResponse(e,a))})},ac=(0,tQ.Ue)((e,t)=>({transfers:{},transfersIds:[],resetTransfers:()=>e({transfers:{},transfersIds:[]}),setTransfers:a=>{let{pending:s,completed:r}=a,n=t().transfers,i=[...s,...r].concat(Object.values(n)).sort((e,t)=>ek()(t.createdAt).isAfter(e.createdAt)?1:-1),o=new Set,l=i.reduce((e,t)=>(e[t.txId]=t,o.add(t.txId),e),{});return e({transfers:l,transfersIds:[...o]})},updateTransfer:a=>{let s=t().transfers[a.txId];s&&e(e=>({transfers:{...e.transfers,[a.txId]:{...s,...a,cctpData:{...s.cctpData,...a.cctpData}}}}))}}));function useCctpState(){let{transfersIds:e,transfers:t,resetTransfers:a,setTransfers:s,updateTransfer:r}=ac(),{pendingIds:n,completedIds:i,depositIds:o,withdrawalIds:l}=(0,Y.useMemo)(()=>e.reduce((e,a)=>{let s=t[a];return s&&("deposit"===s.direction?e.depositIds.push(a):e.withdrawalIds.push(a),"Executed"!==s.status?e.pendingIds.push(a):e.completedIds.push(a)),e},{pendingIds:[],completedIds:[],depositIds:[],withdrawalIds:[]}),[e,t]);return{resetTransfers:a,setTransfers:s,transfersIds:e,transfers:t,pendingIds:n,completedIds:i,depositIds:o,withdrawalIds:l,updateTransfer:r}}function useCctpFetching(e){let{l1ChainId:t,l2ChainId:a,walletAddress:s,pageSize:r=10,pageNumber:n,type:i}=e,{isEthereumMainnet:o,isGoerli:l}=(0,eU.CR)(t),{isArbitrumOne:d,isArbitrumGoerli:c}=(0,eU.CR)(a),u=o&&d||l&&c,{data:m,isLoading:p,error:h,mutate:x}=useCCTPDeposits({l1ChainId:t,walletAddress:s,pageNumber:n,pageSize:r,enabled:"withdrawals"!==i&&u}),{data:f,isLoading:g,error:b,mutate:w}=useCCTPWithdrawals({l1ChainId:t,walletAddress:s,pageNumber:n,pageSize:r,enabled:"deposits"!==i&&u}),{setTransfers:y}=useCctpState();(0,Y.useEffect)(()=>{m&&y(m)},[m,y]),(0,Y.useEffect)(()=>{f&&y(f)},[f,y]);let C=(0,Y.useCallback)((e,t)=>{let a="deposit"===t?x:w;a({pending:[e],completed:[]},{populateCache(e,t){let a=e.pending[0];if(!t||!a)return e;let s=t.pending.findIndex(e=>e.txId===a.txId),r=t.pending[s];if(r){let{cctpData:e,...n}=r,{cctpData:i,...o}=a;return t.pending[s]={...n,...o,cctpData:{...e,...i}},t}return{pending:[...e.pending,...t.pending],completed:[...e.completed,...t.completed]}},revalidate:!1})},[x,w]);return{deposits:m,withdrawals:f,isLoadingDeposits:p,isLoadingWithdrawals:g,depositsError:h,withdrawalsError:b,mutateDeposits:x,mutateWithdrawals:w,setPendingTransfer:C}}function useClaimCctp(e){var t;let[a,s]=(0,Y.useState)(!1),{waitForAttestation:r,receiveMessage:n}=useCCTP({sourceChainId:null===(t=e.cctpData)||void 0===t?void 0:t.sourceChainId}),{isSmartContractWallet:i}=useAccountType(),{updateTransfer:o}=useCctpState(),{data:l}=(0,X.mx)(),d=(0,Y.useCallback)(async()=>{var t;if((null===(t=e.cctpData)||void 0===t?void 0:t.attestationHash)&&e.cctpData.messageBytes&&l){s(!0);try{let t=await r(e.cctpData.attestationHash),a=await n({attestation:t,messageBytes:e.cctpData.messageBytes,signer:l}),s=await a.wait(),d=1===s.status?getStandardizedTimestamp(eN.O$.from(Date.now()).toString()):null;o({...e,resolvedAt:d,cctpData:{...e.cctpData,receiveMessageTimestamp:d,receiveMessageTransactionHash:1===s.status?s.transactionHash:null}});let c=getTargetChainIdFromSourceChain(e),u=(0,eU.pp)(c),{isEthereumMainnetOrTestnet:m}=(0,eU.CR)(c);if(shouldTrackAnalytics(u)&&trackEvent(m?"CCTP Withdrawal":"CCTP Deposit",{accountType:i?"Smart Contract":"EOA",network:u,amount:Number(e.value),complete:!0}),0===s.status)throw Error("Transaction failed")}catch(e){throw ei.Tb(e),e}finally{s(!1)}}},[i,n,l,e,o,r]);return{isClaiming:a,claim:d}}function getL1ChainIdFromSourceChain(e){var t;return(null===(t=e.cctpData)||void 0===t?void 0:t.sourceChainId)?({[eU.a_.Ethereum]:eU.a_.Ethereum,[eU.a_.Goerli]:eU.a_.Goerli,[eU.a_.ArbitrumOne]:eU.a_.Ethereum,[eU.a_.ArbitrumGoerli]:eU.a_.Goerli})[e.cctpData.sourceChainId]:eU.a_.Ethereum}function getTargetChainIdFromSourceChain(e){var t;return(null===(t=e.cctpData)||void 0===t?void 0:t.sourceChainId)?({[eU.a_.Ethereum]:eU.a_.ArbitrumOne,[eU.a_.Goerli]:eU.a_.ArbitrumGoerli,[eU.a_.ArbitrumOne]:eU.a_.Ethereum,[eU.a_.ArbitrumGoerli]:eU.a_.Goerli})[e.cctpData.sourceChainId]:eU.a_.Ethereum}function useRemainingTime(e){let t=getL1ChainIdFromSourceChain(e),a=getBlockBeforeConfirmation(t),s=(0,eU.NM)(t),[r,n]=(0,Y.useState)("Calculating..."),[i,o]=(0,Y.useState)(),[l,d]=(0,Y.useState)("Confirmed"===e.status||"Executed"===e.status);return(0,Y.useEffect)(()=>{"Failure"===e.status&&n("")},[e.status,n]),(0,Y.useEffect)(()=>{e.createdAt&&"Failure"!==e.status&&o(ek()(e.createdAt).add(a*s,"seconds"))},[s,a,e.createdAt,e.status]),(0,ai.Z)(()=>{i&&(ek()().isAfter(i)?d(!0):n(i.fromNow().toString()))},2e3),{remainingTime:r,isConfirmed:l}}function onTxError(e){isUserRejectedError(e)||ei.Tb(e)}(g=G||(G={}))[g.IDLE=0]="IDLE",g[g.OPEN=1]="OPEN",g[g.CLOSED=2]="CLOSED";let au={[eU.a_.ArbitrumOne]:[{symbol:"MIM",l2CustomAddr:"0xFEa7a6a0B346362BF88A9e4A88416B77a57D6c2A",l1Address:"0x99D8a9C45b2ecA8864373A26D1459e3Dff1e17F3",l2Address:"0xB20A02dfFb172C474BC4bDa3fD6f4eE70C04daf2"},{symbol:"SPA",l2CustomAddr:"0x5575552988A3A80504bBaeB1311674fCFd40aD4B",l1Address:"0xB4A3B0Faf0Ab53df58001804DdA5Bfc6a3D59008",l2Address:"0xe5a5Efe7ec8cdFA5F031D5159839A3b5E11B2e0F"},{symbol:"FST",l2CustomAddr:"0x90e81b81307ece4257c1bb74bea94f5232cece53",l1Address:"0x0e192d382a36de7011f795acc4391cd302003606",l2Address:"0x488cc08935458403a0458e45E20c0159c8AB2c92"},{symbol:"stETH",l2CustomAddr:"",l1Address:"0xae7ab96520DE3A18E5e111B5EaAb095312D7fE84",l2Address:""},{symbol:"renBTC",l2CustomAddr:"0xdbf31df14b66535af65aac99c32e9ea844e14501",l1Address:"0xEB4C2781e4ebA804CE9a9803C67d0893436bB27D",l2Address:"0x3E06AF0fBB92D1f6e5c6008fcec81130D0cC65a3"},{symbol:"STG",l2CustomAddr:"0x6694340fc020c5e6b96567843da2df01b2ce1eb6",l1Address:"0xaf5191b0de278c7286d6c7cc6ab6bb8a73ba2cd6",l2Address:"0xe018c7a3d175fb0fe15d70da2c874d3ca16313ec"},{symbol:"HND",l2CustomAddr:"0x10010078a54396f62c96df8532dc2b4847d47ed3",l1Address:"0x10010078a54396F62c96dF8532dc2B4847d47ED3",l2Address:"0x626195b5a8b5f865E3516201D6ac30ee1B46A6e9"},{symbol:"FXS",l2CustomAddr:"0x9d2F299715D94d8A7E6F5eaa8E654E8c74a988A7",l1Address:"0x3432B6A60D23Ca0dFCa7761B7ab56459D9C964D0",l2Address:"0xd9f9d2Ee2d3EFE420699079f16D9e924affFdEA4"},{symbol:"gOHM",l2CustomAddr:"0x8D9bA570D6cb60C7e3e0F31343Efe75AB8E65FB1",l1Address:"0x0ab87046fBb341D058F17CBC4c1133F25a20a52f",l2Address:"0x0D5f2b781A13722bA19e35857Fb6676594824960"},{symbol:"alUSD",l2CustomAddr:"0xCB8FA9a76b8e203D8C3797bF438d8FB81Ea3326A",l1Address:"0xbc6da0fe9ad5f3b0d58160288917aa56653660e9",l2Address:"0x95d2C35934f4eA0076E6f5e8d6edd8080666F84e"},{symbol:"alETH",l2CustomAddr:"",l1Address:"0x0100546F2cD4C9D97f798fFC9755E47865FF7Ee6",l2Address:"0xC05A105F4EC1ef28a4e7c0cb30Cb791B40FdD66B"},{symbol:"gALCX",l2CustomAddr:"0x870d36B8AD33919Cc57FFE17Bb5D3b84F3aDee4f",l1Address:"0x93dede06ae3b5590af1d4c111bc54c3f717e4b35",l2Address:"0xEa4d9cE1fE1134528402A79f7B7Eacf87a930C8F"},{symbol:"USX",l2CustomAddr:"0x641441c631e2f909700d2f41fd87f0aa6a6b4edb",l1Address:"0x0a5e677a6a24b2f1a2bf4f3bffc443231d2fdec8",l2Address:"0xcd14C3A2ba27819B352aae73414A26e2b366dC50"},{symbol:"SYN",l2CustomAddr:"0x080f6aed32fc474dd5717105dba5ea57268f46eb",l1Address:"0x0f2d719407fdbeff09d87557abb7232601fd9f29",l2Address:"0x1bcfc0b4ee1471674cd6a9f6b363a034375ead84"},{symbol:"EMAX",l2CustomAddr:"0x123389C2f0e9194d9bA98c21E63c375B67614108",l1Address:"0x15874d65e649880c2614e7a480cb7c9A55787FF6",l2Address:"0x94293e4e6ab410E898aa68318D0A964106Ff3257"},{symbol:"RELAY",l2CustomAddr:"0x1426CF37CAA89628C4DA2864e40cF75E6d66Ac6b",l1Address:"0x5D843Fa9495d23dE997C394296ac7B4D721E841c",l2Address:"0xaFB5E28Be361248c18bf26647C3D0F1f141129a7"},{symbol:"tBTC",l2CustomAddr:"0x6c84a8f1c29108F47a79964b5Fe888D4f4D0dE40",l1Address:"0x18084fba666a33d37592fa2633fd49a74dd93a88",l2Address:"0x7E2a1eDeE171C5B19E6c54D73752396C0A572594"},{symbol:"RDNT",l2CustomAddr:"0x3082CC23568eA640225c2467653dB90e9250AaA0",l1Address:"0x137dDB47Ee24EaA998a535Ab00378d6BFa84F893",l2Address:"0xa4431f62db9955bfd056c30e5ae703bf0d0eaec8"}],[eU.a_.ArbitrumNova]:[]},am={[eU.a_.ArbitrumOne]:[{symbol:"rDPX",l1Address:"0x0ff5A8451A839f5F0BB3562689D9A44089738D11",l2Address:"0x32Eb7902D4134bf98A28b963D26de779AF92A212"}]};function ready(){return{transferReady:{deposit:!0,withdrawal:!0}}}function notReady(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{errorMessage:void 0};return{transferReady:{deposit:!1,withdrawal:!1},...e}}let isAllowedL2=async e=>{let{l1TokenAddress:t,l2TokenAddress:a,walletAddress:s,amountNeeded:r,l2Provider:n}=e,i=eE.ERC20__factory.connect(a,n),o=await fetchErc20L2GatewayAddress({erc20L1Address:t,l2Provider:n});return(await i.allowance(s,o)).gte(r)},networkConnectionWarningToast=()=>(0,ep.Iv)((0,z.jsxs)(z.Fragment,{children:["Network connection issue. Please contact"," ",(0,z.jsx)(ed.d,{href:ex.sR,className:"underline",children:"support"}),"."]}));function TransferPanel(){let e=function(){let[{token:e}]=useArbQueryParams();if(e&&(0,tu.isAddress)(e))return e}(),[t,a]=(0,Y.useState)("new-token"),[s,r]=(0,Y.useState)(G.IDLE),[n,i]=(0,Y.useState)(!1),{app:{connectionState:o,selectedToken:l,isDepositMode:d,arbTokenBridgeLoaded:c,arbTokenBridge:{eth:u,token:m},warningTokens:p}}=tt(),{layout:h}=useAppContextState(),{isTransferring:x}=h,{address:f,isConnected:g}=(0,X.mA)(),b=(0,X.yL)(),{switchNetworkAsync:w}=useSwitchNetworkWithConfig({isSwitchingNetworkBeforeTx:!0}),C=(0,tm.Z)(b),A=useNetworksAndSigners(),T=(0,tm.Z)(A),{l1:{network:k,provider:N},l2:{network:j,provider:D}}=A,{isEOA:E,isSmartContractWallet:L}=useAccountType(),{data:I}=(0,X.mx)({chainId:k.id}),{data:R}=(0,X.mx)({chainId:j.id}),{setPendingTransfer:M}=useCctpFetching({l1ChainId:k.id,l2ChainId:j.id,walletAddress:f,pageSize:10,pageNumber:0,type:"all"}),{openTransactionHistoryPanel:U,setTransferring:O,showCctpDepositsTransactions:_,showCctpWithdrawalsTransactions:B,setTransactionHistoryTab:F}=useAppContextActions(),{isArbitrumNova:W}=(0,eU.CR)(j.id),H=(0,tm.Z)(u),Z=(0,tm.Z)(m),V=(0,tm.Z)(useIsConnectedToArbitrum()),K=(0,tm.Z)(useIsConnectedToOrbitChain()),{depositButtonColorClassName:q,withdrawalButtonColorClassName:J}=function(){let{l1:{network:e},l2:{network:t}}=useNetworksAndSigners(),a=(0,Y.useMemo)(()=>{let{isArbitrumNova:e,isXaiTestnet:a,isStylusTestnet:s,isOrbitChain:r,isInspace:n}=(0,eU.CR)(t.id);return n||a?"bg-xai-dark":s?"bg-stylus-dark":e?"bg-arb-nova-dark":r?"bg-orbit-dark":"bg-arb-one-dark"},[t.id]),s=(0,Y.useMemo)(()=>{let{isArbitrumNova:a}=(0,eU.CR)(e.id),{isArbitrum:s}=(0,eU.CR)(t.id);return s?"bg-eth-dark":a?"bg-arb-nova-dark":"bg-arb-one-dark"},[e.id,t.id]);return{depositButtonColorClassName:a,withdrawalButtonColorClassName:s}}(),[{amount:Q},$]=useArbQueryParams(),ee=(0,Y.useCallback)(e=>{$({amount:e})},[$]),{approveForBurn:ea,depositForBurn:es}=useCCTP({sourceChainId:d?T.current.l1.network.id:T.current.l2.network.id}),[er,en]=useDialog(),[ed,ec]=useDialog(),[eu,em]=useDialog(),[eh,ef]=useDialog(),[eg,eb]=useDialog(),[ew,ey]=useDialog(),[eC,eT]=useDialog(),{eth:[ek],erc20:[eN]}=useBalance({provider:N,walletAddress:f}),{eth:[eS],erc20:[eE]}=useBalance({provider:D,walletAddress:f}),eL=useNativeCurrency({provider:D}),[eI,eR]=(0,Y.useState)(null),[eM,eO]=(0,Y.useState)(!1),{destinationAddress:e_}=t1();function clearAmountInput(){ee("")}!function(e){let{importTokenModalStatus:t,connectionState:a,setImportTokenModalStatus:s}=e;(0,Y.useEffect)(()=>{t===G.IDLE&&(a===et.em.L1_CONNECTED||a===et.em.L2_CONNECTED)&&s(G.OPEN)},[a,t,s])}({importTokenModalStatus:s,connectionState:o,setImportTokenModalStatus:r});let eB=(0,Y.useMemo)(()=>ek?parseFloat(ej.formatEther(ek)):null,[ek]),eP=(0,Y.useMemo)(()=>eS?parseFloat(ej.formatEther(eS)):null,[eS]),eF=(0,Y.useMemo)(()=>{if(!l)return null;let e=null==eN?void 0:eN[l.address.toLowerCase()];return e?parseFloat(ej.formatUnits(e,l.decimals)):null},[l,eN]),eG=(0,Y.useMemo)(()=>{if(!l)return null;let e=isTokenArbitrumOneNativeUSDC(l.address)||isTokenArbitrumGoerliNativeUSDC(l.address),t=e?l.address.toLowerCase():(l.l2Address||"").toLowerCase(),a=null==eE?void 0:eE[t];return a?parseFloat(ej.formatUnits(a,l.decimals)):null},[l,eE]),eW=(0,Y.useMemo)(()=>{if(!eL.isCustom)return null;let e=null==eN?void 0:eN[eL.address];return e?parseFloat(ej.formatUnits(e,eL.decimals)):null},[eL,eN]),eH=(0,Y.useMemo)(()=>{let e=void 0!==k,t=null!==l&&void 0===l.l2Address;return e&&d&&t},[k,d,l]),eZ=(0,Y.useMemo)(()=>!!l&&Object.keys(tZ).map(e=>e.toLowerCase()).includes(l.address.toLowerCase()),[l]);async function depositToken(){if(!l)throw Error("Invalid app state: no selected token");let e=function(){let e=null;if(eH)e="new-token";else{let t=l&&(null==l?void 0:l.listIds.size)===0&&void 0===l.l2Address;t&&(e="user-added-token")}return e}();if(e){a(e);let t=en(),[s]=await t();s&&transfer()}else transfer()}async function approveCustomFeeTokenForInbox(){if(void 0===f)throw Error("walletAddress is undefined");if(!I)throw Error("failed to find signer");let e=await ev.EthBridger.fromProvider(D),{l2Network:t}=e;if(void 0===t.nativeToken)throw Error("l2 network does not use custom fee token");let a=await fetchErc20Allowance({address:t.nativeToken,provider:N,owner:f,spender:t.ethBridge.inbox}),s=ej.parseUnits(Q,eL.decimals);if(!a.gte(s)){let t=em(),[a]=await t();if(!a)return!1;let s=await e.approveFeeToken({l1Signer:I});await s.wait()}return!0}async function approveCustomFeeTokenForGateway(){if(void 0===f)throw Error("walletAddress is undefined");if(!I)throw Error("failed to find signer");if(!l)throw Error("no selected token");let e=await ev.Erc20Bridger.fromProvider(D),t=e.l2Network;if(void 0===t.nativeToken)throw Error("l2 network does not use custom fee token");let a=await fetchErc20L1GatewayAddress({erc20L1Address:l.address,l1Provider:N,l2Provider:D}),s=await fetchErc20Allowance({address:t.nativeToken,provider:N,owner:f,spender:a}),r=ej.parseUnits(String(eX.estimatedL2GasFees),eL.decimals);if(!s.gte(r)){let t=em(),[a]=await t();if(!a)return!1;let s=await e.approveFeeToken({erc20L1Address:l.address,l1Signer:I});await s.wait()}return!0}let ez=(0,Y.useMemo)(()=>{try{let e=Q||"0";if(l)return ej.parseUnits(e,l.decimals);return ej.parseUnits(e,eL.decimals)}catch(e){return eD._Y}},[Q,l,eL]),showDelayedSCTxRequest=()=>setTimeout(()=>{O(!1),i(!0)},3e3),transferCctp=async e=>{if(!l||!f)return;let t="deposits"===e,a=t?I:R;if(!a)throw"Signer is undefined";O(!0);let s=t?T.current.l1.network:T.current.l2.network,r=(0,eU.pp)(s.id),n=t&&V.current||"withdrawals"===e&&!V.current;if(n){shouldTrackAnalytics(r)&&trackEvent("Switch Network and Transfer",{type:t?"Deposit":"Withdrawal",tokenSymbol:"USDC",assetType:"ERC-20",accountType:L?"Smart Contract":"EOA",network:r,amount:Number(Q)});let e=t?T.current.l1.network.id:T.current.l2.network.id;try{await (null==w?void 0:w(e)),s=t?T.current.l1.network:T.current.l2.network}catch(e){if(isUserRejectedError(e))return}}try{var i,o;let s;let n=T.current.l1.network.id,d=T.current.l2.network.id,c=t?n:d,u=t?eT():ey(),[m,p]=await u();if(!m)return;if(t&&"bridged"===p){depositToken();return}let h=await function(e){let{sourceChainId:t}=e,{usdcContractAddress:a,tokenMinterContractAddress:s}=useCCTP_getContracts(t);return(0,eA.a4)({address:s,chainId:t,abi:an,functionName:"burnLimitsPerMessage",args:[a]})}({sourceChainId:c});if(h.lte(ez)){let e=formatAmount(h,{decimals:l.decimals,symbol:"USDC"});(0,ep.Jc)("The limit for transfers using CCTP is ".concat(e,". Please lower your amount and try again."));return}let x=e_||f,{usdcContractAddress:g,tokenMessengerContractAddress:b}=useCCTP_getContracts(c),w=await fetchErc20Allowance({address:g,provider:"deposits"===e?N:D,owner:f,spender:b});if(w.lt(ez)){eR(w),eO(!0);let e=ec(),[t]=await e();if(!t)return;try{L&&showDelayedSCTxRequest();let e=await ea(ez,a);await e.wait()}catch(e){if(isUserRejectedError(e))return;ei.Tb(e),(0,ep.Jc)("USDC approval transaction failed: ".concat(null!==(i=null==e?void 0:e.message)&&void 0!==i?i:e));return}}try{L&&showDelayedSCTxRequest(),s=await es({amount:ez,signer:a,recipient:e_||f})}catch(e){if(isUserRejectedError(e))return;ei.Tb(e),(0,ep.Jc)("USDC deposit transaction failed: ".concat(null!==(o=null==e?void 0:e.message)&&void 0!==o?o:e))}if(L){shouldTrackAnalytics(r)&&trackEvent(t?"CCTP Deposit":"CCTP Withdrawal",{accountType:"Smart Contract",network:r,amount:Number(Q),complete:!1});return}if(!s)return;shouldTrackAnalytics(r)&&trackEvent(t?"CCTP Deposit":"CCTP Withdrawal",{accountType:"EOA",network:r,amount:Number(Q),complete:!1});let C={txId:s.hash,asset:"USDC",assetType:v.ERC20,blockNum:null,createdAt:getStandardizedTimestamp(new Date().toString()),direction:t?"deposit":"withdraw",isWithdrawal:!t,resolvedAt:null,status:"pending",uniqueId:null,value:Q,depositStatus:S.CCTP_DEFAULT_STATE,destination:x,sender:f,isCctp:!0,tokenAddress:getUsdcTokenAddressFromSourceChainId(c),cctpData:{sourceChainId:c}};M(C,t?"deposit":"withdrawal"),t?_():B(),F(y.CCTP),U(),O(!1),clearAmountInput();let A=await s.wait(),{messageBytes:k,attestationHash:j}=getAttestationHashAndMessageFromReceipt(A);if(0===A.status){(0,ep.Jc)("USDC deposit transaction failed");return}k&&j&&M({txId:s.hash,blockNum:A.blockNumber,status:"Unconfirmed",cctpData:{attestationHash:j,messageBytes:k}},t?"deposit":"withdrawal")}catch(e){}finally{O(!1),eO(!1)}},transfer=async()=>{let e="Signer is undefined";if(!g||!f)return;let t=I&&R;if(E&&!t)throw e;let a=await getDestinationAddressError({destinationAddress:e_,isSmartContractWallet:L});if(a){console.error(a);return}if(L&&!l){console.error("ETH transfers aren't enabled for smart contract wallets.");return}let s=[k.id,j.id].every(e=>{let{isEthereumMainnetOrTestnet:t,isOrbitChain:a}=(0,eU.CR)(e);return t||a});if(s){console.error("Cannot transfer funds between L1 and/or Orbit chains.");return}let r=(0,eU.pp)(j.id);O(!0);try{var n,i,o,u,m,h;if(d){if(!I)throw e;let t=l&&p[l.address.toLowerCase()];if(t){let e=function(e){switch(e){case 0:return"a supply rebasing token";case 1:return"an interest accruing token";default:return"a non-standard ERC20 token"}}(t.type);return window.alert("".concat(null==l?void 0:l.address," is ").concat(e,"; it will likely have unusual behavior when deployed as as standard token to Arbitrum. It is not recommended that you deploy it. (See ").concat(ex.Gc,"/for-devs/concepts/token-bridge/token-bridge-erc20 for more info.)"))}let a=(0,eU.CR)(k.id).isEthereumMainnetOrTestnet;if(V.current&&a||K.current){for(shouldTrackAnalytics(r)&&trackEvent("Switch Network and Transfer",{type:"Deposit",tokenSymbol:null==l?void 0:l.symbol,assetType:l?"ERC-20":"ETH",accountType:L?"Smart Contract":"EOA",network:r,amount:Number(Q)}),await (null==w?void 0:w(T.current.l1.network.id));V.current&&a||K.current||!H.current||!c;)await new Promise(e=>setTimeout(e,100));await new Promise(e=>setTimeout(e,3e3))}let s=T.current.l1.network.id,o=null===(i=C.current)||void 0===i?void 0:null===(n=i.network)||void 0===n?void 0:n.chainId;if(!(s&&o&&s===o)||K.current)return networkConnectionWarningToast();if(l){let{decimals:e}=l,t=ej.parseUnits(Q,e),a=await getL2ERC20Address({erc20L1Address:l.address,l1Provider:N,l2Provider:D});if(l.l2Address&&l.l2Address.toLowerCase()!==a.toLowerCase()){alert("Depositing is currently suspended for this token as a new gateway is being registered. Please try again later and contact support if this issue persists.");return}if(eZ){let e=eb(),[t]=await e();if(!t)return}if(eL.isCustom){let e=await approveCustomFeeTokenForGateway();if(!e)return}let s=await fetchErc20L1GatewayAddress({erc20L1Address:l.address,l1Provider:N,l2Provider:D}),n=await fetchErc20Allowance({address:l.address,provider:N,owner:f,spender:s});if(!n.gte(t)){eR(eI);let e=ec(),[t]=await e();if(!t)return!1;await Z.current.approve({erc20L1Address:l.address,l1Signer:I})}L&&(showDelayedSCTxRequest(),shouldTrackAnalytics(r)&&trackEvent("Deposit",{tokenSymbol:l.symbol,assetType:"ERC-20",accountType:"Smart Contract",network:r,amount:Number(Q)})),await Z.current.deposit({erc20L1Address:l.address,amount:t,l1Signer:I,destinationAddress:e_,txLifecycle:{onTxSubmit:()=>{F(y.DEPOSITS),U(),O(!1),clearAmountInput(),!L&&shouldTrackAnalytics(r)&&trackEvent("Deposit",{tokenSymbol:l.symbol,assetType:"ERC-20",accountType:"EOA",network:r,amount:Number(Q)})},onTxError:onTxError}})}else{if(eL.isCustom){let e=await approveCustomFeeTokenForInbox();if(!e)return}await H.current.deposit({amount:ej.parseUnits(Q,eL.decimals),l1Signer:I,txLifecycle:{onTxSubmit:()=>{F(y.DEPOSITS),U(),O(!1),clearAmountInput(),!L&&shouldTrackAnalytics(r)&&trackEvent("Deposit",{assetType:"ETH",accountType:"EOA",network:r,amount:Number(Q)})},onTxError:onTxError}})}}else{if(!R)throw e;let t=!V.current&&!K.current,{isOrbitChain:a}=(0,eU.CR)(j.id);if(t||V.current&&a){for(shouldTrackAnalytics(r)&&trackEvent("Switch Network and Transfer",{type:"Withdrawal",tokenSymbol:null==l?void 0:l.symbol,assetType:l?"ERC-20":"ETH",accountType:L?"Smart Contract":"EOA",network:r,amount:Number(Q)}),await (null==w?void 0:w(T.current.l2.network.id));!V.current&&!K.current||V.current&&a||!H.current||!c;)await new Promise(e=>setTimeout(e,100));await new Promise(e=>setTimeout(e,3e3))}if(!L){let e=ef(),[t]=await e();if(!t)return}let s=T.current.l2.network.id,n=null===(u=C.current)||void 0===u?void 0:null===(o=u.network)||void 0===o?void 0:o.chainId;if(!(s&&n&&+s===n))return networkConnectionWarningToast();if(l){let{decimals:e}=l,t=ej.parseUnits(Q,e);if(m=l.address,(null!==(h=ar[s])&&void 0!==h?h:[]).map(e=>e.l1Address.toLowerCase()).includes(m.toLowerCase())&&l.l2Address){let e=await isAllowedL2({l1TokenAddress:l.address,l2TokenAddress:l.l2Address,walletAddress:f,amountNeeded:t,l2Provider:T.current.l2.provider});e||(L&&showDelayedSCTxRequest(),await Z.current.approveL2({erc20L1Address:l.address,l2Signer:R}))}L&&(showDelayedSCTxRequest(),shouldTrackAnalytics(r)&&trackEvent("Withdraw",{tokenSymbol:l.symbol,assetType:"ERC-20",accountType:"Smart Contract",network:r,amount:Number(Q)})),await Z.current.withdraw({erc20L1Address:l.address,amount:t,l2Signer:R,destinationAddress:e_,txLifecycle:{onTxSubmit:()=>{F(y.WITHDRAWALS),U(),O(!1),clearAmountInput(),!L&&shouldTrackAnalytics(r)&&trackEvent("Withdraw",{tokenSymbol:l.symbol,assetType:"ERC-20",accountType:"EOA",network:r,amount:Number(Q)})},onTxError:onTxError}})}else await H.current.withdraw({amount:ej.parseUnits(Q,eL.decimals),l2Signer:R,txLifecycle:{onTxSubmit:()=>{F(y.WITHDRAWALS),U(),O(!1),clearAmountInput(),!L&&shouldTrackAnalytics(r)&&trackEvent("Withdraw",{assetType:"ETH",accountType:"EOA",network:r,amount:Number(Q)})},onTxError:onTxError}})}}catch(e){console.log(e)}finally{O(!1)}},eY=(0,Y.useMemo)(()=>{let e;return!!(e=l?d?eF:eG:eL.isCustom?d?eW:eP:d?eB:eP)&&Number(Q)<=e},[Q,l,d,eL,eB,eP,eF,eG,eW]),eX=function(e,t,a){let{app:{arbTokenBridge:s,isDepositMode:r}}=tt(),n=useNetworksAndSigners(),{l1:i,l2:o}=n,{address:l}=(0,X.mA)(),d=useGasPrice({provider:i.provider}),c=useGasPrice({provider:o.provider}),u=useDebouncedValue(e,1500),[m,p]=(0,Y.useState)("idle"),[h,x]=(0,Y.useState)({estimatedL1Gas:eD._Y,estimatedL2Gas:eD._Y,estimatedL2SubmissionCost:eD._Y}),f=(0,Y.useMemo)(()=>{let e=r?d:c;return parseFloat(ej.formatEther(h.estimatedL1Gas.mul(e)))},[h.estimatedL1Gas,r,d,c]),g=(0,Y.useMemo)(()=>parseFloat(ej.formatEther(h.estimatedL2Gas.mul(c).add(h.estimatedL2SubmissionCost))),[h.estimatedL2Gas,c,h.estimatedL2SubmissionCost]);return(0,Y.useEffect)(()=>{a&&p("loading")},[e,a]),(0,Y.useEffect)(()=>{async function estimateGas(){if(u.eq(e)){if(u.isZero()||!a){p("idle");return}if(l)try{if(p("loading"),r){if(t){let a=await depositTokenEstimateGas({amount:e,address:l,erc20L1Address:t.address,l1Provider:i.provider,l2Provider:o.provider});x(a)}else{let e=await depositEthEstimateGas({amount:u,address:l,l1Provider:i.provider,l2Provider:o.provider});x(e)}}else if(t){let e;if(isTokenArbitrumOneNativeUSDC(t.address)||isTokenArbitrumGoerliNativeUSDC(t.address)){e={estimatedL1Gas:eD._Y,estimatedL2Gas:eD._Y},p("unavailable");return}e=await withdrawTokenEstimateGas({amount:u,erc20L1Address:t.address,address:l,l2Provider:o.provider}),x({...e,estimatedL2SubmissionCost:eD._Y})}else{let e=await withdrawEthEstimateGas({amount:u,address:l,l2Provider:o.provider});x({...e,estimatedL2SubmissionCost:eD._Y})}p("success")}catch(e){console.error(e),p("error")}}}s&&s.eth&&s.token&&estimateGas()},[r,e,u,t,a,i.network.id,o.network.id,l]),{status:m,estimatedL1GasFees:f,estimatedL2GasFees:g}}(ez,l,eY),{transferReady:eV,errorMessage:eK}=function(e){let{amount:t,gasSummary:a}=e,{app:{isDepositMode:s,selectedToken:r}}=tt(),{layout:{isTransferring:n}}=useAppContextState(),{l1:{provider:i,network:o},l2:{provider:l,network:d}}=useNetworksAndSigners(),{address:c}=(0,X.mA)(),{isSmartContractWallet:u}=useAccountType(),m=useIsSwitchingL2Chain(),p=useNativeCurrency({provider:l}),{eth:[h],erc20:[x]}=useBalance({provider:i,walletAddress:c}),{eth:[f],erc20:[g]}=useBalance({provider:l,walletAddress:c}),{error:b}=t1(),w=(0,Y.useMemo)(()=>h?parseFloat(ej.formatEther(h)):null,[h]),y=(0,Y.useMemo)(()=>f?parseFloat(ej.formatEther(f)):null,[f]),C=(0,Y.useMemo)(()=>{if(!r)return null;let e=null==x?void 0:x[r.address.toLowerCase()];return e?parseFloat(ej.formatUnits(e,r.decimals)):null},[r,x]),v=(0,Y.useMemo)(()=>{if(!r)return null;let e=isTokenArbitrumOneNativeUSDC(r.address)||isTokenArbitrumGoerliNativeUSDC(r.address),t=e?r.address.toLowerCase():(r.l2Address||"").toLowerCase(),a=null==g?void 0:g[t];return a?parseFloat(ej.formatUnits(a,r.decimals)):null},[r,g]),A=(0,Y.useMemo)(()=>{if(!p.isCustom)return null;let e=null==x?void 0:x[p.address];return e?parseFloat(ej.formatUnits(e,p.decimals)):null},[p,x]);return(0,Y.useMemo)(()=>{var e,i,l,c,h;if(!t||n||m)return notReady();if(u&&!r)return notReady({errorMessage:function(e){let{asset:t}=e;return"".concat(t," transfers using smart contract wallets aren't supported yet.")}({asset:p.symbol})});if(b)return notReady();let x=s?o.name:d.name,f=s?w:y,g=s?C:v,T=s?A:y;if(null===f)return notReady();if(r){let a=(e=r.address,(null!==(i=au[d.id])&&void 0!==i?i:[]).map(e=>e.l1Address.toLowerCase()).includes(e.toLowerCase())),n=(l=r.address,(null!==(c=am[d.id])&&void 0!==c?c:[]).map(e=>e.l1Address.toLowerCase()).includes(l.toLowerCase()));if(s&&a)return notReady({errorMessage:P.TOKEN_WITHDRAW_ONLY});if(n)return notReady({errorMessage:P.TOKEN_TRANSFER_DISABLED});if(["0x0e192d382a36de7011f795acc4391cd302003606","0x488cc08935458403a0458e45e20c0159c8ab2c92"].includes(r.address.toLowerCase())||null===g)return notReady();if(Number(t)>g)return notReady({errorMessage:getInsufficientFundsErrorMessage({asset:r.symbol,chain:x})})}else if(p.isCustom){if(null===T)return notReady();if(Number(t)>T)return notReady({errorMessage:getInsufficientFundsErrorMessage({asset:p.symbol,chain:x})})}else if(Number(t)>f)return notReady({errorMessage:getInsufficientFundsErrorMessage({asset:ex.Xx.symbol,chain:x})});switch(a.status){case"idle":case"loading":return notReady();case"unavailable":return ready();case"error":return notReady({errorMessage:P.GAS_ESTIMATION_FAILURE});case"success":{let{estimatedL1GasFees:e,estimatedL2GasFees:n}=(h={isSmartContractWallet:u,isDepositMode:s}).isSmartContractWallet?h.isDepositMode?{estimatedL1GasFees:0,estimatedL2GasFees:a.estimatedL2GasFees}:{estimatedL1GasFees:0,estimatedL2GasFees:0}:{estimatedL1GasFees:a.estimatedL1GasFees,estimatedL2GasFees:a.estimatedL2GasFees};if(r){if(p.isCustom&&s){if(null===A)return notReady();if(e>f)return notReady({errorMessage:getInsufficientFundsForGasFeesErrorMessage({asset:ex.Xx.symbol,chain:x})});if(n>A)return notReady({errorMessage:getInsufficientFundsForGasFeesErrorMessage({asset:p.symbol,chain:x})});return ready()}if(e+n>f)return notReady({errorMessage:getInsufficientFundsForGasFeesErrorMessage({asset:ex.Xx.symbol,chain:x})});return ready()}if(p.isCustom&&s){if(e+n>f)return notReady({errorMessage:getInsufficientFundsForGasFeesErrorMessage({asset:ex.Xx.symbol,chain:x})});return ready()}let i=Number(t)+e+n;if(i>f)return notReady({errorMessage:getInsufficientFundsForGasFeesErrorMessage({asset:p.symbol,chain:x})});return ready()}}},[t,s,u,n,m,b,o,d,r,a,p,w,y,C,v,A])}({amount:Q,gasSummary:eX}),{isSummaryVisible:eq}=function(e){let{transferReady:{deposit:t,withdrawal:a},gasEstimationStatus:s}=e,{app:{isDepositMode:r}}=tt(),{layout:{isTransferring:n}}=useAppContextState(),i=useIsSwitchingL2Chain(),o=(0,Y.useMemo)(()=>!i&&"error"!==s&&(!!n||(r?t:a)),[i,s,n,r,t,a]);return{isSummaryVisible:o}}({transferReady:eV,gasEstimationStatus:eX.status});return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(TokenApprovalDialog,{...ed,amount:Q,allowance:eI,token:l,isCctp:eM}),eL.isCustom&&(0,z.jsx)(CustomFeeTokenApprovalDialog,{...eu,customFeeToken:eL}),(0,z.jsx)(WithdrawalConfirmationDialog,{...eh,amount:Q}),(0,z.jsx)(DepositConfirmationDialog,{...eg,amount:Q}),(0,z.jsx)(USDCWithdrawalConfirmationDialog,{...ew,amount:Q}),(0,z.jsx)(USDCDepositConfirmationDialog,{...eC,amount:Q}),(0,z.jsxs)("div",{className:"flex max-w-screen-lg flex-col space-y-6 bg-white shadow-[0px_4px_20px_rgba(0,0,0,0.2)] lg:flex-row lg:space-x-6 lg:space-y-0 lg:rounded-xl",children:[(0,z.jsx)(TransferPanelMain,{amount:Q,setAmount:ee,errorMessage:eK}),(0,z.jsx)("div",{className:"border-r border-gray-2"}),(0,z.jsxs)("div",{style:eq?{}:{background:"url(/images/ArbitrumFaded.webp)",backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},className:"transfer-panel-stats flex w-full flex-col justify-between bg-gray-2 px-6 py-6 lg:rounded-br-xl lg:rounded-tr-xl lg:bg-white lg:px-0 lg:pr-6",children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsxs)("div",{className:"hidden lg:block",children:[(0,z.jsx)("span",{className:"text-2xl text-gray-dark",children:"Summary"}),(0,z.jsx)("div",{className:"h-4"})]}),eq?(0,z.jsx)(TransferPanelSummary,{amount:parseFloat(Q),token:l,gasSummary:eX}):(0,z.jsx)("div",{className:"hidden text-lg text-gray-dark lg:block lg:min-h-[297px]",children:(0,z.jsx)("span",{className:"text-xl",children:"Bridging summary will appear here."})})]}),d?(0,z.jsx)(el,{variant:"primary",loading:x,disabled:!eV.deposit,onClick:()=>{l&&(isTokenMainnetUSDC(l.address)||isTokenGoerliUSDC(l.address))&&!W?transferCctp("deposits"):l?depositToken():transfer()},className:(0,eo.m6)("w-full bg-eth-dark py-4 text-lg lg:text-2xl",q),children:(0,z.jsx)("span",{className:"block w-[360px] truncate",children:L&&x?"Sending request...":"Move funds to ".concat((0,eU.pp)(j.id))})}):(0,z.jsx)(el,{variant:"primary",loading:x,disabled:!eV.withdrawal,onClick:()=>{l&&(isTokenArbitrumOneNativeUSDC(l.address)||isTokenArbitrumGoerliNativeUSDC(l.address))?transferCctp("withdrawals"):transfer()},className:(0,eo.m6)("w-full py-4 text-lg lg:text-2xl",J),children:(0,z.jsx)("span",{className:"block w-[360px] truncate",children:L&&x?"Sending request...":"Move funds to ".concat((0,eU.pp)(k.id))})})]}),void 0!==e&&(0,z.jsx)(TokenImportDialog,{isOpen:s===G.OPEN,onClose:()=>r(G.CLOSED),tokenAddress:e}),(0,z.jsx)(TokenDepositCheckDialog,{...er,type:t,symbol:l?l.symbol:eL.symbol}),n&&(0,z.jsx)(tc.ZP,{placement:"bottom-end",maxWidth:"auto",onClickOutside:()=>i(!1),theme:"orange",visible:n,content:(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)("span",{children:(0,z.jsx)("b",{children:"To continue, please approve tx on your smart contract wallet."})}),(0,z.jsx)("span",{children:"If you have k of n signers, then k of n will need to sign."})]}),children:(0,z.jsx)("div",{className:"!m-0"})})]})]})}async function getRetryableTicket(e){let{l1TxHash:t,retryableCreationId:a,l1Provider:s,l2Signer:r}=e;if(!a)throw Error("Error: Couldn't find retryable ticket creation id");let n=new ev.L1TransactionReceipt(await s.getTransactionReceipt(t)),i=(await n.getL1ToL2Messages(r)).find(e=>e.retryableCreationId===a);if(void 0===i)throw Error("Error: Couldn't find retryable ticket");return i}let getRetryableTicketExpiration=async e=>{let{l1TxHash:t,l1Provider:a,l2Provider:s}=e,r=!1,n=!1,i=0,o=0;try{let e=await a.getTransactionReceipt(t),r=new ev.L1TransactionReceipt(e),[l]=await r.getL1ToL2Messages(s),d=ek()(),c=await l.getTimeout();o=1e3*Number(c.toString()),(i=ek()(o).diff(d,"days"))>=0&&(n=!1)}catch(e){r=!0}return{isLoading:!1,isLoadingError:r,expirationDate:o,daysUntilExpired:i,isExpired:n}};function useRedeemRetryable(){let{app:{arbTokenBridge:e}}=tt(),{l1:{provider:t},l2:{network:a}}=useNetworksAndSigners(),{data:s}=(0,X.mx)(),r=(0,eU.pp)(a.id),[n,i]=(0,Y.useState)(!1);return{redeem:async function(a){let o;if(!n){try{var l;if(i(!0),!s)throw"Signer is undefined";o=await getRetryableTicket({l1TxHash:a.txId,retryableCreationId:null===(l=a.l1ToL2MsgData)||void 0===l?void 0:l.retryableCreationTxID,l1Provider:t,l2Signer:s})}catch(e){return i(!1),(0,ep.Jc)("There was an error, here is more information: ".concat(e.message))}try{let e=await o.redeem();await e.wait()}catch(e){if(isUserRejectedError(e))return;return(0,ep.Jc)("There was an error, here is more information: ".concat(e.message))}finally{i(!1),shouldTrackAnalytics(r)&&trackEvent("Redeem Retryable",{network:r})}e.transactions.fetchAndUpdateL1ToL2MsgStatus(a.txId,o,a.assetType===v.ETH,ev.L1ToL2MessageStatus.REDEEMED)}},isRedeeming:n}}function DepositCountdown(e){let{tx:t}=e,a=ek()(),s=t.createdAt,r=t.depositStatus,n=ek()(s);if(r===S.L1_PENDING||r===S.L2_PENDING){let e=function(e){if(!e)return 15;let{isEthereumMainnetOrTestnet:t,isTestnet:a}=(0,eU.CR)(e);return t?a?10:15:1}(t.parentChainId)-a.diff(n,"minutes");return(0,z.jsx)("span",{className:"whitespace-nowrap",children:e<=1?e<=0?"Almost there...":"Less than a minute...":"~".concat(e," mins remaining")})}return null}let TransactionsTableCustomAddressLabel=e=>{let{tx:t}=e;return(0,z.jsx)("div",{className:"absolute bottom-2 left-6 translate-x-0 rounded-md bg-black px-4 py-1 text-center text-sm text-white sm:left-[50%] sm:-translate-x-[50%]",children:(0,z.jsx)(CustomAddressTxExplorer,{tx:t})})};var ap=a(48709);function useClaimWithdrawal(){let{app:{arbTokenBridge:e}}=tt(),{data:t}=(0,X.mx)(),[a,s]=(0,Y.useState)(!1);return{claim:async function(r){let n,i;if(!a){if(null===r.uniqueId)return(0,ep.Jc)("Can't find withdrawal transaction.");s(!0);try{if(!t)throw"Signer is undefined";n=r.assetType===v.ETH?await e.eth.triggerOutbox({id:r.uniqueId.toString(),l1Signer:t}):await e.token.triggerOutbox({id:r.uniqueId.toString(),l1Signer:t})}catch(e){i=e}finally{s(!1)}if(!isUserRejectedError(i)&&(ei.Tb(i),!n)){var o;(0,ep.Jc)("Can't claim withdrawal: ".concat(null!==(o=null==i?void 0:i.message)&&void 0!==o?o:i))}}},isClaiming:a}}let GetHelpButton=e=>{let{variant:t,onClick:a}=e;return(0,z.jsx)(el,{variant:t,onClick:a,className:"secondary"===t?"bg-white px-4 py-3":"",children:"Get Help"})};function TransactionsTableRowAction(e){let{tx:t,isError:a,type:s}=e,{l1:{network:r},l2:{network:n}}=useNetworksAndSigners(),{switchNetwork:i}=useSwitchNetworkWithConfig(),o=(0,eU.pp)(r.id),l=(0,eU.pp)(n.id),d="deposits"===s?o:l,c=(0,X.xx)(),{claim:u,isClaiming:m}=useClaimWithdrawal(),{claim:p,isClaiming:h}=useClaimCctp(t),{isConfirmed:x}=useRemainingTime(t),{isEthereumMainnetOrTestnet:f,isArbitrum:g}=(0,eU.CR)(c),b=(0,Y.useMemo)(()=>{let e=(0,eU.CR)(n.id).isOrbitChain;return e?g:"deposits"===s&&g||"withdrawals"===s&&f},[g,f,n.id,s]),w=(0,Y.useMemo)(()=>m||h||!x,[m,h,x]),getHelpOnError=()=>{window.open(ex.sR,"_blank"),shouldTrackAnalytics(d)&&trackEvent("Tx Error: Get Help Click",{network:d})};if("Unconfirmed"===t.status)return(0,z.jsx)(Tooltip,{wrapperClassName:"",content:(0,z.jsx)("span",{children:"Funds aren't ready to claim yet"}),children:(0,z.jsx)(el,{variant:"primary",disabled:!0,children:"Claim"})});if("Confirmed"===t.status)return t.isCctp&&t.resolvedAt?null:(0,z.jsx)(Tooltip,{show:!b,wrapperClassName:"",content:(0,z.jsx)("span",{children:"Please switch to ".concat("deposits"===s?l:o," to claim your ").concat("deposits"===s?"deposit":"withdrawal",".")}),children:(0,z.jsx)(el,{variant:"primary",loading:m||h,disabled:w,className:(0,eo.m6)(!b&&"p-2 py-4 text-xs"),onClick:async()=>{try{if(!b)return null==i?void 0:i("deposits"===s?n.id:r.id);if(t.isCctp)return await p();return await u(t)}catch(t){var e;if(isUserRejectedError(t))return;(0,ep.Jc)("Can't claim ".concat("deposits"===s?"withdrawal":"deposit",": ").concat(null!==(e=null==t?void 0:t.message)&&void 0!==e?e:t))}},children:b?"Claim":"Switch Network"})});if(a){let e=ek()().diff(ek()(t.createdAt),"days")>7;return(0,z.jsx)(z.Fragment,{children:e?(0,z.jsxs)(t3.J,{children:[(0,z.jsx)(t3.J.Button,{children:(0,z.jsx)(ap.Z,{className:"h-6 w-6 cursor-pointer p-1 text-dark"})}),(0,z.jsx)(t3.J.Panel,{className:"absolute top-4 z-50 rounded-md bg-white shadow-lg",children:(0,z.jsx)(GetHelpButton,{variant:"secondary",onClick:getHelpOnError})})]}):(0,z.jsx)(GetHelpButton,{variant:"primary",onClick:getHelpOnError})})}return null}function DepositRowStatus(e){let{tx:t}=e,{parentLayer:a,layer:s}=useChainLayers();switch(t.depositStatus){case S.L1_PENDING:return(0,z.jsx)(StatusBadge,{variant:"yellow","aria-label":"".concat(a," Transaction Status"),children:"Pending"});case S.L1_FAILURE:return(0,z.jsx)(StatusBadge,{variant:"red","aria-label":"".concat(a," Transaction Status"),children:"Failed"});case S.L2_PENDING:return(0,z.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,z.jsx)(StatusBadge,{variant:"green","aria-label":"".concat(a," Transaction Status"),children:"Success"}),(0,z.jsx)(StatusBadge,{variant:"yellow","aria-label":"".concat(s," Transaction Status"),children:"Pending"})]});case S.CREATION_FAILED:case S.L2_FAILURE:return(0,z.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,z.jsx)(StatusBadge,{variant:"green","aria-label":"".concat(a," Transaction Status"),children:"Success"}),(0,z.jsx)(StatusBadge,{variant:"red","aria-label":"".concat(s," Transaction Status"),children:"Failed"})]});case S.L2_SUCCESS:return(0,z.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,z.jsx)(StatusBadge,{variant:"green","aria-label":"".concat(a," Transaction Status"),children:"Success"}),(0,z.jsx)(StatusBadge,{variant:"green","aria-label":"".concat(s," Transaction Status"),children:"Success"})]});case S.EXPIRED:return(0,z.jsx)("div",{className:"flex flex-col space-y-1",children:(0,z.jsx)(StatusBadge,{variant:"red","aria-label":"".concat(a," Transaction Status"),children:"Failed"})});default:return null}}function DepositRowTime(e){let{tx:t}=e,{parentLayer:a,layer:s}=useChainLayers();return t.depositStatus===S.L1_PENDING||t.depositStatus===S.L2_PENDING?(0,z.jsx)(DepositCountdown,{tx:t}):(0,z.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,z.jsx)(Tooltip,{content:(0,z.jsxs)("span",{children:[a," Transaction Time"]}),children:(0,z.jsx)(TransactionDateTime,{standardizedDate:t.createdAt})}),t.resolvedAt&&(0,z.jsx)(Tooltip,{content:(0,z.jsxs)("span",{children:[s," Transaction Time"]}),children:(0,z.jsx)(TransactionDateTime,{standardizedDate:t.resolvedAt})})]})}function DepositRowTxID(e){var t,a,s;let{tx:r}=e,{l1:n,l2:i}=useNetworksAndSigners(),{parentLayer:o,layer:l}=useChainLayers(),d=(null===(t=r.l1ToL2MsgData)||void 0===t?void 0:t.l2TxID)?null===(s=r.l1ToL2MsgData)||void 0===s?void 0:s.l2TxID:r.isCctp&&(null===(a=r.cctpData)||void 0===a?void 0:a.receiveMessageTransactionHash);return(0,z.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,z.jsxs)("span",{className:"flex flex-nowrap items-center gap-1 whitespace-nowrap text-dark","aria-label":"".concat(o," Transaction Link"),children:[(0,z.jsx)("span",{className:"rounded-md px-2 text-xs text-dark",children:"Step 1"}),(0,eU.pp)(n.network.id),":"," ",(0,z.jsx)(ed.d,{href:"".concat((0,eU.jY)(n.network.id),"/tx/").concat(r.txId),className:"arb-hover text-blue-link",children:shortenTxHash(r.txId)})]}),d&&(0,z.jsxs)("span",{className:"flex flex-nowrap items-center gap-1 whitespace-nowrap text-dark","aria-label":"".concat(l," Transaction Link"),children:[(0,z.jsx)("span",{className:"rounded-md px-2 text-xs text-dark",children:"Step 2"}),(0,eU.pp)(i.network.id),":"," ",(0,z.jsx)(ed.d,{href:"".concat((0,eU.jY)(i.network.id),"/tx/").concat(d),className:"arb-hover text-blue-link",children:shortenTxHash(d)})]})]})}function TransactionsTableDepositRow(e){let{tx:t,className:a=""}=e,{l1:s}=useNetworksAndSigners(),{address:r}=(0,X.mA)(),{redeem:n,isRedeeming:i}=useRedeemRetryable(),o=useIsConnectedToArbitrum(),l=(0,Y.useMemo)(()=>void 0===o||!o,[o]),d=(0,Y.useMemo)(()=>t.depositStatus===S.L1_FAILURE||t.depositStatus===S.EXPIRED||t.depositStatus===S.CREATION_FAILED&&t.assetType===v.ETH,[t]),c=(0,Y.useMemo)(()=>isDepositReadyToRedeem(t),[t]),u=(0,Y.useMemo)(()=>t.depositStatus===S.EXPIRED,[t]),m=(0,Y.useMemo)(()=>d||c||u?"bg-brick":isPending(t)?"bg-orange":"",[t,d,c,u]),p=(0,Y.useMemo)(()=>sanitizeTokenSymbol(t.asset,{erc20L1Address:t.tokenAddress,chain:s.network}),[s.network,t.asset,t.tokenAddress]),h=(0,Y.useMemo)(()=>isCustomDestinationAddressTx(t)?"pb-11":"",[t]);return t.sender&&r?(0,z.jsxs)("tr",{className:(0,eo.m6)("relative text-sm text-dark",m||"bg-cyan even:bg-white",a),"data-testid":"deposit-row-".concat(t.txId),children:[(0,z.jsx)("td",{className:(0,eo.m6)("w-1/5 py-3 pl-6 pr-3",h),children:(0,z.jsx)(DepositRowStatus,{tx:t})}),(0,z.jsx)("td",{className:(0,eo.m6)("w-1/5 px-3 py-3",h),children:(0,z.jsx)(DepositRowTime,{tx:t})}),(0,z.jsx)("td",{className:(0,eo.m6)("w-1/5 whitespace-nowrap px-3 py-3",h),children:formatAmount(Number(t.value),{symbol:p})}),(0,z.jsx)("td",{className:(0,eo.m6)("w-1/5 px-3 py-3",h),children:(0,z.jsx)(DepositRowTxID,{tx:t})}),(0,z.jsxs)("td",{className:(0,eo.m6)("relative w-1/5 py-3 pl-3 pr-6 text-right",h),children:[c&&(0,z.jsx)(Tooltip,{show:l,wrapperClassName:"",content:(0,z.jsx)("span",{children:"Please connect to the L2 network to re-execute your deposit. You have 7 days to re-execute a failed tx. After that, the tx is no longer recoverable."}),children:(0,z.jsx)(el,{variant:"primary",loading:i,disabled:l,onClick:()=>n(t),children:"Retry"})}),u&&(0,z.jsx)(Tooltip,{wrapperClassName:"",content:(0,z.jsx)("span",{children:"You have 7 days to re-execute a failed tx. After that, the tx is no longer recoverable."}),children:(0,z.jsxs)("span",{className:"text-md flex flex-nowrap items-center gap-1 font-normal uppercase text-brick-dark",children:[(0,z.jsx)(tp.Z,{className:"h-4 w-4"})," EXPIRED"]})}),t.isCctp&&(0,z.jsx)(TransactionsTableRowAction,{tx:t,isError:d,type:"deposits"})]}),isCustomDestinationAddressTx(t)&&(0,z.jsx)("td",{children:(0,z.jsx)(TransactionsTableCustomAddressLabel,{tx:t})})]}):null}function getTxConfirmationDate(e){let{createdAt:t,parentChainId:a}=e,s=a===eU.a_.Ethereum?10080:60;return t.add(s,"minute").add(30,"minute")}function WithdrawalCountdown(e){let{createdAt:t}=e,{l1:{network:a}}=useNetworksAndSigners(),s=(0,t8.Z)("(min-width: 1024px)"),r=t?ek()(t):ek()(),n=getTxConfirmationDate({createdAt:r,parentChainId:a.id}),i=function(e){let{createdAt:t,parentChainId:a}=e,s=getTxConfirmationDate({createdAt:t,parentChainId:a});return Math.max(s.diff(ek()(),"minute"),0)}({createdAt:r,parentChainId:a.id}),o=0===i?"Almost there...":ek()().to(n,!0);return(0,z.jsx)("span",{children:o+(s&&i>0?" remaining":"")})}function ClaimableRowStatus(e){var t;let{tx:a}=e,{parentLayer:s,layer:r}=useChainLayers(),n=a.isCctp?null===(t=a.cctpData)||void 0===t?void 0:t.receiveMessageTransactionHash:findMatchingL1TxForWithdrawal(a);switch(a.status){case"pending":return(0,z.jsx)("div",{className:"flex flex-col space-y-1",children:(0,z.jsx)(StatusBadge,{variant:"yellow","aria-label":"".concat(r," Transaction Status"),children:"Pending"})});case"Unconfirmed":return(0,z.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,z.jsx)(StatusBadge,{variant:"green","aria-label":"".concat(r," Transaction Status"),children:"Success"}),(0,z.jsx)(StatusBadge,{variant:"yellow","aria-label":"".concat(s," Transaction Status"),children:"Pending"})]});case"Confirmed":return(0,z.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,z.jsx)(StatusBadge,{variant:"green","aria-label":"".concat(r," Transaction Status"),children:"Success"}),(0,z.jsx)(Tooltip,{content:(0,z.jsxs)("span",{children:["Funds are ready to be claimed on ",s]}),children:(0,z.jsxs)(StatusBadge,{variant:"yellow","aria-label":"".concat(s," Transaction Status"),children:[(0,z.jsx)(tp.Z,{className:"h-4 w-4"})," Confirmed"]})})]});case"Executed":if(void 0===n)return(0,z.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,z.jsx)(StatusBadge,{variant:"green","aria-label":"".concat(r," Transaction Status"),children:"Success"}),(0,z.jsx)(Tooltip,{content:(0,z.jsxs)("span",{children:["Executed: Funds have been claimed on ",s,", but the corresponding Tx ID was not found"]}),children:(0,z.jsxs)(StatusBadge,{variant:"gray","aria-label":"".concat(s," Transaction Status"),children:[(0,z.jsx)(tp.Z,{className:"h-4 w-4"})," n/a"]})})]});return(0,z.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,z.jsx)(StatusBadge,{variant:"green","aria-label":"".concat(r," Transaction Status"),children:"Success"}),(0,z.jsx)(StatusBadge,{variant:"green","aria-label":"".concat(s," Transaction Status"),children:"Success"})]});case"Failure":return(0,z.jsx)("div",{className:"flex flex-col space-y-1",children:(0,z.jsx)(StatusBadge,{variant:"red","aria-label":"".concat(r," Transaction Status"),children:"Failed"})});default:return null}}function ClaimableRowTime(e){var t;let{tx:a}=e,{parentLayer:s,layer:r}=useChainLayers(),{remainingTime:n}=useRemainingTime(a);if("Unconfirmed"===a.status)return(0,z.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,z.jsx)(Tooltip,{content:(0,z.jsxs)("span",{children:[r," Transaction Time"]}),children:(0,z.jsx)(TransactionDateTime,{standardizedDate:a.createdAt})}),a.isCctp?(0,z.jsx)(z.Fragment,{children:n}):(0,z.jsx)(WithdrawalCountdown,{createdAt:a.createdAt})]});if("Confirmed"===a.status)return(0,z.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,z.jsx)(Tooltip,{content:(0,z.jsxs)("span",{children:[r," Transaction Time"]}),children:(0,z.jsx)(TransactionDateTime,{standardizedDate:a.createdAt})}),a.resolvedAt&&(0,z.jsx)(Tooltip,{content:(0,z.jsxs)("span",{children:[s," Transaction Time"]}),children:(0,z.jsx)("span",{className:"whitespace-nowrap",children:"Ready"})})]});let i=a.isCctp?{createdAt:null===(t=a.cctpData)||void 0===t?void 0:t.receiveMessageTimestamp}:findMatchingL1TxForWithdrawal(a);return void 0===i?(0,z.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,z.jsx)(Tooltip,{content:(0,z.jsxs)("span",{children:[r," Transaction time"]}),children:(0,z.jsx)(TransactionDateTime,{standardizedDate:a.createdAt})}),a.resolvedAt&&(0,z.jsx)(Tooltip,{content:(0,z.jsxs)("span",{children:["Ready to claim funds on ",s]}),children:(0,z.jsx)("span",{className:"whitespace-nowrap",children:"n/a"})})]}):(0,z.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,z.jsx)(Tooltip,{content:(0,z.jsxs)("span",{children:[r," Transaction Time"]}),children:(0,z.jsx)(TransactionDateTime,{standardizedDate:a.createdAt})}),(null==i?void 0:i.createdAt)&&(0,z.jsx)(Tooltip,{content:(0,z.jsxs)("span",{children:[s," Transaction Time"]}),children:(0,z.jsx)("span",{className:"whitespace-nowrap",children:(0,z.jsx)(TransactionDateTime,{standardizedDate:null==i?void 0:i.createdAt})})})]})}function ClaimedTxInfo(e){var t;let{tx:a,isSourceChainArbitrum:s}=e,{l1:r,l2:n}=useNetworksAndSigners(),{parentLayer:i}=useChainLayers(),o=s?r.network.id:n.network.id,l="Executed"===a.status,d="Confirmed"===a.status&&a.resolvedAt;if(!l&&!d)return null;let c=a.isCctp?{txId:null===(t=a.cctpData)||void 0===t?void 0:t.receiveMessageTransactionHash}:findMatchingL1TxForWithdrawal(a);return(null==c?void 0:c.txId)?(0,z.jsxs)("span",{className:"flex flex-nowrap items-center gap-1 whitespace-nowrap text-dark","aria-label":"".concat(i," Transaction Link"),children:[(0,z.jsx)("span",{className:"rounded-md px-2 text-xs text-dark",children:"Step 2"}),(0,eU.pp)(o),":"," ",(0,z.jsx)(ed.d,{href:"".concat((0,eU.jY)(o),"/tx/").concat(c.txId),className:"arb-hover text-blue-link",children:shortenTxHash(c.txId)})]}):(0,z.jsxs)("span",{className:"flex flex-nowrap items-center gap-1 whitespace-nowrap text-dark",children:[(0,z.jsx)("span",{className:"rounded-md px-2 text-xs text-dark",children:"Step 2"}),(0,eU.pp)(o),": Not available"]})}function ClaimableRowTxID(e){let{tx:t,isSourceChainArbitrum:a}=e,{l1:s,l2:r}=useNetworksAndSigners(),{layer:n}=useChainLayers(),i=a?r.network.id:s.network.id;return(0,z.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,z.jsxs)("span",{className:"flex flex-nowrap items-center gap-1 whitespace-nowrap text-dark","aria-label":"".concat(n," Transaction Link"),children:[(0,z.jsx)("span",{className:"rounded-md px-2 text-xs text-dark",children:"Step 1"}),(0,eU.pp)(i),":"," ",(0,z.jsx)(ed.d,{href:"".concat((0,eU.jY)(i),"/tx/").concat(t.txId),className:"arb-hover text-blue-link",children:shortenTxHash(t.txId)})]}),(0,z.jsx)(ClaimedTxInfo,{tx:t,isSourceChainArbitrum:a})]})}function TransactionsTableClaimableRow(e){var t,a;let{tx:s,className:r=""}=e,n="Failure"===s.status,{l1:i,l2:o}=useNetworksAndSigners(),l=null!==(a=null===(t=s.cctpData)||void 0===t?void 0:t.sourceChainId)&&void 0!==a?a:eU.a_.ArbitrumOne,{isEthereumMainnetOrTestnet:d,isArbitrum:c}=(0,eU.CR)(l),{address:u}=(0,X.mA)(),m=(0,Y.useMemo)(()=>n?"bg-brick":isPending(s)?"bg-orange":"",[s,n]),p=(0,Y.useMemo)(()=>sanitizeTokenSymbol(s.asset,{erc20L1Address:s.tokenAddress,chain:d?i.network:o.network}),[s.asset,s.tokenAddress,d,i.network,o.network]),h=(0,Y.useMemo)(()=>isCustomDestinationAddressTx(s)?"pb-11":"",[s]);return s.sender&&u?(0,z.jsxs)("tr",{className:(0,eo.m6)("relative text-sm text-dark",m||"bg-cyan even:bg-white",r),"data-testid":"withdrawal-row-".concat(s.txId),children:[(0,z.jsx)("td",{className:(0,eo.m6)("w-1/5 py-3 pl-6 pr-3",h),children:(0,z.jsx)(ClaimableRowStatus,{tx:s,isSourceChainArbitrum:c})}),(0,z.jsx)("td",{className:(0,eo.m6)("w-1/5 px-3 py-3",h),children:(0,z.jsx)(ClaimableRowTime,{tx:s,isSourceChainArbitrum:c})}),(0,z.jsx)("td",{className:(0,eo.m6)("w-1/5 whitespace-nowrap px-3 py-3",h),children:formatAmount(Number(s.value),{symbol:p})}),(0,z.jsx)("td",{className:(0,eo.m6)("w-1/5 px-3 py-3",h),children:(0,z.jsx)(ClaimableRowTxID,{tx:s,isSourceChainArbitrum:c})}),(0,z.jsx)("td",{className:(0,eo.m6)("relative w-1/5 py-3 pl-3 pr-6 text-right",h),children:(0,z.jsx)(TransactionsTableRowAction,{tx:s,isError:n,type:s.isWithdrawal?"withdrawals":"deposits"})}),isCustomDestinationAddressTx(s)&&(0,z.jsx)("td",{children:(0,z.jsx)(TransactionsTableCustomAddressLabel,{tx:s})})]}):null}let NoDataOverlay=()=>(0,z.jsx)(EmptyTableRow,{children:(0,z.jsx)("span",{className:"text-sm font-medium text-dark",children:"Oops! Looks like nothing matched your search query."})}),TableBodyLoading=()=>(0,z.jsx)(EmptyTableRow,{children:(0,z.jsxs)("div",{className:"flex flex-row items-center space-x-3",children:[(0,z.jsx)(ea.a,{color:"black",size:"small"}),(0,z.jsx)("span",{className:"text-sm font-medium",children:"Loading transactions"})]})}),TableBodyError=()=>(0,z.jsx)(EmptyTableRow,{children:(0,z.jsx)("span",{className:"text-sm font-medium text-brick-dark",children:"Failed to load transactions, please try refreshing the page"})});var ah=a(64385),ax=a(55049);let TableActionHeader=e=>{let{type:t,pageParams:a,setPageParams:s,transactions:r,loading:n,showSearch:i}=e,{parentLayer:o,layer:l}=useChainLayers(),d="deposits"===t?o:l,[c,u]=(0,Y.useState)(a.searchString),m=r.length<a.pageSize,p=n||m,h=n||!a.pageNumber,x=m&&0===a.pageNumber,f=useDebouncedValue(c,1500),g=c.trim(),search=()=>{s(e=>({...e,pageNumber:0,pageSize:a.pageSize,searchString:g}))};(0,Y.useEffect)(()=>{a.searchString!==f&&search()},[f]);let b=c&&n||a.searchString!==g;return(0,z.jsxs)("div",{className:"sticky left-0 top-0 flex w-auto flex-nowrap items-center justify-between gap-4 bg-white p-3 text-sm",children:[i&&(0,z.jsxs)("div",{className:"relative flex h-full w-full grow items-center rounded-lg border-[1px] border-gray-dark bg-white px-2 text-gray-dark shadow-input",children:[(0,z.jsx)(t6.Z,{className:"h-4 w-4 shrink-0 text-dark"}),(0,z.jsx)("input",{className:"text-normal h-full w-full p-2 font-light text-dark placeholder:text-gray-dark",type:"text",placeholder:d?"Search for a full or partial ".concat(d," tx ID"):"Search for a full or partial tx ID",value:c,onChange:e=>{u(e.target.value)}}),b&&(0,z.jsx)(ea.a,{color:"black",size:"small"})]}),!x&&(0,z.jsxs)("div",{className:(0,eo.m6)("flex w-auto shrink grow-0 flex-row flex-nowrap items-center justify-end text-gray-dark",!i&&"ml-auto"),children:[(0,z.jsx)("button",{disabled:h,className:"rounded border border-gray-dark p-1 ".concat(h?"cursor-not-allowed opacity-30":"cursor-pointer"),"aria-label":"load previous ".concat(t),onClick:()=>{h||s(e=>({...e,pageNumber:e.pageNumber-1}))},children:(0,z.jsx)(ah.Z,{className:"h-3 w-3"})}),(0,z.jsxs)("div",{className:"whitespace-nowrap p-2",children:["Page ",a.pageNumber+1," "]}),(0,z.jsx)("button",{disabled:p,className:"rounded border border-gray-dark p-1 ".concat(p?"cursor-not-allowed opacity-30":"cursor-pointer"),"aria-label":"load next ".concat(t),onClick:()=>{p||s(e=>({...e,pageNumber:e.pageNumber+1}))},children:(0,z.jsx)(ax.Z,{className:"h-3 w-3"})})]})]})},EmptyTableRow=e=>{let{children:t}=e;return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("tr",{children:[(0,z.jsx)("td",{className:"w-1/5"}),(0,z.jsx)("td",{className:"w-1/5"}),(0,z.jsx)("td",{className:"w-1/5"}),(0,z.jsx)("td",{className:"w-1/5"}),(0,z.jsx)("td",{className:"w-1/5"})]}),(0,z.jsx)("tr",{children:(0,z.jsx)("td",{colSpan:5,children:(0,z.jsx)("div",{className:"flex h-16 items-center px-6 py-3",children:t})})})]})},TransactionDateTime=e=>{let{standardizedDate:t}=e;return t?(0,z.jsxs)("div",{className:"flex flex-nowrap gap-1",children:[(0,z.jsx)("span",{className:"whitespace-nowrap",children:getStandardizedDate(t)}),(0,z.jsx)("span",{className:"whitespace-nowrap opacity-60",children:getStandardizedTime(t)})]}):(0,z.jsx)("span",{className:"whitespace-nowrap",children:"n/a"})},TransactionsTableHeader=()=>(0,z.jsx)("thead",{className:"text-gray-10 text-left text-sm",children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{className:"py-3 pl-6 pr-3 font-normal",children:"Status"}),(0,z.jsx)("th",{className:"px-3 py-3 font-normal",children:"Time"}),(0,z.jsx)("th",{className:"px-3 py-3 font-normal",children:"Amount"}),(0,z.jsx)("th",{className:"px-3 py-3 font-normal",children:"TxID"}),(0,z.jsx)("th",{className:"py-3 pl-3 pr-6 font-normal"})]})}),CustomAddressTxExplorer=e=>{let{tx:t,explorerClassName:a="arb-hover underline"}=e,{address:s}=(0,X.mA)(),{l1:r,l2:n}=useNetworksAndSigners(),i=(0,Y.useMemo)(()=>!!t.sender&&!!s&&t.sender.toLowerCase()!==s.toLowerCase(),[t.sender,s]),o=(0,Y.useMemo)(()=>!!s&&!!t.destination&&t.destination.toLowerCase()!==s.toLowerCase(),[t.destination,s]),l=(0,Y.useMemo)(()=>i||o?t.isWithdrawal?i?n.network.id:r.network.id:i?r.network.id:n.network.id:null,[i,o,r,n]);return l&&isCustomDestinationAddressTx(t)&&t.sender&&t.destination?(0,z.jsxs)(z.Fragment,{children:[i?(0,z.jsx)("span",{children:"Funds received from: "}):(0,z.jsx)("span",{children:"Funds sent to: "}),(0,z.jsx)(ed.d,{className:a,href:"".concat((0,eU.jY)(l),"/address/").concat(i?t.sender:t.destination),children:shortenAddress(i?t.sender:t.destination)})]}):null};function TransactionsTable(e){var t;let{type:a,pageParams:s,setPageParams:r,transactions:n,loading:i,error:o}=e,{app:{mergedTransactions:l}}=tt(),d=JSON.stringify(l||[]),c=(0,Y.useMemo)(()=>{var e;if(s.searchString||s.pageNumber>0)return n;let t=0===n.length,r=t?ek()(0):ek()(null===(e=n[0])||void 0===e?void 0:e.createdAt),i=[];return null==l||l.forEach(e=>{var t;let s=isDeposit(e)&&"deposits"===a||isWithdrawal(e)&&"withdrawals"===a;if(!s)return;let o=ek()(e.createdAt),l=o.isAfter(r)&&e.createdAt!==(null===(t=n[0])||void 0===t?void 0:t.createdAt);l&&i.push(e)}),[...i.reverse(),...n]},[n,d]),u=(0,Y.useMemo)(()=>{let e=new Map;return l.forEach(t=>{e.set(t.txId,t)}),e},[l]),m=i?0:o?1:2,p=!!((null==s?void 0:null===(t=s.searchString)||void 0===t?void 0:t.length)&&2===m&&!(null==n?void 0:n.length));return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(TableActionHeader,{type:a,pageParams:s,setPageParams:r,transactions:c,loading:i,showSearch:!0}),(0,z.jsxs)("table",{className:"w-full overflow-hidden rounded-b-lg bg-white",children:[(0,z.jsx)(TransactionsTableHeader,{}),(0,z.jsxs)("tbody",{children:[0===m&&(0,z.jsx)(TableBodyLoading,{}),1===m&&(0,z.jsx)(TableBodyError,{}),2===m&&p&&(0,z.jsx)(NoDataOverlay,{}),2===m&&!p&&0===c.length&&(0,z.jsx)(EmptyTableRow,{children:(0,z.jsx)("span",{className:"text-sm font-medium",children:"No transactions"})}),2===m&&!p&&c.map((e,t)=>{let a=t===c.length-1,s=u.get(e.txId),r=null!=s?s:e;return isDeposit(r)?(0,z.jsx)(TransactionsTableDepositRow,{tx:r,className:a?"":"border-b border-black"},"".concat(r.txId,"-").concat(r.direction)):isWithdrawal(r)?(0,z.jsx)(TransactionsTableClaimableRow,{tx:r,className:a?"":"border-b border-black"},"".concat(r.txId,"-").concat(r.direction)):null})]})]})]})}function DepositCardPending(e){let{tx:t}=e,{l1:a,l2:s}=useNetworksAndSigners(),{parentLayer:r,layer:n}=useChainLayers(),i=(0,eU.pp)(s.network.id),o=(0,Y.useMemo)(()=>sanitizeTokenSymbol(t.asset,{erc20L1Address:t.tokenAddress,chain:a.network}),[a.network,t.tokenAddress,t.asset]);return(0,z.jsx)(DepositCardContainer,{tx:t,children:(0,z.jsxs)("div",{className:"flex flex-row flex-wrap items-center justify-between",children:[(0,z.jsxs)("div",{className:"lg:-ml-8",children:[(0,z.jsxs)("span",{className:"ml-8 animate-pulse text-lg text-ocl-blue lg:ml-0 lg:text-2xl",children:["Moving"," ",formatAmount(Number(t.value),{symbol:o})," ","to ",i]}),(0,z.jsx)("div",{className:"h-2"}),(0,z.jsxs)("div",{className:"flex flex-col font-light",children:[(0,z.jsxs)("span",{className:"flex flex-nowrap gap-1 text-sm text-ocl-blue lg:text-base",children:[r," transaction: ",(0,z.jsx)(DepositL1TxStatus,{tx:t})]}),(0,z.jsxs)("span",{className:"flex flex-nowrap gap-1 text-sm text-ocl-blue lg:text-base",children:[n," transaction: ",(0,z.jsx)(DepositL2TxStatus,{tx:t})]}),isCustomDestinationAddressTx(t)&&(0,z.jsx)("span",{className:"mt-2 flex flex-nowrap gap-1 text-sm text-gray-dark lg:text-base",children:(0,z.jsx)(CustomAddressTxExplorer,{tx:t,explorerClassName:"arb-hover text-blue-link"})})]})]}),(0,z.jsx)("span",{className:"absolute bottom-0 right-0 max-w-[100px] animate-pulse overflow-hidden text-ellipsis rounded-full bg-orange p-2 px-4 text-sm font-semibold text-ocl-blue lg:max-w-full lg:text-lg",children:(0,z.jsx)(DepositCountdown,{tx:t})})]})})}(b=W||(W={}))[b.LOADING=0]="LOADING",b[b.ERROR=1]="ERROR",b[b.SUCCESS=2]="SUCCESS";var af=a(80794),ag=a(79522);function DepositCardL1Failure(e){let{tx:t}=e,{l1:a}=useNetworksAndSigners(),{parentLayer:s}=useChainLayers(),[,r]=(0,af.Z)();return(0,z.jsxs)(DepositCardContainer,{tx:t,children:[(0,z.jsx)("span",{className:"text-4xl font-semibold text-brick-dark",children:"Something went wrong"}),(0,z.jsxs)("p",{className:"text-2xl font-light text-brick-dark",children:["No worries, we got you.",(0,z.jsx)("br",{}),"Just paste the following information into a help request:"]}),(0,z.jsxs)("button",{className:"arb-hover flex max-w-md flex-row items-center justify-between rounded-xl border border-brick-dark px-6 py-4",style:{background:"rgba(118, 39, 22, 0.2)"},onClick:()=>{r("".concat(s," transaction: ").concat((0,eU.jY)(a.network.id),"/tx/").concat(t.txId))},children:[(0,z.jsxs)("span",{className:"text-base text-brick-dark",children:[s," transaction:"," ",(0,z.jsx)("span",{className:"text-blue-link",children:shortenTxHash(t.txId)})]}),(0,z.jsx)(ag.Z,{className:"h-6 w-6 text-brick-dark"})]}),(0,z.jsx)("div",{className:"h-2"}),(0,z.jsx)(ed.d,{href:ex.sR,className:"arb-hover w-max rounded-lg bg-dark px-4 py-3 text-2xl text-white",children:"Get Help"})]})}function DepositCardCreationFailure(e){var t;let{tx:a}=e,{l1:s,l2:r}=useNetworksAndSigners(),{parentLayer:n,layer:i}=useChainLayers(),[,o]=(0,af.Z)();return(0,z.jsxs)(DepositCardContainer,{tx:a,children:[(0,z.jsx)("span",{className:"text-4xl font-semibold text-brick-dark",children:"Something went wrong"}),(0,z.jsxs)("p",{className:"text-2xl font-light text-brick-dark",children:["No worries, we got you.",(0,z.jsx)("br",{}),"Just paste the following information into a help request:"]}),(0,z.jsxs)("button",{className:"arb-hover flex max-w-md flex-row items-center justify-between rounded-xl border border-brick-dark px-6 py-4",style:{background:"rgba(118, 39, 22, 0.2)"},onClick:()=>{var e;o("".concat(n," transaction: ").concat((0,eU.jY)(s.network.id),"/tx/").concat(a.txId,"\n").concat(i," transaction: ").concat((0,eU.jY)(r.network.id),"/tx/").concat(null===(e=a.l1ToL2MsgData)||void 0===e?void 0:e.retryableCreationTxID))},children:[(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsxs)("span",{className:"text-base text-brick-dark",children:[n," transaction:"," ",(0,z.jsx)("span",{className:"text-blue-link",children:shortenTxHash(a.txId)})]}),(0,z.jsxs)("span",{className:"text-base text-brick-dark",children:[i," transaction:"," ",(0,z.jsx)("span",{className:"text-blue-link",children:shortenTxHash((null===(t=a.l1ToL2MsgData)||void 0===t?void 0:t.retryableCreationTxID)||"")})]})]}),(0,z.jsx)(ag.Z,{className:"h-6 w-6 text-brick-dark"})]}),(0,z.jsx)("div",{className:"h-2"}),(0,z.jsx)(ed.d,{href:ex.sR,className:"arb-hover w-max rounded-lg bg-dark px-4 py-3 text-2xl text-white",children:"Get Help"})]})}function DepositCardL2Failure(e){let{tx:t}=e,[a,s]=(0,Y.useState)({isValid:!1,days:0}),{l1:{provider:r},l2:{provider:n}}=useNetworksAndSigners(),{parentLayer:i,layer:o}=useChainLayers(),{redeem:l,isRedeeming:d}=useRedeemRetryable(),c=useIsConnectedToArbitrum(),u=(0,Y.useMemo)(()=>void 0===c||!c,[c]),m=(0,Y.useCallback)(async()=>{let{daysUntilExpired:e,isLoading:a,isLoadingError:i,isExpired:o}=await getRetryableTicketExpiration({l1TxHash:t.txId,l1Provider:r,l2Provider:n});s({days:e,isValid:!(a||i||o)})},[t.txId,r,n]);(0,Y.useEffect)(()=>{m()},[m]);let p=(0,Y.useMemo)(()=>{let e=a.days;return e<1?"less than a day":e>1?"".concat(e," days"):"".concat(e," day")},[a.days]);return(0,z.jsx)(z.Fragment,{children:(null==a?void 0:a.isValid)&&(0,z.jsxs)(DepositCardContainer,{tx:t,children:[(0,z.jsx)("span",{className:"text-4xl font-semibold text-orange-dark",children:d?"Re-executing...":"L2 transaction failed"}),(0,z.jsx)("div",{className:"h-1"}),(0,z.jsx)("span",{className:"text-2xl font-normal text-orange-dark",children:"No worries, we can try again. You have ".concat(p," to re-execute.")}),(0,z.jsx)("div",{className:"h-1"}),(0,z.jsx)(Tooltip,{show:u,content:(0,z.jsx)("span",{children:"Please connect to the L2 network to re-execute your deposit."}),children:(0,z.jsx)(el,{variant:"primary",loading:d,disabled:u,onClick:()=>l(t),className:"text-2xl",children:"Re-execute"})}),(0,z.jsx)("div",{className:"h-2"}),(0,z.jsxs)("div",{className:"flex flex-col font-light",children:[(0,z.jsxs)("span",{className:"text-base text-orange-dark",children:[i," transaction: ",(0,z.jsx)(DepositL1TxStatus,{tx:t})]}),(0,z.jsxs)("span",{className:"text-base text-orange-dark",children:[o," transaction:"," ",d?"Pending...":"Failed. Try re-executing."]})]})]})})}function DepositL1TxStatus(e){let{tx:t}=e,{l1:a}=useNetworksAndSigners();switch(t.depositStatus){case S.L1_PENDING:return(0,z.jsx)("span",{children:"Pending..."});case S.L2_PENDING:case S.L2_SUCCESS:case S.L2_FAILURE:case S.CREATION_FAILED:case S.EXPIRED:return(0,z.jsxs)(ed.d,{href:"".concat((0,eU.jY)(a.network.id),"/tx/").concat(t.txId),className:"arb-hover flex flex-nowrap items-center gap-1 text-blue-link",children:[shortenTxHash(t.txId),(0,z.jsx)(t9.Z,{className:"h-4 w-4 text-lime-dark"})]});default:return null}}function DepositL2TxStatus(e){let{tx:t}=e,{l2:a}=useNetworksAndSigners();switch(t.depositStatus){case S.L1_PENDING:case S.L2_PENDING:return(0,z.jsx)("span",{children:"Pending..."});case S.L2_SUCCESS:var s,r,n;return(0,z.jsxs)(ed.d,{href:"".concat((0,eU.jY)(a.network.id),"/tx/").concat(null===(s=t.l1ToL2MsgData)||void 0===s?void 0:s.l2TxID),className:"arb-hover flex flex-nowrap items-center gap-1 text-blue-link",children:[shortenTxHash((null===(r=t.l1ToL2MsgData)||void 0===r?void 0:r.l2TxID)||""),(null===(n=t.l1ToL2MsgData)||void 0===n?void 0:n.l2TxID)&&(0,z.jsx)(t9.Z,{className:"h-4 w-4 text-lime-dark"})]});default:return null}}function DepositCardContainer(e){let{tx:t,children:a}=e,{closeTransactionHistoryPanel:s}=useAppContextActions(),{layout:{isTransferPanelVisible:r}}=useAppContextState(),{l2:{network:n}}=useNetworksAndSigners(),i=(0,Y.useMemo)(()=>{switch(t.depositStatus){case S.L1_FAILURE:case S.CREATION_FAILED:return"bg-brick";case S.L2_SUCCESS:return"bg-lime";case S.L2_FAILURE:return"bg-orange";default:return"bg-white"}},[t]),o=n.id===eU.a_.ArbitrumNova?"border-arb-nova-primary":"border-arb-one-primary";return(0,z.jsxs)("div",{className:"box-border w-full overflow-hidden rounded-xl border-4 ".concat(o," p-4 ").concat(i),children:[(0,z.jsxs)("div",{className:"relative flex flex-col items-center gap-6 lg:flex-row",children:[(0,z.jsx)(en(),{src:(0,eU.Kn)(n.id),className:"absolute left-0 top-[1px] z-10 mr-4 h-8 max-h-[90px] w-auto p-[2px] lg:relative lg:left-[-30px] lg:top-0 lg:h-[4.5rem] lg:w-[initial] lg:max-w-[90px] lg:translate-x-[0.5rem] lg:scale-[1.5] lg:opacity-[60%]",alt:"Deposit",height:90,width:90}),(0,z.jsx)("div",{className:"z-20 w-full",children:a})]}),!r&&(0,z.jsx)("button",{className:"arb-hover absolute bottom-4 right-4 text-blue-link underline",onClick:()=>{trackEvent("Move More Funds Click"),s()},children:"Move more funds"})]})}function DepositCard(e){let{tx:t}=e;switch(t.depositStatus){case S.L1_PENDING:return(0,z.jsx)(DepositCardPending,{tx:t});case S.L1_FAILURE:return(0,z.jsx)(DepositCardL1Failure,{tx:t});case S.CREATION_FAILED:return(0,z.jsx)(DepositCardCreationFailure,{tx:t});case S.L2_PENDING:return(0,z.jsx)(DepositCardPending,{tx:t});case S.L2_FAILURE:return(0,z.jsx)(DepositCardL2Failure,{tx:t});default:return null}}function ClaimableCardConfirmed(e){var t,a,s;let r,{tx:n}=e,{l1:i,l2:o}=useNetworksAndSigners(),{parentLayer:l,layer:d}=useChainLayers(),{switchNetwork:c}=useSwitchNetworkWithConfig(),u=(0,eU.pp)(i.network.id),m=(0,eU.pp)(o.network.id),{claim:p,isClaiming:h}=useClaimWithdrawal(),{claim:x,isClaiming:f}=useClaimCctp(n),{isConfirmed:g}=useRemainingTime(n),b=(0,X.xx)(),{isArbitrum:w,isEthereumMainnetOrTestnet:y}=(0,eU.CR)(b),C=null!==(s=null===(t=n.cctpData)||void 0===t?void 0:t.sourceChainId)&&void 0!==s?s:eU.a_.ArbitrumOne,{isEthereumMainnetOrTestnet:v,isArbitrum:A}=(0,eU.CR)(C);r=n.isCctp?getTargetChainIdFromSourceChain(n):n.isWithdrawal?i.network.id:o.network.id;let T=(0,eU.pp)(r),k=(0,eU.CR)(o.network.id).isOrbitChain,N=(0,Y.useMemo)(()=>{let e=(0,eU.CR)(o.network.id).isOrbitChain;return e?w:v&&w||A&&y},[o.network.id,v,w,A,y]),j=(0,Y.useMemo)(()=>{var e;return!!(h||f||!g||"Confirmed"===n.status&&(null===(e=n.cctpData)||void 0===e?void 0:e.receiveMessageTimestamp))},[h,f,g,n.status,null===(a=n.cctpData)||void 0===a?void 0:a.receiveMessageTimestamp]),S=(0,Y.useMemo)(()=>sanitizeTokenSymbol(n.asset,{erc20L1Address:n.tokenAddress,chain:v?i.network:o.network}),[n,v,i,o]);return k&&n.isCctp?null:(0,z.jsx)(WithdrawalCardContainer,{tx:n,children:(0,z.jsxs)("div",{className:"flex flex-row flex-wrap items-center justify-between",children:[(0,z.jsxs)("div",{className:"lg:-ml-8",children:[(0,z.jsx)("span",{className:"ml-8 text-lg text-ocl-blue lg:ml-0 lg:text-2xl",children:"Funds are ready to claim!"}),(0,z.jsx)("div",{className:"h-2"}),(0,z.jsxs)("div",{className:"flex flex-col font-light",children:[v?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("span",{className:"flex flex-nowrap gap-1 text-sm text-ocl-blue lg:text-base",children:[l," transaction: ",(0,z.jsx)(WithdrawalL1TxStatus,{tx:n})]}),(0,z.jsx)("span",{className:"flex flex-nowrap gap-1 text-sm text-ocl-blue lg:text-base",children:(0,z.jsxs)(z.Fragment,{children:[d," transaction: Will show after claiming"]})})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("span",{className:"flex flex-nowrap gap-1 text-sm text-ocl-blue lg:text-base",children:[d," transaction: ",(0,z.jsx)(WithdrawalL2TxStatus,{tx:n})]}),(0,z.jsx)("span",{className:"flex flex-nowrap gap-1 text-sm text-ocl-blue lg:text-base",children:(0,z.jsxs)(z.Fragment,{children:[l," transaction: Will show after claiming"]})})]}),isCustomDestinationAddressTx(n)&&(0,z.jsx)("span",{className:"mt-2 flex flex-nowrap gap-1 text-sm text-gray-dark lg:text-base",children:(0,z.jsx)(CustomAddressTxExplorer,{tx:n,explorerClassName:"arb-hover text-blue-link"})})]})]}),"Failure"!==n.status?(0,z.jsx)(Tooltip,{wrapperClassName:"w-full md:w-auto",show:!N,content:(0,z.jsx)("span",{children:"Please switch to ".concat(v?m:u," to claim your ").concat(v?"deposit":"withdrawal",".")}),children:(0,z.jsx)(el,{variant:"primary",loading:h||f,disabled:j,onClick:async()=>{try{if(!N)return null==c?void 0:c(v?o.network.id:i.network.id);n.isCctp?await x():await p(n)}catch(t){var e;if(isUserRejectedError(t))return;(0,ep.Jc)("Can't claim ".concat(v?"withdrawal":"deposit",": ").concat(null!==(e=null==t?void 0:t.message)&&void 0!==e?e:t))}},className:"bottom-0 right-0 mt-2 flex w-full flex-nowrap justify-center text-center text-sm md:absolute md:mt-0 md:w-auto  lg:my-4 lg:text-lg",children:N?(0,z.jsxs)("div",{className:"flex flex-nowrap whitespace-pre",children:["Claim"," ",(0,z.jsx)("span",{className:"hidden lg:flex",children:formatAmount(Number(n.value),{symbol:S})})]}):"Switch Network"})}):(0,z.jsx)(el,{variant:"primary",onClick:()=>{window.open(ex.sR,"_blank"),shouldTrackAnalytics(T)&&trackEvent("Tx Error: Get Help Click",{network:T})},children:"Get Help"})]})})}function ClaimableCardUnconfirmed(e){let t,{tx:a}=e,{l1:s,l2:r}=useNetworksAndSigners(),{parentLayer:n,layer:i}=useChainLayers();t=a.isCctp?getTargetChainIdFromSourceChain(a):a.isWithdrawal?s.network.id:r.network.id;let o=(0,eU.pp)(t),l=(0,eU.CR)(r.network.id).isOrbitChain,d=(0,Y.useMemo)(()=>sanitizeTokenSymbol(a.asset,{erc20L1Address:a.tokenAddress,chain:a.isWithdrawal?r.network:s.network}),[a.asset,a.tokenAddress,a.isWithdrawal,s.network,r.network]),{remainingTime:c}=useRemainingTime(a);return l&&a.isCctp?null:(0,z.jsx)(WithdrawalCardContainer,{tx:a,children:(0,z.jsxs)("div",{className:"flex flex-row flex-wrap items-center justify-between",children:[(0,z.jsxs)("div",{className:"flex flex-col lg:ml-[-2rem]",children:[(0,z.jsxs)("span",{className:"ml-8 text-lg text-ocl-blue lg:ml-0 lg:text-2xl",children:["Moving ",formatAmount(Number(a.value),{symbol:d})," to"," ",o]}),(0,z.jsx)("div",{className:"h-2"}),(0,z.jsxs)("div",{className:"flex flex-col font-light",children:[a.isWithdrawal?(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("span",{className:"flex flex-nowrap gap-1 text-sm text-ocl-blue lg:text-base",children:[i," transaction: ",(0,z.jsx)(WithdrawalL2TxStatus,{tx:a})]}),(0,z.jsxs)("span",{className:"flex flex-nowrap gap-1 text-sm text-ocl-blue lg:text-base",children:[n," transaction:"," ","Failure"===a.status?"Failed":"Will show after claiming"]})]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)("span",{className:"flex flex-nowrap gap-1 text-sm text-ocl-blue lg:text-base",children:[n," transaction: ",(0,z.jsx)(WithdrawalL1TxStatus,{tx:a})]}),(0,z.jsxs)("span",{className:"flex flex-nowrap gap-1 text-sm text-ocl-blue lg:text-base",children:[i," transaction:"," ","Failure"===a.status?"Failed":"Will show after claiming"]})]}),isCustomDestinationAddressTx(a)&&(0,z.jsx)("span",{className:"mt-2 flex flex-nowrap gap-1 text-sm text-gray-dark lg:text-base",children:(0,z.jsx)(CustomAddressTxExplorer,{tx:a,explorerClassName:"arb-hover text-blue-link"})})]})]}),(0,z.jsx)("span",{className:(0,eo.m6)("bottom-0 right-0 mt-2 w-full animate-pulse overflow-hidden text-ellipsis rounded-full bg-orange p-2 px-4 text-center text-sm font-semibold text-ocl-blue","md:absolute md:mt-2 md:w-auto md:text-lg"),children:(0,z.jsx)("span",{className:"whitespace-nowrap",children:a.isCctp?(0,z.jsx)(z.Fragment,{children:c}):(0,z.jsx)(WithdrawalCountdown,{createdAt:a.createdAt})})})]})})}function WithdrawalL2TxStatus(e){let{tx:t}=e,{l2:a}=useNetworksAndSigners(),{network:s}=a;return void 0===s?(0,z.jsx)("span",{children:"Not available"}):"withdraw"===t.direction&&"pending"===t.status?(0,z.jsx)("span",{children:"Pending..."}):"l2-tx-hash-not-found"===t.txId?(0,z.jsx)("span",{children:"Not available"}):(0,z.jsxs)(ed.d,{href:"".concat((0,eU.jY)(s.id),"/tx/").concat(t.txId),className:"arb-hover flex flex-nowrap items-center gap-1 text-blue-link",children:[shortenTxHash(t.txId),(0,z.jsx)(t9.Z,{className:"h-4 w-4 text-lime-dark"})]})}function WithdrawalL1TxStatus(e){let{tx:t}=e,{l1:a}=useNetworksAndSigners(),{network:s}=a,r=t.isCctp?t:findMatchingL1TxForWithdrawal(t);return void 0===s||void 0===r?(0,z.jsx)("span",{children:"Not available"}):(0,z.jsxs)(ed.d,{href:"".concat((0,eU.jY)(s.id),"/tx/").concat(r.txId),className:"arb-hover flex flex-nowrap items-center gap-1 text-blue-link",children:[shortenTxHash(r.txId),(0,z.jsx)(t9.Z,{className:"h-4 w-4 text-lime-dark"})]})}function WithdrawalCardContainer(e){var t,a;let{tx:s,children:r}=e,{closeTransactionHistoryPanel:n}=useAppContextActions(),{layout:{isTransferPanelVisible:i}}=useAppContextState(),o=null!==(a=null===(t=s.cctpData)||void 0===t?void 0:t.sourceChainId)&&void 0!==a?a:eU.a_.ArbitrumOne,{isEthereumMainnetOrTestnet:l}=(0,eU.CR)(o),d=(0,Y.useMemo)(()=>{switch(s.status){case"Executed":return"bg-lime";case"Failure":return"bg-brick";default:return"bg-white"}},[s]);return(0,z.jsxs)("div",{className:(0,eo.m6)("box-border w-full overflow-hidden rounded-xl border-4 border-eth-dark ".concat(d),!s.isCctp&&"p-4"),children:[s.isCctp&&(0,z.jsxs)("div",{className:"flex items-center justify-center bg-gradientCctp p-[.65rem]",children:[(0,z.jsx)(en(),{src:"/icons/cctp.svg",className:"mr-1 h-5 w-auto",alt:"Cross-Chain Transfer Protocol (Native USDC)",width:20,height:20}),"Cross-Chain Transfer Protocol Transaction"]}),(0,z.jsxs)("div",{className:"".concat(s.isCctp&&"p-4"),children:[(0,z.jsxs)("div",{className:"relative flex flex-col items-center gap-6 lg:flex-row",children:[(0,z.jsx)(en(),{src:l?(0,eU.Kn)(eU.a_.ArbitrumOne):(0,eU.Kn)(eU.a_.Ethereum),className:"absolute left-0 top-[1px] z-10 mr-4 h-8 max-h-[90px] w-auto p-[2px] lg:relative lg:left-[-30px] lg:top-0 lg:h-[4.5rem] lg:w-[initial] lg:max-w-[90px] lg:translate-x-[0.5rem] lg:scale-[1.5] lg:opacity-[60%]",alt:s.direction,width:90,height:90}),(0,z.jsx)("div",{className:"z-20 w-full",children:r})]}),!i&&(0,z.jsx)("button",{className:"arb-hover absolute bottom-4 right-4 text-ocl-blue underline",onClick:()=>{trackEvent("Move More Funds Click"),n()},children:"Move more funds"})]})]})}function WithdrawalCard(e){let{tx:t}=e;if("withdraw"===t.direction)return(0,z.jsx)(ClaimableCardUnconfirmed,{tx:t});switch(t.status){case"Unconfirmed":return(0,z.jsx)(ClaimableCardUnconfirmed,{tx:t});case"Confirmed":return(0,z.jsx)(ClaimableCardConfirmed,{tx:t});default:return null}}var ab=a(46319);function PendingDepositWarning(){let{parentLayer:e,layer:t}=useChainLayers();return(0,z.jsxs)(ab.p,{as:"div",className:"flex w-full flex-col justify-start gap-1 rounded-lg bg-orange p-3 text-sm text-orange-dark",children:[(0,z.jsxs)(ab.p.Button,{className:"flex items-center text-left",children:[(0,z.jsxs)("div",{className:"flex items-start gap-1",children:[(0,z.jsx)(tp.Z,{className:"mt-[2px] h-4 w-4 shrink-0 stroke-orange-dark"}),(0,z.jsxs)("p",{children:["Deposit might fail if the gas fee provided was too low. Stay on this page until the ",t," transaction succeeds."]})]}),(0,z.jsx)(ax.Z,{className:"ml-auto h-4 w-4 shrink-0 ui-open:rotate-90 ui-open:transform"})]}),(0,z.jsx)(ec.u,{enter:"transition duration-100 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",children:(0,z.jsxs)(ab.p.Panel,{className:"flex flex-col gap-2 pl-5",children:[(0,z.jsxs)("p",{children:["If you must leave, check back ",(0,z.jsx)("strong",{children:"within a week"}),". In most cases, your deposits should go through successfully.",(0,z.jsx)("br",{}),"However, if it failed, re-execute on ",t," ",(0,z.jsx)("strong",{children:"within a week"})," from the time of the ",e," ","transaction, or else"," ",(0,z.jsx)("strong",{children:"your funds could be lost forever!"})]}),(0,z.jsxs)("p",{children:["Learn more about"," ",(0,z.jsx)(ed.d,{href:"".concat(ex.Gc,"/arbos/l1-to-l2-messaging"),className:"arb-hover text-blue-link underline",children:"retryable tickets"}),", the mechanism behind deposits."]})]})})]})}let getOtherL2NetworkChainId=e=>((0,eU.CR)(e).isEthereumMainnetOrTestnet&&console.warn("[getOtherL2NetworkChainId] Unexpected chain id: ".concat(e)),(0,eU.CR)(e).isArbitrumOne?eU.a_.ArbitrumNova:eU.a_.ArbitrumOne),MergedTransactionCard=e=>{let{transaction:t}=e;return t.isCctp?(0,z.jsx)(td.E.div,{...az,children:"Confirmed"===t.status?(0,z.jsx)(ClaimableCardConfirmed,{tx:t}):(0,z.jsx)(ClaimableCardUnconfirmed,{tx:t})},t.txId):isDeposit(t)?(0,z.jsx)(td.E.div,{...az,children:(0,z.jsx)(DepositCard,{tx:t},t.txId)},t.txId):(0,z.jsx)(td.E.div,{...az,children:(0,z.jsx)(WithdrawalCard,{tx:t},t.txId)},t.txId)},PendingTransactions=e=>{let{transactions:t,loading:a,error:s}=e,{l1:{network:r},l2:{network:n}}=useNetworksAndSigners(),{switchNetwork:i}=useSwitchNetworkWithConfig(),o=(0,eU.CR)(n.id).isArbitrumNova?"bg-gray-dark":"bg-ocl-blue";return(0,z.jsxs)("div",{className:"pending-transactions relative flex max-h-[500px] flex-col gap-4 overflow-auto rounded-lg p-4 ".concat(o),children:[(0,z.jsxs)("div",{className:"heading flex items-center justify-between text-base text-white lg:text-lg",children:[(0,z.jsxs)("div",{className:"flex flex-nowrap items-center gap-x-3 whitespace-nowrap",children:[a&&(0,z.jsx)(ea.a,{color:"white",size:"small"}),"Pending Transactions:"," ","".concat((0,eU.pp)(n.id),"/").concat((0,eU.pp)(r.id))]}),!(0,eU.CR)(n.id).isTestnet&&(0,z.jsx)(ed.d,{className:"arb-hover cursor-pointer text-sm text-white underline",onClick:()=>{null==i||i(getOtherL2NetworkChainId(n.id))},children:"See ".concat((0,eU.pp)(getOtherL2NetworkChainId(n.id)))})]}),s&&(0,z.jsxs)("span",{className:"flex gap-x-2 text-sm text-red-400",children:[(0,z.jsx)(tp.Z,{className:"h-5 w-5","aria-hidden":"true"}),"Failed to load pending transactions, please try refreshing the page"]}),!s&&!a&&0===t.length&&(0,z.jsx)("span",{className:"flex gap-x-2 text-sm text-white opacity-40",children:"No pending transactions"}),t.length>0&&t.some(e=>isTokenDeposit(e))&&(0,z.jsx)(PendingDepositWarning,{}),t.map(e=>(0,z.jsx)(MergedTransactionCard,{transaction:e},e.txId))]})},FailedTransactionsWarning=e=>{var t;let{transactions:a}=e,{l2:{network:s}}=useNetworksAndSigners(),r=(0,eU.pp)(s.id),n=null==a?void 0:a.length,i=ek()().diff(ek()(null===(t=a[a.length-1])||void 0===t?void 0:t.createdAt),"days")||1;return n<3?null:(0,z.jsxs)("div",{className:"flex items-center gap-1 rounded-md bg-orange p-2 text-base text-dark lg:flex-nowrap",children:[(0,z.jsx)(tp.Z,{className:"h-4 w-4"}),"In the past ",i," ",i<2?"day":"days"," you had",(0,z.jsxs)("span",{className:"text-brick-dark",children:[n," failed transactions."]}),(0,z.jsx)(ed.d,{href:ex.sR,className:"arb-hover cursor-pointer text-sm text-blue-link underline",onClick:()=>{shouldTrackAnalytics(r)&&trackEvent("Multiple Tx Error: Get Help Click",{network:r})},children:"Get Help."})]})};function TransactionsTableSwitch(e){let{tabs:t}=e;return(0,z.jsx)("div",{className:"sticky left-0 top-0 bg-white p-4 pt-4 text-lg",children:t.map((e,t)=>{let{handleClick:a,isActive:s,text:r}=e;return(0,z.jsx)("button",{onClick:a,className:s?"pointer-events-none border-b-4 border-black":"arb-hover border-gray border-b-2 pb-[1px]",children:(0,z.jsx)("span",{className:"px-4",children:r})},t)})})}function TransactionsTableCctp(){let{address:e}=(0,X.mA)(),{layout:{isTransactionHistoryShowingCctpDeposits:t}}=useAppContextState(),{showCctpDepositsTransactions:a,showCctpWithdrawalsTransactions:s}=useAppContextActions(),{isSmartContractWallet:r}=useAccountType(),[n,i]=(0,Y.useState)({searchString:"",pageNumber:0,pageSize:10}),{l1:o,l2:l}=useNetworksAndSigners(),{transfers:d,depositIds:c,withdrawalIds:u}=useCctpState(),{depositsError:m,withdrawalsError:p,isLoadingDeposits:h,isLoadingWithdrawals:x}=useCctpFetching({l1ChainId:o.network.id,l2ChainId:l.network.id,walletAddress:e,pageSize:n.pageSize,pageNumber:n.pageNumber,type:t?"deposits":"withdrawals"}),f=t?h:x,g=t?m:p,b=(0,Y.useMemo)(()=>f?W.LOADING:g?W.ERROR:W.SUCCESS,[g,f]),w=(0,Y.useMemo)(()=>{let e=n.pageNumber*n.pageSize,a=t?c:u;return a.map(e=>d[e]).slice(e,e+n.pageSize)},[c,n.pageNumber,n.pageSize,d,t,u]);(0,Y.useEffect)(()=>{i(e=>({...e,pageNumber:0}))},[i,t]);let y=(0,Y.useMemo)(()=>[{handleClick:()=>a(),isActive:t,text:"To ".concat((0,eU.pp)(l.network.id))},{handleClick:()=>s(),isActive:!t,text:"To ".concat((0,eU.pp)(o.network.id))}],[t,o.network.id,l.network.id,a,s]);return(0,z.jsxs)(z.Fragment,{children:[!r&&(0,z.jsx)(TransactionsTableSwitch,{tabs:y}),(0,z.jsx)(TableActionHeader,{type:"cctp",pageParams:n,setPageParams:i,transactions:w,loading:f,showSearch:!1}),(0,z.jsxs)("table",{className:"w-full overflow-hidden rounded-b-lg bg-white",children:[(0,z.jsx)(TransactionsTableHeader,{}),(0,z.jsxs)("tbody",{children:[b===W.LOADING&&(0,z.jsx)(TableBodyLoading,{}),b===W.ERROR&&(0,z.jsx)(TableBodyError,{}),b===W.SUCCESS&&!w.length&&(0,z.jsx)(EmptyTableRow,{children:(0,z.jsx)("span",{className:"text-sm font-medium",children:"No transactions"})}),b===W.SUCCESS&&w.map((e,t)=>{let a=t===w.length-1;return(0,z.jsx)(TransactionsTableClaimableRow,{tx:e,className:a?"":"border-b border-black"},"".concat(e.txId,"-").concat(e.direction))})]})]})]})}let CustomMessageWarning=e=>{let{children:t}=e;return(0,z.jsx)("div",{className:"flex items-center gap-1 rounded-md bg-orange p-2 text-base text-dark lg:flex-nowrap",children:t})},TransactionHistory=e=>{let{depositsPageParams:t,withdrawalsPageParams:a,depositsData:s,depositsLoading:r,depositsError:n,withdrawalsData:i,withdrawalsLoading:o,withdrawalsError:l,setDepositsPageParams:d,setWithdrawalsPageParams:c}=e,{chain:u}=(0,X.LN)(),{l1:m,l2:p}=useNetworksAndSigners(),{isSmartContractWallet:h}=useAccountType(),{showCctpDepositsTransactions:x,showCctpWithdrawalsTransactions:f,setTransactionHistoryTab:g}=useAppContextActions(),{layout:{transactionHistorySelectedTab:b}}=useAppContextState(),{pendingIds:w,transfers:C,transfersIds:v}=useCctpState(),{address:A}=(0,X.mA)(),{isLoadingDeposits:T,depositsError:k}=useCctpFetching({l1ChainId:m.network.id,l2ChainId:p.network.id,walletAddress:A,pageSize:10,pageNumber:0,type:"deposits"}),{isLoadingWithdrawals:N,withdrawalsError:j}=useCctpFetching({l1ChainId:m.network.id,l2ChainId:p.network.id,walletAddress:A,pageSize:10,pageNumber:0,type:"withdrawals"}),{app:{mergedTransactions:S}}=tt(),D=(0,eU.CR)(p.network.id).isOrbitChain,E=(0,Y.useMemo)(()=>{let e=w.map(e=>C[e]).filter(Boolean),t=S.concat(e).sort((e,t)=>e.createdAt&&t.createdAt?ek()(t.createdAt).isAfter(e.createdAt)?1:-1:t.blockNum&&e.blockNum?t.blockNum-e.blockNum:0);return t.filter(e=>isPending(e))},[S,w,C]),L=(0,Y.useMemo)(()=>S.filter(e=>isFailed(e)),[S]),I="roundedTab ui-not-selected:arb-hover relative flex flex-row flex-nowrap items-center gap-0.5 md:gap-2 rounded-tl-lg rounded-tr-lg px-2 md:px-4 py-2 text-base ui-selected:bg-white ui-not-selected:text-white justify-center md:justify-start grow md:grow-0",R=(0,Y.useCallback)(e=>{if(!h||!u)return;let t=e===y.CCTP,a=(0,eU.CR)(u.id).isArbitrum;t&&(a?x():f())},[u,h,x,f]);(0,Y.useEffect)(()=>{R(0)},[R]),(0,Y.useEffect)(()=>{0===v.length&&g(0)},[A,u,g,v]);let M=v.length>0&&!D;return(0,z.jsxs)("div",{className:"flex flex-col justify-around gap-6",children:[(0,eU.CR)(p.network.id).isOrbitChain&&(0,z.jsx)(CustomMessageWarning,{children:"Fetching transaction history details might be slower for Orbit chains."}),(0,z.jsx)(PendingTransactions,{loading:r||o||T||N,transactions:E,error:n||l||k||j}),(0,z.jsx)(FailedTransactionsWarning,{transactions:L}),(0,z.jsx)("div",{children:(0,z.jsxs)(tR.O.Group,{onChange:e=>{R(e),g(e)},selectedIndex:b,children:[(0,z.jsxs)(tR.O.List,{className:"flex flex-row whitespace-nowrap",children:[(0,z.jsxs)(tM,{"aria-label":"show deposit transactions",className:(0,eo.m6)(I,"roundedTabRight"),children:[(0,z.jsx)(en(),{src:(0,eU.Kn)(p.network.id),className:"hidden h-6 w-auto md:block",alt:"Deposit",height:24,width:24}),(0,z.jsx)("span",{className:"text-xs md:text-base",children:"To ".concat((0,eU.pp)(p.network.id))})]}),(0,z.jsxs)(tM,{"aria-label":"show withdrawal transactions",className:(0,eo.m6)(I,"roundedTabLeft",M?"roundedTabRight":"md:roundedTabRight"),children:[(0,z.jsx)(en(),{src:(0,eU.Kn)(m.network.id),className:"hidden h-6 w-auto md:block",alt:"Withdraw",width:24,height:24}),(0,z.jsx)("span",{className:"text-xs md:text-base",children:"To ".concat((0,eU.pp)(m.network.id))})]}),M&&(0,z.jsxs)(tM,{"aria-label":"show CCTP (Native USDC) transactions",className:(0,eo.m6)(I,"roundedTabLeft","md:roundedTabRight"),children:[(0,z.jsx)(en(),{src:"/icons/cctp.svg",className:"hidden h-6 w-auto md:block",alt:"Cross-Chain Transfer Protocol (Native USDC)",width:24,height:24}),(0,z.jsx)("span",{className:"hidden text-base md:block",children:"Cross-Chain Transfer Protocol (Native USDC)"}),(0,z.jsx)("span",{className:"text-xs md:hidden",children:"CCTP (Native USDC)"})]})]}),(0,z.jsxs)(tR.O.Panel,{className:"overflow-auto",children:[(0,z.jsx)("div",{className:"sticky h-2 rounded-tr-lg bg-white"}),(0,z.jsx)(TransactionsTable,{type:"deposits",pageParams:t,setPageParams:d,transactions:s.transformedDeposits,loading:r,error:n})]}),(0,z.jsxs)(tR.O.Panel,{className:"overflow-auto",children:[(0,z.jsx)("div",{className:(0,eo.m6)("sticky h-2 rounded-tl-lg bg-white",M?"rounded-tr-lg":"md:rounded-tr-lg")}),(0,z.jsx)(TransactionsTable,{type:"withdrawals",pageParams:a,setPageParams:c,transactions:i.transformedWithdrawals,loading:o,error:l})]}),M&&(0,z.jsxs)(tR.O.Panel,{className:"overflow-auto",children:[(0,z.jsx)("div",{className:"sticky h-2 rounded-tl-lg bg-white md:rounded-tr-lg"}),(0,z.jsx)(TransactionsTableCctp,{})]})]})})]})},SidePanel=e=>{let{isOpen:t,heading:a,onClose:s,children:r,panelClassNameOverrides:n=""}=e;return(0,z.jsx)(em.u,{show:t,duration:"normal",children:(0,z.jsxs)(es.V,{open:t,onClose:()=>null==s?void 0:s(),className:"fixed z-50",children:[(0,z.jsx)("div",{className:"fixed inset-0 bg-dark opacity-70","aria-hidden":"true"}),(0,z.jsx)("div",{className:"fixed inset-0 right-0 top-0 flex h-full w-full items-start justify-end overflow-y-auto",children:(0,z.jsxs)(es.V.Panel,{className:(0,eo.m6)("side-panel flex h-full w-full flex-col bg-dark lg:w-1/2 lg:min-w-[900px]",n),children:[(0,z.jsxs)(es.V.Title,{className:"sticky top-0 z-50 mx-4 flex flex-row justify-between border-b-[1px] border-gray-6 bg-dark py-4 text-white",children:[(0,z.jsx)("span",{className:"text-xl",children:a}),(0,z.jsx)("button",{className:"arb-hover",onClick:s,children:(0,z.jsx)(eu.Z,{className:"h-6 w-6 text-white"})})]}),(0,z.jsx)("div",{className:"side-panel-content z-40 h-full overflow-auto p-4",children:r})]})})]})})},fetchDepositsFromSubgraph=async e=>{let{sender:t,receiver:a,fromBlock:s,toBlock:r,l2ChainId:n,pageSize:i=10,pageNumber:o=0,searchString:l=""}=e;if(s>=r)return[];let d=new URLSearchParams((0,et.$m)({sender:t,receiver:a,fromBlock:s,toBlock:r,l2ChainId:n,pageSize:i,page:o,search:l})),c=await fetch("".concat((0,et.DZ)(),"/api/deposits?").concat(d),{method:"GET",headers:{"Content-Type":"application/json"}}),u=(await c.json()).data;return u};var aw=a(73235),ay=a(96279),aC=a.n(ay),av=a(54578),aA=a(75845),aT=a(28205),ak=a(60138);function _templateObject(){let e=(0,aw._)(["\n        {\n          _meta {\n            block {\n              number\n            }\n          }\n        }\n      "]);return _templateObject=function(){return e},e}let aN={ArbitrumOne:new av.f({link:new aA.u({uri:"https://api.thegraph.com/subgraphs/name/gvladika/arb-bridge-eth-nitro",fetch:aC()}),cache:new aT.h}),ArbitrumNova:new av.f({link:new aA.u({uri:"https://api.thegraph.com/subgraphs/name/gvladika/arb-bridge-eth-nova",fetch:aC()}),cache:new aT.h}),ArbitrumGoerli:new av.f({link:new aA.u({uri:"https://api.thegraph.com/subgraphs/name/gvladika/arb-bridge-eth-goerli",fetch:aC()}),cache:new aT.h})},aj={ArbitrumOne:new av.f({link:new aA.u({uri:"https://api.thegraph.com/subgraphs/name/gvladika/layer2-token-gateway-arb1",fetch:aC()}),cache:new aT.h}),ArbitrumGoerli:new av.f({link:new aA.u({uri:"https://api.thegraph.com/subgraphs/name/gvladika/layer2-token-gateway-goerli",fetch:aC()}),cache:new aT.h})},fetchBlockNumberFromSubgraph=async(e,t)=>{let a="L2"===e?function(e){switch(e){case 42161:return aj.ArbitrumOne;case 421613:return aj.ArbitrumGoerli;default:throw Error("[getL2SubgraphClient] Unsupported network: ".concat(e))}}(t):function(e){switch(e){case 42161:return aN.ArbitrumOne;case 42170:return aN.ArbitrumNova;case 421613:return aN.ArbitrumGoerli;default:throw Error("[getL1SubgraphClient] Unsupported network: ".concat(e))}}(t),s=await a.query({query:(0,ak.Ps)(_templateObject())});return s.data._meta.block.number},tryFetchLatestSubgraphBlockNumber=async(e,t)=>{try{return await fetchBlockNumberFromSubgraph(e,t)}catch(e){return 0}},shouldIncludeSentTxs=e=>{let{type:t,isSmartContractWallet:a,isConnectedToParentChain:s}=e;return!a||(s?"deposit"===t:"withdrawal"===t)},shouldIncludeReceivedTxs=e=>{let{type:t,isSmartContractWallet:a,isConnectedToParentChain:s}=e;return!a||(s?"withdrawal"===t:"deposit"===t)},fetchDeposits=async e=>{let{sender:t,receiver:a,fromBlock:s,toBlock:r,l1Provider:n,l2Provider:i,pageSize:o=10,pageNumber:l=0,searchString:d=""}=e;if(void 0===t&&void 0===a||!n||!i)return[];let c=(await n.getNetwork()).chainId,u=(await i.getNetwork()).chainId,m=await fetchNativeCurrency({provider:i});if(s||(s=0),!r){let e=await tryFetchLatestSubgraphBlockNumber("L1",u);e||(e=await n.getBlockNumber()),r=e}let p=await fetchDepositsFromSubgraph({sender:t,receiver:a,fromBlock:s,toBlock:r,l2ChainId:u,pageSize:o,pageNumber:l,searchString:d}),h=p.map(e=>{var t,a,s,r;let n="EthDeposit"===e.type,i={assetName:m.symbol,assetType:v.ETH,tokenAddress:""};if(!n){let t=(null===(a=e.l1Token)||void 0===a?void 0:a.symbol)||"";i.assetName=t,i.assetType=v.ERC20,i.tokenAddress=(null==e?void 0:null===(s=e.l1Token)||void 0===s?void 0:s.id)||""}let o=n?e.ethValue:e.tokenAmount,l=null!==(r=null==e?void 0:null===(t=e.l1Token)||void 0===t?void 0:t.decimals)&&void 0!==r?r:0,d=n?m.decimals:l;return{type:"deposit-l1",status:"pending",value:ej.formatUnits(o||0,d),txID:e.transactionHash,tokenAddress:i.tokenAddress,sender:e.sender,destination:e.receiver,assetName:i.assetName,assetType:i.assetType,l1NetworkID:String(c),l2NetworkID:String(u),blockNumber:Number(e.blockCreatedAt),timestampCreated:e.timestamp,isClassic:e.isClassic,chainId:u,parentChainId:c}});return h},updateAdditionalDepositData=async(e,t,a)=>{let s=new Date().toISOString();e.timestampCreated?s=String(1e3*Number(e.timestampCreated)):e.blockNumber&&(s=String(1e3*(await t.getBlock(e.blockNumber)).timestamp));let{isClassic:r}=e,n=e.assetType===v.ETH,{l1ToL2Msg:i}=await getL1ToL2MessageDataFromL1TxHash({depositTxId:e.txID,l1Provider:t,l2Provider:a,isEthDeposit:n,isClassic:r});return r?updateClassicDepositStatusData({depositTx:e,l1ToL2Msg:i,isEthDeposit:n,timestampCreated:s,l2Provider:a}):n?updateETHDepositStatusData({depositTx:e,ethDepositMessage:i,l2Provider:a,timestampCreated:s}):updateTokenDepositStatusData({depositTx:e,l1ToL2Msg:i,timestampCreated:s,l1Provider:t,l2Provider:a})},updateETHDepositStatusData=async e=>{let{depositTx:t,ethDepositMessage:a,l2Provider:s,timestampCreated:r}=e;if(!a)return t;let n=await a.status(),i=n===ev.EthDepositStatus.DEPOSITED,o=a.l2DepositTxHash,l=i?(await s.getTransaction(o)).blockNumber:null,d=l?1e3*(await s.getBlock(l)).timestamp:null,c={...t,status:o?"success":"pending",timestampCreated:r,timestampResolved:d?String(d):void 0,l1ToL2MsgData:{status:i?ev.L1ToL2MessageStatus.FUNDS_DEPOSITED_ON_L2:ev.L1ToL2MessageStatus.NOT_YET_CREATED,retryableCreationTxID:o,l2TxID:i?a.l2DepositTxHash:void 0,fetchingUpdate:!1}};return c},updateTokenDepositStatusData=async e=>{let{depositTx:t,l1ToL2Msg:a,timestampCreated:s,l1Provider:r,l2Provider:n}=e,i={...t,timestampCreated:s},{tokenAddress:o,assetName:l}=i;if(!l&&o){let{symbol:e}=await fetchErc20Data({address:o,provider:r});i.assetName=e}if(!a)return i;let d=await a.getSuccessfulRedeem(),c=d.status===ev.L1ToL2MessageStatus.REDEEMED?d.l2TxReceipt.transactionHash:void 0,u={status:d.status,l2TxID:c,fetchingUpdate:!1,retryableCreationTxID:a.retryableCreationId},m=u.status===ev.L1ToL2MessageStatus.REDEEMED,p=m?(await n.getTransaction(a.retryableCreationId)).blockNumber:null,h=p?1e3*(await n.getBlock(p)).timestamp:null,x={...i,status:a.retryableCreationId?"success":"pending",timestampCreated:s,timestampResolved:h?String(h):void 0,l1ToL2MsgData:u};return x},updateClassicDepositStatusData=async e=>{let{depositTx:t,l1ToL2Msg:a,isEthDeposit:s,timestampCreated:r,l2Provider:n}=e,i={...t,timestampCreated:r},o=await a.status(),l=s&&o>=ev.L1ToL2MessageStatus.FUNDS_DEPOSITED_ON_L2,d=l?a.retryableCreationId:o===ev.L1ToL2MessageStatus.REDEEMED?a.l2TxHash:void 0,c={status:o,l2TxID:d,fetchingUpdate:!1,retryableCreationTxID:a.retryableCreationId},u=d?(await n.getTransaction(d)).blockNumber:null,m=u?1e3*(await n.getBlock(u)).timestamp:null,p={...i,status:d?"success":"pending",timestampCreated:r,timestampResolved:m?String(m):void 0,l1ToL2MsgData:c};return p},getL1ToL2MessageDataFromL1TxHash=async e=>{let{depositTxId:t,isEthDeposit:a,l1Provider:s,l2Provider:r,isClassic:n}=e,i=await s.getTransactionReceipt(t);if(!i)return{};let o=new ev.L1TransactionReceipt(i),getClassicDepositMessage=async()=>{let[e]=await o.getL1ToL2MessagesClassic(r);return{isClassic:!0,l1ToL2Msg:e}},getNitroDepositMessage=async()=>{if(a){let[e]=await o.getEthDeposits(r);return{isClassic:!1,l1ToL2Msg:e}}let[e]=await o.getL1ToL2Messages(r);return{isClassic:!1,l1ToL2Msg:e}},l=null!=n?n:await o.isClassic(r);return l?getClassicDepositMessage():getNitroDepositMessage()},fetchCompleteDepositData=async e=>{let t=await fetchDeposits(e),a=await Promise.all(t.map(t=>updateAdditionalDepositData(t,e.l1Provider,e.l2Provider))),s=new Map,r=a.map(transformDeposit);r.forEach(e=>{isPending(e)&&s.set(e.txId,!0)});let n=a.filter(e=>void 0!==s.get(e.txID));return{deposits:a,pendingDeposits:n,transformedDeposits:r}},useDeposits=e=>{let{l1:t,l2:a}=useNetworksAndSigners(),{isSmartContractWallet:s,isLoading:r}=useAccountType(),n=(0,X.xx)(),i=t.network.id===n,o=(0,Y.useMemo)(()=>t.provider,[t.network.id]),l=(0,Y.useMemo)(()=>a.provider,[a.network.id]),{address:d}=(0,X.mA)(),c=!r&&shouldIncludeSentTxs({type:"deposit",isSmartContractWallet:s,isConnectedToParentChain:i}),u=!r&&shouldIncludeReceivedTxs({type:"deposit",isSmartContractWallet:s,isConnectedToParentChain:i});return(0,e6.Z)(d?["deposits",d,o,l,e.pageNumber,e.pageSize,e.searchString,r]:null,e=>{let[,t,a,s,r,n,i]=e;return fetchCompleteDepositData({sender:c?t:void 0,receiver:u?t:void 0,l1Provider:a,l2Provider:s,pageNumber:r,pageSize:n,searchString:i})})};var aS=a(32235);let updateAdditionalWithdrawalData=async(e,t,a)=>{let s=await attachNodeBlockDeadlineToEvent(e,t,a);return s};async function attachTimestampToTokenWithdrawal(e){let{withdrawal:t,l2Provider:a}=e,s=await a.getTransactionReceipt(t.txHash),r=new ev.L2TransactionReceipt(s),[n]=r.getL2ToL1Events();return{...t,timestamp:null==n?void 0:n.timestamp}}async function mapETHWithdrawalToL2ToL1EventResult(e,t,a,s){let{callvalue:r}=e,n=await getOutgoingMessageState(e,t,a,s),i=await fetchNativeCurrency({provider:a});return{...e,sender:e.caller,destinationAddress:e.destination,type:v.ETH,value:r,symbol:i.symbol,outgoingMessageState:n,decimals:i.decimals,l2TxHash:e.l2TxHash||e.transactionHash}}async function getOutgoingMessageState(e,t,a,s){let r=getExecutedMessagesCacheKey({event:e,l2ChainId:s}),n=JSON.parse(localStorage.getItem("arbitrum:bridge:executed-messages")||"{}");if(n[r])return ev.L2ToL1MessageStatus.EXECUTED;let i=new ev.L2ToL1MessageReader(t,e);try{return await i.status(a)}catch(e){return ev.L2ToL1MessageStatus.UNCONFIRMED}}async function attachNodeBlockDeadlineToEvent(e,t,a){if(e.outgoingMessageState===ev.L2ToL1MessageStatus.EXECUTED||e.outgoingMessageState===ev.L2ToL1MessageStatus.CONFIRMED)return e;let s=ev.L2ToL1MessageReader.fromEvent(t,e);try{let t=await s.getFirstExecutableBlock(a);return{...e,nodeBlockDeadline:null==t?void 0:t.toNumber()}}catch(a){var r;let t=a&&(a.message||(null===(r=a.error)||void 0===r?void 0:r.message));if(t.includes("batch doesn't exist")){let t=A.NODE_NOT_CREATED;return{...e,nodeBlockDeadline:t}}if(t.includes("CALL_EXCEPTION")){let t=A.EXECUTE_CALL_EXCEPTION;return{...e,nodeBlockDeadline:t}}throw a}}async function mapTokenWithdrawalFromEventLogsToL2ToL1EventResult(e,t,a,s){let{symbol:r,decimals:n}=await fetchErc20Data({address:e.l1Token,provider:t}),i=await a.getTransactionReceipt(e.txHash),o=new ev.L2TransactionReceipt(i),[l]=o.getL2ToL1Events();if(!l)return;let d=await getOutgoingMessageState(l,t,a,s),c=aS.id("TransferRouted(address,address,address,address)"),u=i.logs.find(e=>!!e&&e.topics[0]===c),m=null==u?void 0:u.topics[2],p=null==u?void 0:u.topics[3];return m&&!tJ.isAddress(m)&&(m="0x"+m.slice(-40)),p&&!tJ.isAddress(p)&&(p="0x"+p.slice(-40)),{...l,sender:m,destinationAddress:p,type:v.ERC20,value:e._amount,tokenAddress:e.l1Token,outgoingMessageState:d,symbol:r,decimals:n,l2TxHash:o.transactionHash}}async function mapWithdrawalToL2ToL1EventResult(e,t,a,s){var r;let n=await a.getTransactionReceipt(e.l2TxHash),i=new ev.L2TransactionReceipt(n),[o]=i.getL2ToL1Events();if(!o)return;let l=await getOutgoingMessageState(o,t,a,s);if("TokenWithdrawal"===e.type&&(null==e?void 0:null===(r=e.l1Token)||void 0===r?void 0:r.id)){let{symbol:a,decimals:s}=await fetchErc20Data({address:e.l1Token.id,provider:t});return{...o,sender:e.sender,destinationAddress:e.receiver,type:v.ERC20,value:eN.O$.from(e.tokenAmount),tokenAddress:e.l1Token.id,outgoingMessageState:l,symbol:a,decimals:s,l2TxHash:i.transactionHash}}let d=await fetchNativeCurrency({provider:a});return{...o,sender:e.sender,destinationAddress:e.receiver,type:v.ETH,value:eN.O$.from(e.ethValue),outgoingMessageState:l,l2TxHash:i.transactionHash,symbol:d.symbol,decimals:d.decimals}}async function fetchWithdrawalsFromSubgraph(e){let{sender:t,receiver:a,fromBlock:s,toBlock:r,l2ChainId:n,pageSize:i=10,pageNumber:o=0,searchString:l=""}=e;if(s>=r)return[];let d=new URLSearchParams((0,et.$m)({sender:t,receiver:a,fromBlock:s,toBlock:r,l2ChainId:n,pageSize:i,page:o,search:l})),c=await fetch("".concat((0,et.DZ)(),"/api/withdrawals?").concat(d),{method:"GET",headers:{"Content-Type":"application/json"}}),u=(await c.json()).data;return u}async function fetchTokenWithdrawalsFromEventLogs(e){var t;let{sender:a,receiver:s,fromBlock:r,toBlock:n,l2Provider:i,l2GatewayAddresses:o=[]}=e,l=await ev.Erc20Bridger.fromProvider(i),d=[];return o.forEach(e=>{a&&d.push(l.getL2WithdrawalEvents(i,e,{fromBlock:r,toBlock:n},void 0,a,void 0)),s&&d.push(l.getL2WithdrawalEvents(i,e,{fromBlock:r,toBlock:n},void 0,void 0,s))}),t=(await Promise.all(d)).flat(),[...new Map(t.map(e=>[e.txHash,e])).values()]}async function fetchL2Gateways(e){let t=await (0,ev.getL2Network)(e),{l2ERC20Gateway:a,l2CustomGateway:s,l2WethGateway:r}=t.tokenBridge,n=[a,s,r],i=eU.QD[t.chainID],o=eU.Uj[t.chainID],l=eU.t9[t.chainID],d=eU.wy[t.chainID];return i&&n.push(i),o&&n.push(o),l&&n.push(l),d&&n.push(d),n}function sortByTimestampDescending(e,t){var a,s;let r=null!==(a=e.timestamp)&&void 0!==a?a:eD._Y,n=null!==(s=t.timestamp)&&void 0!==s?s:eD._Y;return r.gt(n)?-1:1}let fetchWithdrawals=async e=>{let{sender:t,receiver:a,l1Provider:s,l2Provider:r,pageNumber:n=0,pageSize:i=10,searchString:o,fromBlock:l,toBlock:d}=e;if(void 0===t&&void 0===a)return[];let c=(await s.getNetwork()).chainId,u=(await r.getNetwork()).chainId,m=await fetchL2Gateways(r);if(l||(l=0),!d){let e=await tryFetchLatestSubgraphBlockNumber("L2",u);d=e}let[p,h,x]=await Promise.all([fetchWithdrawalsFromSubgraph({sender:t,receiver:a,fromBlock:l,toBlock:d,l2ChainId:u,pageNumber:n,pageSize:i,searchString:o}),function(e){let{receiver:t,fromBlock:a,toBlock:s,l2Provider:r}=e;return void 0===t?[]:ev.L2ToL1MessageReader.getL2ToL1Events(r,{fromBlock:a,toBlock:s},void 0,t)}({receiver:a,fromBlock:d+1,toBlock:"latest",l2Provider:r}),fetchTokenWithdrawalsFromEventLogs({sender:t,receiver:a,fromBlock:d+1,toBlock:"latest",l2Provider:r,l2GatewayAddresses:m})]),f=n*i,g=f+i,b=await Promise.all(x.map(e=>attachTimestampToTokenWithdrawal({withdrawal:e,l2Provider:r}))),w=[...h,...b].sort(sortByTimestampDescending).slice(f,g),y=[],C=[];for(let e of w)void 0!==e.l1Token?y.push(e):C.push(e);let v=await Promise.all(y.map(e=>mapTokenWithdrawalFromEventLogsToL2ToL1EventResult(e,s,r,u))),A=[...await Promise.all([...p.map(e=>mapWithdrawalToL2ToL1EventResult(e,s,r,u)),...C.map(e=>mapETHWithdrawalToL2ToL1EventResult(e,s,r,u))]),...v].filter(e=>void 0!==e).sort(sortByTimestampDescending);return A.map(e=>({...e,chainId:u,parentChainId:c}))},fetchCompleteWithdrawalData=async e=>{let t=await fetchWithdrawals(e),a=await Promise.all(t.map(t=>updateAdditionalWithdrawalData(t,e.l1Provider,e.l2Provider))),s=new Map,r=a.sort((e,t)=>+t.timestamp-+e.timestamp).map(transformWithdrawal);r.forEach(e=>{isPending(e)&&s.set(e.txId,!0)});let n=a.filter(e=>e.l2TxHash&&void 0!==s.get(e.l2TxHash));return{withdrawals:a,pendingWithdrawals:n,transformedWithdrawals:r}},useWithdrawals=e=>{let{l1:t,l2:a}=useNetworksAndSigners(),{isSmartContractWallet:s,isLoading:r}=useAccountType(),n=(0,X.xx)(),i=t.network.id===n,o=(0,Y.useMemo)(()=>t.provider,[t.network.id]),l=(0,Y.useMemo)(()=>a.provider,[a.network.id]),{address:d}=(0,X.mA)(),c=!r&&shouldIncludeSentTxs({type:"withdrawal",isSmartContractWallet:s,isConnectedToParentChain:i}),u=!r&&shouldIncludeReceivedTxs({type:"withdrawal",isSmartContractWallet:s,isConnectedToParentChain:i});return(0,e6.Z)(d?["withdrawals",d,o,l,e.pageNumber,e.pageSize,e.searchString,r]:null,e=>{let[,t,a,s,r,n,i]=e;return fetchCompleteWithdrawalData({sender:c?t:void 0,receiver:u?t:void 0,l1Provider:a,l2Provider:s,pageNumber:r,pageSize:n,searchString:i})})},TransactionStatusInfo=e=>{let{deposits:t}=e,{l2:{network:a}}=useNetworksAndSigners(),s=(0,eU.pp)(a.id),{openTransactionHistoryPanel:r,setTransactionHistoryTab:n}=useAppContextActions(),{app:{mergedTransactions:i}}=tt(),o=i.filter(e=>isWithdrawalReadyToClaim(e)).length,l=t.filter(e=>isDepositReadyToRedeem(e)).length;return 0===o&&0===l?null:(0,z.jsx)("div",{className:(0,eo.m6)("mx-0 flex cursor-pointer flex-wrap items-center gap-1  p-2 text-sm lg:flex-nowrap lg:rounded-md lg:text-base",l?"bg-brick text-brick-dark":"bg-lime text-lime-dark"),onClick:()=>{n(y.DEPOSITS),r(),shouldTrackAnalytics(s)&&trackEvent("Open Transaction History Click",{pageElement:"Tx Info Banner"})},children:(0,z.jsxs)("div",{className:"inline",children:[l?(0,z.jsx)(tp.Z,{className:"-mt-1 mr-2 inline h-4 w-4"}):(0,z.jsx)(t9.Z,{className:"-mt-1 mr-2 inline h-4 w-4"}),"You have"," ",l?(0,z.jsx)("span",{className:"font-bold",children:"".concat(l," ").concat(l>1?"deposits":"deposit"," to retry")}):null,l&&o?(0,z.jsxs)("span",{children:[" ","and"," "]}):null,o?(0,z.jsx)("span",{className:"font-bold",children:"".concat(o," ").concat(o>1?"withdrawals":"withdrawal"," ready to claim")}):null,(0,z.jsxs)("span",{children:["."," "]}),(0,z.jsx)(ed.d,{className:"arb-hover text-sm underline lg:text-base",children:"Open Transaction History panel."})]})})};var aD=a(11700);let aE={tps:null},fetchNetworkTPS=async e=>{let t=(0,eU.CR)(Number(e)).isArbitrumNova||(0,eU.CR)(Number(e)).isArbitrumOne;if(!t)return aE;let a=(0,eU.jY)(Number(e)),s="https://corsproxy.io/?".concat(encodeURIComponent(a)),r=await J.Z.get(s),n=r.data,i=(0,aD.zD)(n),o=i('span[title="Transactions per Second - Adjusted for Arbitrum Nitro system txs"]'),l=((null==o?void 0:o.text())||"").trim().replace(/[()]/g,"").split(" ")[0];return{tps:isNaN(Number(l))?null:Number(l)}},useNetworkTPS=()=>{let{l2:{network:{id:e}}}=useNetworksAndSigners();return(0,eR.ZP)(["tps",e],e=>{let[,t]=e;return fetchNetworkTPS(t)},{refreshInterval:3e4,shouldRetryOnError:!1})},aL="arbitrum:bridge:preferences:stats",getActivityThresholdL1=e=>e<20?{className:"text-[#008000]"}:e<40?{className:"text-orange-arbitrum-nova"}:{className:"text-[#ff0000]"},getActivityThresholdL2=e=>e<.5?{className:"text-[#008000]"}:e<2?{className:"text-orange-arbitrum-nova"}:{className:"text-[#ff0000]"},ArbitrumStats=()=>{let[,e]=(0,eS.ZP)(aL),[{settingsOpen:t}]=useArbQueryParams(),{l1:a,l2:s}=useNetworksAndSigners(),{parentLayer:r,layer:n}=useChainLayers(),{data:i}=(0,X.Ov)({chainId:a.network.id,watch:!0}),{data:o}=(0,X.Ov)({chainId:s.network.id,watch:!0}),{data:l,isValidating:d}=useNetworkTPS(),c=useGasPrice({provider:a.provider}),u=ej.formatUnits(c,"gwei"),m=getActivityThresholdL1(Number(u||0)),p=useGasPrice({provider:s.provider}),h=ej.formatUnits(p,"gwei"),x=getActivityThresholdL2(Number(h||0));return(0,z.jsxs)("div",{className:"fixed bottom-0 right-0 z-[100] m-4 flex flex-col gap-2 whitespace-nowrap rounded-md bg-[#000000d1] p-4 font-[monospace] text-xs text-gray-6",children:[(0,z.jsxs)("div",{className:"section flex flex-col",children:[(0,z.jsxs)("span",{className:"text-md text-white",children:[(0,z.jsx)("span",{className:"mr-1 animate-pulse text-lg text-[#008000]",children:""})," ",(0,eU.pp)(a.network.id)," (",r,")"]}),(0,z.jsxs)("span",{children:["> Block:"," ",i||"Loading..."]}),(0,z.jsxs)("span",{children:["> Gas price:"," ",(0,z.jsxs)("span",{className:"".concat(m.className),children:[" ",Number(u).toFixed(2)," Gwei"," "]})]})]}),(0,z.jsxs)("div",{className:"section flex flex-col",children:[(0,z.jsxs)("span",{className:"text-md text-white",children:[(0,z.jsx)("span",{className:"mr-1 animate-pulse text-lg text-[#008000]",children:""})," ",(0,eU.pp)(s.network.id)," (",n,")"]}),(0,z.jsxs)("span",{children:["> Block:"," ",o||"Loading..."]}),(0,z.jsxs)("span",{children:["> Gas price:"," ",(0,z.jsxs)("span",{className:"".concat(x.className),children:[" ",Number(h).toFixed(2)," Gwei"," "]})]}),!(0,eU.CR)(s.network.id).isTestnet&&(0,z.jsxs)("span",{children:["> TPS: ",d&&(0,z.jsx)("span",{children:"Loading..."}),!d&&(0,z.jsx)("span",{children:(null==l?void 0:l.tps)?"".concat(l.tps," TPS"):"-"})]})]}),!t&&(0,z.jsx)("button",{className:"absolute right-4 top-4 cursor-pointer",onClick:()=>{e(!1)},children:"[x]"})]})},aI="arbitrum-classic-theme",aR=[{id:"space",label:"Space",description:"A dark, space-themed UI with a sleek and futuristic aesthetic, featuring Arbinaut on a backdrop of shining stars and moon."},{id:aI,label:"Arbitrum Classic",description:"Arbitrum before it was cool: A reminiscent of the pre-nitro era, with simple, solid buttons, a minimal purple layout and chunky fonts."}],useTheme=()=>{let[e,t]=(0,eS.ZP)("arbitrum:bridge:preferences:theme");return(0,Y.useEffect)(()=>{e&&(document.body.className=e)},[e]),[e,t]};var aM=a(3061),aU=a(51906),aO=a(30195);let a_="arbitrum:orbit:configs",aB=aO.z.string().refine(e=>(0,tu.isAddress)(e),"Invalid address"),aP=aO.z.number().int().positive().refine(e=>!Object.values(eU.a_).includes(e),"Invalid custom Orbit chain ID").refine(e=>!(0,eU.LD)(e),"Custom chain already added"),aF=aO.z.number().int().positive().refine(e=>eU.OS.includes(e),"Unsupported parent chain ID"),aG=aO.z.object({customGateway:aB,multicall:aB,proxyAdmin:aB,router:aB,standardGateway:aB,weth:aB,wethGateway:aB}),aW=aO.z.object({chainInfo:aO.z.object({minL2BaseFee:aO.z.number().nonnegative().int(),networkFeeReceiver:aB,infrastructureFeeCollector:aB,batchPoster:aB,staker:aB,chainOwner:aB,chainName:aO.z.string(),chainId:aP,parentChainId:aF,rpcUrl:aO.z.string().url(),explorerUrl:aO.z.string().url(),nativeToken:aB.optional()}),coreContracts:aO.z.object({rollup:aB,inbox:aB,outbox:aB,adminProxy:aB,sequencerInbox:aB,bridge:aB,utils:aB,validatorWalletCreator:aB}),tokenBridgeContracts:aO.z.object({l2Contracts:aG,l3Contracts:aG})});function getOrbitConfigsFromLocalStorage(){let e=localStorage.getItem(a_);return e?JSON.parse(e):[]}async function fetchNativeToken(e){let t=e.chainInfo.nativeToken,a=void 0===t||t===aU.d;if(a)return{nativeToken:void 0,nativeTokenData:void 0};let s=await fetchErc20Data({address:t,provider:new eP.c(eU.Cl[e.chainInfo.parentChainId])});return{nativeToken:t,nativeTokenData:s}}let AddCustomChain=()=>{let[e,t]=(0,Y.useState)(""),[a,s]=(0,Y.useState)(null),[r,n]=(0,Y.useState)(!1),i=(0,eU.ud)();async function onAddChain(){var t;n(!0),s(null);try{let t=JSON.parse(e.trim().replace(/[\r\n]+/g,""));if(!t)throw Error("JSON input is empty.");aW.parse(t);let a={chainID:t.chainInfo.chainId,confirmPeriodBlocks:150,ethBridge:{bridge:t.coreContracts.bridge,inbox:t.coreContracts.inbox,outbox:t.coreContracts.outbox,rollup:t.coreContracts.rollup,sequencerInbox:t.coreContracts.sequencerInbox},rpcUrl:t.chainInfo.rpcUrl,explorerUrl:t.chainInfo.explorerUrl,isCustom:!0,name:t.chainInfo.chainName,partnerChainID:t.chainInfo.parentChainId,retryableLifetimeSeconds:604800,nitroGenesisBlock:0,nitroGenesisL1Block:0,depositTimeout:9e5,nativeToken:t.chainInfo.nativeToken,isArbitrum:!0,tokenBridge:{l1CustomGateway:t.tokenBridgeContracts.l2Contracts.customGateway,l1ERC20Gateway:t.tokenBridgeContracts.l2Contracts.standardGateway,l1GatewayRouter:t.tokenBridgeContracts.l2Contracts.router,l1MultiCall:t.tokenBridgeContracts.l2Contracts.multicall,l1ProxyAdmin:t.tokenBridgeContracts.l2Contracts.proxyAdmin,l1Weth:t.tokenBridgeContracts.l2Contracts.weth,l1WethGateway:t.tokenBridgeContracts.l2Contracts.wethGateway,l2CustomGateway:t.tokenBridgeContracts.l3Contracts.customGateway,l2ERC20Gateway:t.tokenBridgeContracts.l3Contracts.standardGateway,l2GatewayRouter:t.tokenBridgeContracts.l3Contracts.router,l2Multicall:t.tokenBridgeContracts.l3Contracts.multicall,l2ProxyAdmin:t.tokenBridgeContracts.l3Contracts.proxyAdmin,l2Weth:t.tokenBridgeContracts.l3Contracts.weth,l2WethGateway:t.tokenBridgeContracts.l3Contracts.wethGateway}},s=await fetchNativeToken(t);(0,ev.addCustomChain)({customChain:a}),(0,eU.Ab)({...a,...s}),function(e){let t=getOrbitConfigsFromLocalStorage();localStorage.setItem(a_,JSON.stringify([...t,e]))}(t),location.reload()}catch(e){s(null!==(t=e.message)&&void 0!==t?t:"Something went wrong."),n(!1)}}return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)("textarea",{onChange:e=>t(e.target.value),placeholder:"Insert the JSON configuration from the `outputInfo.json` file that's generated at the end of the custom Orbit chain deployment.",className:"min-h-[100px] w-full rounded-lg px-4 py-2 text-sm font-light text-black"}),a&&(0,z.jsx)("div",{className:"relative",children:(0,z.jsxs)("pre",{className:"scroll mb-2 max-h-[400px] overflow-auto rounded-lg border border-white/20 bg-white/5 p-4 text-sm text-error",children:[(0,z.jsx)("button",{onClick:()=>s(null),className:"arb-hover absolute right-4 top-4 text-white",children:(0,z.jsx)(eu.Z,{width:24})}),a]})}),(0,z.jsx)("div",{className:"flex w-full justify-end",children:r?(0,z.jsx)(ea.a,{size:"small"}):(0,z.jsx)("button",{onClick:onAddChain,className:"rounded bg-white p-2 text-sm text-black transition-all hover:opacity-80 disabled:cursor-not-allowed disabled:opacity-50",disabled:!e.trim(),children:"Add Chain"})}),i.length>0&&!r&&(0,z.jsxs)("div",{className:"mt-4",children:[(0,z.jsx)("div",{className:"heading mb-4 text-lg",children:"Live Orbit Chains"}),(0,z.jsxs)("table",{className:"w-full text-left",children:[(0,z.jsx)("thead",{className:"border-b border-gray-600",children:(0,z.jsxs)("tr",{children:[(0,z.jsx)("th",{className:"pb-1 text-xs font-normal",children:"ORBIT CHAIN"}),(0,z.jsx)("th",{className:"pb-1 text-xs font-normal",children:"ORBIT CHAIN ID"}),(0,z.jsx)("th",{className:"pb-1 text-xs font-normal",children:"PARENT CHAIN"}),(0,z.jsx)("th",{className:"pb-1 text-xs font-normal",children:"PARENT CHAIN ID"}),(0,z.jsx)("th",{className:"pb-1 text-xs font-normal"})]})}),(0,z.jsx)("tbody",{children:i.map(e=>(0,z.jsxs)("tr",{className:"border-b border-gray-600",children:[(0,z.jsx)("th",{className:"max-w-[100px] truncate py-3 text-sm font-normal",children:e.name}),(0,z.jsx)("th",{className:"py-3 text-sm font-normal",children:e.chainID}),(0,z.jsx)("th",{className:"py-3 text-sm font-normal",children:(0,eU.pp)(e.partnerChainID)}),(0,z.jsx)("th",{className:"py-3 text-sm font-normal",children:e.partnerChainID}),(0,z.jsx)("th",{className:"py-3",children:(0,z.jsxs)(t3.J,{className:"relative",children:[(0,z.jsx)(t3.J.Button,{children:(0,z.jsx)(aM.Z,{width:20})}),(0,z.jsxs)(t3.J.Panel,{className:"absolute bottom-6 right-0 flex w-52 flex-col rounded bg-white text-xs font-normal text-black",children:[(0,z.jsx)("button",{className:"rounded p-4 text-left hover:bg-gray-3",onClick:()=>{(0,eU.dQ)(e.chainID),function(e){let t=getOrbitConfigsFromLocalStorage(),a=t.filter(t=>t.chainInfo.chainId!==e);localStorage.setItem(a_,JSON.stringify(a))}(e.chainID),location.reload()},children:"Delete this chain"}),(0,z.jsx)("a",{className:"rounded p-4 text-left hover:bg-gray-3",href:"data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(function(e){let t=getOrbitConfigsFromLocalStorage();return t.find(t=>t.chainInfo.chainId===e)}(e.chainID)))),download:"".concat(e.name.split(" ").join(""),".json"),children:"Download config for this chain"})]})]})})]},e.chainID))})]})]})]})};var aH=a(83970);let Radio=e=>{let{value:t,label:a,orientation:s,onChange:r,options:n}=e;return(0,z.jsxs)(aH.E,{value:t,onChange:r,className:"radio-switch",children:[a&&(0,z.jsx)(aH.E.Label,{className:"mb-4",children:a}),(0,z.jsx)("div",{className:"flex gap-6 ".concat("vertical"===s&&"flex-col items-start"),children:n.map(e=>(0,z.jsx)(aH.E.Option,{value:e.value,children:t=>{let{checked:a}=t;return(0,z.jsx)(z.Fragment,{children:(0,z.jsxs)("div",{className:"flex w-full cursor-pointer gap-3",children:[a?(0,z.jsx)("div",{className:"radio-selected mb-1 mt-[3px] h-4 w-4 shrink-0 rounded-full border border-white bg-white shadow-[inset_0_0_0_2px_rgba(0,0,0,1)]"}):(0,z.jsx)("div",{className:"mb-1 mt-[3px] h-4 w-4 shrink-0 rounded-full border border-white"}),(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsx)(aH.E.Label,{as:"p",className:"heading mb-1 mr-4 text-sm",children:e.label}),e.description&&(0,z.jsx)(aH.E.Description,{as:"span",className:"text-sm text-gray-3",children:(0,z.jsx)("span",{children:e.description})})]})]})})}},e.id))})]})},Switch=e=>{let{label:t,description:a,checked:s,onChange:r}=e;return(0,z.jsx)(tN.r.Group,{children:(0,z.jsxs)("div",{className:"toggle-switch flex flex-col",children:[(0,z.jsxs)("div",{className:"flex items-center gap-3",children:[(0,z.jsx)(tN.r,{checked:s,onChange:r,className:"relative inline-flex h-4 w-8 items-center rounded-full transition-colors ui-checked:bg-white ui-not-checked:bg-gray-dark [&_span]:ui-checked:translate-x-[20px] [&_span]:ui-checked:bg-black [&_span]:ui-not-checked:translate-x-[3px] [&_span]:ui-not-checked:bg-white",children:(0,z.jsx)("span",{className:"inline-block h-[10px] w-[10px] transform rounded-full transition-transform"})}),t&&(0,z.jsx)(tN.r.Label,{className:"heading mr-4 text-sm",children:t})]}),a&&(0,z.jsx)(tN.r.Description,{className:"mt-1 pl-11 text-sm text-gray-3",children:a})]})})},aZ="arbitrum:bridge:settings:testnetMode",SectionTitle=e=>{let{className:t,children:a}=e;return(0,z.jsx)("div",{className:(0,eo.m6)("heading mb-4 text-lg",t),children:a})},SettingsDialog=()=>{let e=(0,X.xx)(),t=(0,eU.CR)(e).isTestnet,[{settingsOpen:a},s]=useArbQueryParams(),[r,n]=(0,eS.ZP)(aL),[i,o]=(0,eS.ZP)(aZ),[l,d]=useTheme(),c=(0,Y.useCallback)(()=>{o(!0)},[o]),u=(0,Y.useCallback)(()=>{t?(0,ep.Iv)("Cannot disable Testnet mode while connected to a testnet network"):o(!1)},[t,o]);return(0,Y.useEffect)(()=>{t&&c()},[t,c]),(0,z.jsx)(SidePanel,{isOpen:a,heading:"Settings",onClose:function(){s({settingsOpen:!1})},panelClassNameOverrides:"lg:!w-[600px] !min-w-[350px]",children:(0,z.jsxs)("div",{className:"flex w-full flex-col items-center gap-8 text-white",children:[(0,z.jsxs)("div",{className:"w-full",children:[(0,z.jsx)(SectionTitle,{children:"Theme"}),(0,z.jsx)("div",{className:"flex w-full flex-col gap-2",children:(0,z.jsx)(Radio,{orientation:"vertical",value:l===aI?aI:"space",onChange:d,options:aR.map(e=>({label:e.label,description:e.description,value:e.id,id:e.id}))})})]}),(0,z.jsxs)("div",{className:"w-full",children:[(0,z.jsx)(SectionTitle,{children:"Stats"}),(0,z.jsx)(Switch,{label:"Show Network Stats",description:"Show live, nerdy stats about Ethereum and Arbitrum chains, like block number and current gas price.",checked:!!r,onChange:r?()=>{n(!1)}:()=>{n(!0)}})]}),(0,z.jsxs)("div",{className:(0,eo.m6)("w-full",t?"cursor-not-allowed opacity-20":""),children:[(0,z.jsx)(SectionTitle,{children:"Developer Mode"}),(0,z.jsx)(Switch,{label:"Turn on Testnet mode",description:"Show testnet networks and enable other testnet features.",checked:!!i,onChange:i?u:c})]}),(0,z.jsxs)("div",{className:(0,eo.m6)("w-full",i?"":"pointer-events-none opacity-20"),children:[(0,z.jsx)(SectionTitle,{className:"mb-1",children:"Add Testnet Orbit Chain"}),(0,z.jsxs)("p",{className:"mb-4 text-sm text-gray-3",children:["Add in your own Orbit Testnet to the bridge. This will only be for local testing. Learn more about how to create and add your Orbit Testnet to the bridge in"," ",(0,z.jsx)(ed.d,{className:"arb-hover text-blue-400 underline",href:ex.cC,children:"Arbitrum Orbit Quickstart"}),"."]}),(0,z.jsx)(AddCustomChain,{})]})]})})},az={layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9}};function MainContent(){let{closeTransactionHistoryPanel:e}=useAppContextActions(),{layout:{isTransactionHistoryPanelVisible:t}}=useAppContextState(),[a]=(0,eS.ZP)(aL),{app:{arbTokenBridge:s}}=tt(),{l2:r}=useNetworksAndSigners(),[n,i]=(0,Y.useState)({searchString:"",pageNumber:0,pageSize:10}),[o,l]=(0,Y.useState)({searchString:"",pageNumber:0,pageSize:10}),d=(0,Y.useMemo)(()=>(0,eU.CR)(r.network.id).isOrbitChain?5:10,[r.network.id]),{data:c={deposits:[],pendingDeposits:[],transformedDeposits:[]},isValidating:u,error:m}=useDeposits({...n,pageSize:d}),{data:p={withdrawals:[],pendingWithdrawals:[],transformedWithdrawals:[]},isValidating:h,error:x}=useWithdrawals({...o,pageSize:d});return(0,Y.useEffect)(()=>{var e,t;null==s||null===(t=s.transactions)||void 0===t||null===(e=t.setDepositsInStore)||void 0===e||e.call(t,c.pendingDeposits)},[JSON.stringify(c.pendingDeposits)]),(0,Y.useEffect)(()=>{var e;null==s||null===(e=s.setWithdrawalsInStore)||void 0===e||e.call(s,p.pendingWithdrawals)},[JSON.stringify(p.pendingWithdrawals)]),(0,z.jsxs)("div",{className:"flex w-full justify-center",children:[(0,z.jsxs)("div",{className:"main-panel w-full max-w-screen-lg flex-col space-y-6",children:[(0,z.jsx)("div",{className:"hidden text-center text-5xl",children:"Arbitrum Token Bridge"}),(0,z.jsx)(TransactionStatusInfo,{deposits:c.transformedDeposits}),(0,z.jsx)(tl.M,{children:(0,z.jsx)(td.E.div,{...az,className:"relative z-10",children:(0,z.jsx)(TransferPanel,{})},"transfer-panel")})]}),(0,z.jsx)(SidePanel,{isOpen:t,heading:"Transaction History",onClose:e,children:(0,z.jsx)(TransactionHistory,{depositsPageParams:{...n,pageSize:d},withdrawalsPageParams:{...o,pageSize:d},depositsData:c,depositsLoading:u,depositsError:m,withdrawalsData:p,withdrawalsLoading:h,withdrawalsError:x,setDepositsPageParams:i,setWithdrawalsPageParams:l})}),(0,z.jsx)(SettingsDialog,{}),a&&(0,z.jsx)(ArbitrumStats,{})]})}function ArbTokenBridgeStoreSync(e){let{tokenBridgeParams:t}=e,a=ta(),s=useArbTokenBridge(t);return(0,Y.useEffect)(()=>{a.app.setArbTokenBridge(s)},[s]),(0,z.jsx)(z.Fragment,{})}let BalanceUpdater=()=>{let{app:{arbTokenBridge:e,selectedToken:t}}=tt(),a=(0,tm.Z)(e);return(0,Y.useEffect)(()=>{let e=setInterval(()=>{if(t){var e,s;null==a||null===(s=a.current)||void 0===s||null===(e=s.token)||void 0===e||e.updateTokenData(t.address)}},1e4);return()=>clearInterval(e)},[t]),(0,z.jsx)(z.Fragment,{})},Hooks_useInterval=(e,t)=>{let a=(0,Y.useRef)(e),s=(0,Y.useRef)(void 0);return(0,Y.useEffect)(()=>{a.current=e},[e]),(0,Y.useEffect)(()=>(s.current=setInterval(()=>a.current(),t),()=>clearInterval(s.current)),[t]),{forceTrigger:()=>{clearInterval(s.current);let e=a.current();return s.current=setInterval(()=>a.current(),t),e}}};function PendingTransactionsUpdater(){let e=ta(),{l1:{provider:t,network:a},l2:{provider:s,network:r}}=useNetworksAndSigners(),{updateCctpTransactions:n}=function(){let{pendingIds:e,transfers:t,updateTransfer:a}=useCctpState(),{l1:{provider:s},l2:{provider:r}}=useNetworksAndSigners(),n=(0,Y.useCallback)(async e=>{let t="deposit"===e.direction?s:r,a=await t.getTransactionReceipt(e.txId);return{receipt:a,tx:e}},[s,r]),i=(0,Y.useMemo)(()=>e.map(e=>t[e]).filter(e=>e),[e,t]),o=(0,Y.useCallback)(async()=>{let e=await Promise.all(i.map(n)),t=ek()();e.forEach(e=>{var s;let{receipt:r,tx:n}=e;if(!r)return;let i=getL1ChainIdFromSourceChain(n),o=getBlockBeforeConfirmation(i),l=(0,eU.NM)(i);if(0===r.status)a({txId:r.transactionHash,status:"Failure"});else if(null===(s=n.cctpData)||void 0===s?void 0:s.receiveMessageTransactionHash)a({txId:r.transactionHash,status:"Executed"});else if(r.blockNumber&&!n.blockNum){let{messageBytes:e,attestationHash:t}=getAttestationHashAndMessageFromReceipt(r);a({txId:r.transactionHash,blockNum:r.blockNumber,cctpData:{messageBytes:e,attestationHash:t}})}else if(n.createdAt&&t.diff(n.createdAt,"second")>o*l){if("Failure"===n.status)return;a({txId:r.transactionHash,status:"Confirmed"})}})},[n,i,a]);return{updateCctpTransactions:o}}(),{app:{arbTokenBridge:i,arbTokenBridgeLoaded:o}}=tt(),{address:l}=(0,X.mA)(),{resetTransfers:d}=useCctpState();(0,Y.useEffect)(()=>{d()},[l,a.id,r.id,d]);let c=(0,Y.useCallback)(e=>{let a=2===txnTypeToLayer(e.type)?s:t;return a.getTransactionReceipt(e.txID)},[t,s]),u=(0,Y.useCallback)(()=>{if(!o)return;n();let t=e.app.getPendingTransactions();if(t.length)return console.info("Checking and updating ".concat(t.length," pending transactions' statuses")),Promise.all(t.map(e=>c(e))).then(e=>{e.forEach((e,a)=>{var s,r;e?null==i||null===(r=i.transactions)||void 0===r||r.updateTransaction(e):console.info("Transaction receipt not yet found:",null===(s=t[a])||void 0===s?void 0:s.txID)})})},[c,i,o]),{forceTrigger:m}=Hooks_useInterval(u,4e3);return(0,Y.useEffect)(()=>{m()},[o]),(0,z.jsx)(z.Fragment,{})}function RetryableTxnsIncluder(){var e,t;let a=ta(),{l1:{provider:s},l2:{provider:r}}=useNetworksAndSigners(),{app:{arbTokenBridge:n,arbTokenBridgeLoaded:i}}=tt(),o=(0,Y.useCallback)(async(e,t)=>{var a,i,o;let l=t===v.ETH,{l1ToL2Msg:d,isClassic:c}=await getL1ToL2MessageDataFromL1TxHash({depositTxId:e,isEthDeposit:l,l1Provider:s,l2Provider:r});if(!d)return;let u=await (null==d?void 0:d.status());if(c){null==n||null===(a=n.transactions)||void 0===a||a.fetchAndUpdateL1ToL2MsgClassicStatus(e,d,l,u);return}l?null==n||null===(i=n.transactions)||void 0===i||i.fetchAndUpdateEthDepositMessageStatus(e,d):null===(o=n.transactions)||void 0===o||o.fetchAndUpdateL1ToL2MsgStatus(e,d,!1,u)},[s,r,null==n?void 0:n.transactions]),l=(0,Y.useCallback)(async()=>{let e=a.app.getFailedRetryablesToRedeem();for(let t of e){let e=t.txId,a=t.asset;o(e,a)}},[null==n?void 0:null===(e=n.transactions)||void 0===e?void 0:e.addTransactions,o]),d=(0,Y.useCallback)(async()=>{let e=a.app.l1DepositsWithUntrackedL2Messages();for(let t of e){let e=t.txID,a=t.assetType;o(e,a)}},[null==n?void 0:null===(t=n.transactions)||void 0===t?void 0:t.addTransactions,o]),{forceTrigger:c}=Hooks_useInterval(d,5e3),{forceTrigger:u}=Hooks_useInterval(l,1e4);return(0,Y.useEffect)(()=>{c(),u()},[i]),(0,z.jsx)(z.Fragment,{})}let TokenListSyncer=()=>{let{app:{arbTokenBridge:e,arbTokenBridgeLoaded:t}}=tt(),{address:a}=(0,X.mA)(),{l2:{network:s}}=useNetworksAndSigners();return(0,Y.useEffect)(()=>{if(void 0===s||!t||!a)return;let r=tA.filter(e=>!!e.isArbitrumTokenTokenList||e.originChainID===s.id&&e.isDefault);r.forEach(t=>{addBridgeTokenListToBridge(t,e)})},[a,s,t]),(0,z.jsx)(z.Fragment,{})};var aY=a(48243);function HeaderNetworkLoadingIndicator(){return(0,z.jsx)("div",{className:"rounded-full p-3 lg:bg-dark lg:p-2",children:(0,z.jsx)(ea.a,{color:"white",size:"medium"})})}function HeaderNetworkInformation(){let{chain:e}=(0,X.LN)(),{isSmartContractWallet:t}=useAccountType();if(!e||e.unsupported)return null;let a=(0,eU.pp)(e.id);return(0,z.jsxs)("div",{className:"flex w-max flex-row items-center justify-center space-x-3 rounded-full text-white lg:bg-dark lg:px-4 lg:py-2 ","aria-label":"Selected Network : ".concat(a),children:[(0,z.jsx)("div",{className:(0,eo.m6)("flex h-10 w-10 items-center justify-center rounded-full lg:bg-transparent lg:p-0",(0,eU.CR)(e.id).isEthereumMainnetOrTestnet?"bg-[rgba(162,170,240,0.5)] p-1":""),children:(0,z.jsx)(en(),{src:(0,eU.Kn)(e.id,"light"),alt:"".concat(a," logo"),className:"h-full w-auto",width:40,height:40})}),(0,z.jsx)("span",{className:(0,eo.m6)("max-w-[200px] truncate text-2xl font-medium lg:text-base lg:font-normal",t?"pr-2":""),children:a}),!t&&(0,z.jsx)(tK.Z,{className:"h-4 w-4"})]})}var aX=a(26992),aV=a(6824),aK=a(94562),aq=a(47704),aJ=a(20620),aQ=a.n(aJ);let a$={name:null};function CustomBoringAvatar(e){let{size:t,name:a}=e;return(0,z.jsx)(aQ(),{size:t,name:null==a?void 0:a.toLowerCase(),variant:"beam",colors:["#11365E","#EDD75A","#73B06F","#0C8F8F","#405059"]})}async function tryLookupUDName(e,t){let a=aq.Resolution.fromEthersProvider({uns:{locations:{Layer1:{network:"mainnet",provider:e},Layer2:{network:"mainnet",provider:e}}}});try{return await a.reverse(t)}catch(e){return null}}function HeaderAccountPopover(e){var t,a;let{isCorrectNetworkConnected:s=!0}=e,r=(0,X.yL)({chainId:1}),{address:n}=(0,X.mA)(),{disconnect:i}=(0,X.qL)(),{chain:o}=(0,X.LN)(),[,l]=(0,af.Z)(),{openTransactionHistoryPanel:d,setTransactionHistoryTab:c}=useAppContextActions(),[,u]=useArbQueryParams(),[m,p]=(0,Y.useState)(!1),[h,x]=(0,Y.useState)(a$),{data:f}=(0,X.F6)({address:n,chainId:1}),{data:g}=(0,X.c9)({address:n,chainId:1});(0,Y.useEffect)(()=>{n&&resolveUdName();async function resolveUdName(){let e=await tryLookupUDName(r,n);x({name:e})}},[n,r]);let b=(0,Y.useMemo)(()=>void 0===n?"":shortenAddress(n),[n]),w="arb-hover flex w-full flex-row items-center space-x-2 px-12 py-2 text-lg lg:text-sm font-light text-white hover:bg-ocl-blue lg:px-4";return(0,z.jsxs)(t3.J,{className:"relative z-50 w-full lg:w-max",children:[(0,z.jsx)(t3.J.Button,{className:"arb-hover flex w-full justify-start rounded-full px-6 py-3 lg:w-max lg:p-0",role:"button","aria-label":"Account Header Button",children:(0,z.jsx)("div",{children:(0,z.jsxs)("div",{className:"flex flex-row items-center space-x-3 rounded-full lg:bg-dark lg:px-4 lg:py-2",children:[(0,z.jsx)(SafeImage,{src:g||void 0,className:"h-10 w-10 rounded-full",fallback:(0,z.jsx)(CustomBoringAvatar,{size:40,name:n})}),(0,z.jsx)("span",{className:"text-2xl font-medium text-white lg:text-base lg:font-normal",children:null!==(t=null!=f?f:h.name)&&void 0!==t?t:b}),(0,z.jsx)(tK.Z,{className:"h-4 w-4 text-white"})]})})}),(0,z.jsx)(em.u,{children:(0,z.jsxs)(t3.J.Panel,{className:"relative flex flex-col overflow-hidden rounded-md bg-dark pb-2 lg:absolute lg:mt-1 lg:shadow-[0px_4px_20px_rgba(0,0,0,0.2)]",children:[(0,z.jsxs)("div",{className:"flex flex-row justify-between",children:[(0,z.jsx)(em.u,{show:m,children:(0,z.jsx)("span",{className:"absolute left-[90px] top-[2rem] z-10 text-xs font-light text-white",children:"Copied to clipboard!"})}),(0,z.jsxs)("button",{className:"relative hidden flex-row items-center px-4 py-2 pt-[1rem] text-gray-5 hover:bg-ocl-blue hover:text-white lg:flex",onClick:()=>{var e,t,a;return a=null!==(t=null!==(e=null!=f?f:h.name)&&void 0!==e?e:n)&&void 0!==t?t:"",void(p(!0),l(a),setTimeout(()=>p(!1),1e3))},children:[(0,z.jsx)("div",{className:"absolute inset-0 flex h-[3rem] w-full flex-col items-center overflow-hidden bg-dark text-center",children:(0,z.jsx)("div",{className:"scale-400 blur-2xl filter",children:(0,z.jsx)(SafeImage,{className:"h-100 w-100 rounded-full",src:g||void 0,fallback:(0,z.jsx)(CustomBoringAvatar,{size:200,name:n})})})}),(0,z.jsxs)("div",{className:"relative z-10 flex flex-row items-center space-x-2",children:[(0,z.jsx)("div",{className:"avatar-container box-content rounded-full border-[4px] border-dark",children:(0,z.jsx)(SafeImage,{src:g||void 0,className:"h-14 w-14 rounded-full",fallback:(0,z.jsx)(CustomBoringAvatar,{size:56,name:n})})}),(0,z.jsxs)("div",{className:"flex translate-y-[15px] flex-row items-center space-x-3",children:[(0,z.jsx)("span",{className:"max-w-[10rem] overflow-hidden text-ellipsis text-sm font-normal",children:null!==(a=null!=f?f:h.name)&&void 0!==a?a:b}),(0,z.jsx)(ag.Z,{className:"h-4 w-4"})]})]})]})]}),(0,z.jsxs)("div",{className:"flex w-full flex-col justify-between lg:flex-col lg:items-end lg:px-0",children:[s&&(0,z.jsxs)("button",{className:w,onClick:function(){c(y.DEPOSITS),d(),trackEvent("Open Transaction History Click",{pageElement:"Header"})},children:[(0,z.jsx)(aX.Z,{className:"h-4 w-4 text-white"}),(0,z.jsx)("span",{children:"Transactions"})]}),s&&o&&(0,z.jsxs)(ed.d,{href:"".concat((0,eU.jY)(o.id),"/address/").concat(n),className:w,children:[(0,z.jsx)(tO.Z,{className:"h-4 w-4 text-white"}),(0,z.jsx)("span",{children:"Explorer"})]}),s&&(0,z.jsxs)("button",{className:w,onClick:()=>u({settingsOpen:!0}),children:[(0,z.jsx)(aV.Z,{className:"h-4 w-4 text-white"}),(0,z.jsx)("span",{children:"Settings"})]}),(0,z.jsxs)("button",{className:w,onClick:()=>i(),children:[(0,z.jsx)(aK.Z,{className:"h-4 w-4 text-white"}),(0,z.jsx)("span",{children:"Disconnect"})]})]})]})})]})}var a0=a(82772),a2=a(35185);let NetworkSelectionContainer=e=>{let{children:t}=e,{chain:a}=(0,X.LN)(),{switchNetwork:s}=useSwitchNetworkWithConfig(),[r]=(0,eS.ZP)(aZ),n=(0,a2.Z)(),i=n.width>=1024,o=(0,eU.JB)(null==a?void 0:a.id,!!r).filter(e=>e!==(null==a?void 0:a.id)),{isSmartContractWallet:l,isLoading:d}=useAccountType(),c=o.filter(e=>(0,eU.CR)(e).isEthereumMainnetOrTestnet),u=o.filter(e=>(0,eU.CR)(e).isArbitrum),m=o.filter(e=>(0,eU.CR)(e).isOrbitChain),p=[];c.length>0&&p.push({id:"l1",title:"L1",networks:c}),u.length>0&&p.push({id:"l2",title:"L2",networks:u}),m.length>0&&p.push({id:"orbit",title:"Orbit",networks:m});let h=(0,Y.useCallback)((e,t)=>{null==s||s(Number(e)),null==t||t()},[s]);return(0,z.jsxs)(t3.J,{className:"relative z-50 w-full lg:w-max",children:[(0,z.jsx)(t3.J.Button,{disabled:l||d,className:"arb-hover flex w-full justify-start rounded-full px-6 py-3 lg:w-max lg:p-0",children:t}),(0,z.jsx)(ec.u,{children:(0,z.jsx)(t3.J.Panel,{className:"relative flex w-full flex-col justify-between rounded-md lg:absolute lg:ml-1 lg:mt-1 lg:w-max lg:-translate-x-12 lg:flex-row lg:gap-3 lg:bg-white lg:p-2 lg:shadow-[0px_4px_20px_rgba(0,0,0,0.2)]",children:e=>{let{close:t}=e;return(0,z.jsx)(z.Fragment,{children:p.map(e=>(0,z.jsxs)("div",{className:"shrink-0",children:[p.length>1&&(0,z.jsx)("div",{className:"p-2 px-12 text-xl text-white lg:px-4 lg:text-dark",children:e.title}),e.networks.map(e=>(0,z.jsxs)("button",{className:"flex h-10 cursor-pointer flex-nowrap items-center justify-start space-x-3 px-12 text-lg font-light text-white hover:bg-gray-3 focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-gray-4 lg:px-4 lg:text-base lg:font-normal lg:text-dark",onClick:()=>{h(e,t)},onKeyDown:a=>{("Enter"===a.key||13===a.keyCode)&&h(e,t)},type:"button","aria-label":"Switch to ".concat((0,eU.pp)(Number(e))),children:[(0,z.jsx)("div",{className:"flex h-6 w-6 items-center justify-center lg:h-6 lg:w-6",children:(0,z.jsx)(en(),{src:(0,eU.Kn)(Number(e),i?"dark":"light"),alt:"".concat((0,eU.pp)(Number(e))," logo"),className:"h-full w-auto",width:24,height:24})}),(0,z.jsx)("span",{className:"max-w-[140px] truncate",children:(0,eU.pp)(Number(e))})]},e))]},e.id))})}})})]})};function NetworkButtonAndConnectButton(e){let{connected:t,chainUnsupported:a,openConnectModal:s,openChainModal:r}=e;return t?a?(0,z.jsx)("button",{onClick:r,type:"button",className:"arb-hover flex w-full flex-row items-center bg-[#FF494A] bg-lime-dark px-6 py-3 text-2xl font-medium text-white lg:rounded-full lg:px-4 lg:py-2 lg:text-base lg:font-normal",children:"Wrong network"}):(0,z.jsxs)("div",{className:"flex gap-3",children:[(0,z.jsx)(NetworkSelectionContainer,{children:(0,z.jsx)(HeaderNetworkInformation,{})}),(0,z.jsx)(HeaderAccountPopover,{})]}):(0,z.jsxs)("button",{onClick:s,type:"button",className:"arb-hover flex w-full flex-row items-center bg-lime-dark px-6 py-3 text-2xl font-medium text-white lg:rounded-full lg:bg-lime-dark lg:px-4 lg:py-2 lg:text-base lg:font-normal",children:[(0,z.jsx)(a0.Z,{className:"mr-3 h-10 w-10 rounded-full bg-white stroke-lime-dark p-1 opacity-40"}),"Connect Wallet"]})}function HeaderConnectWalletButtonWrapper(e){let{children:t,ready:a}=e;return(0,z.jsx)("div",{className:a?"":"pointer-events-none select-none opacity-0","aria-hidden":!a,children:t})}function HeaderConnectWalletButton(){return(0,z.jsx)(K.NL.Custom,{children:e=>{let{account:t,chain:a,openChainModal:s,openConnectModal:r,mounted:n}=e;return(0,z.jsx)(HeaderConnectWalletButtonWrapper,{ready:n,children:(0,z.jsx)(NetworkButtonAndConnectButton,{connected:!!(n&&t&&a),chainUnsupported:null==a?void 0:a.unsupported,openChainModal:s,openConnectModal:r})})}})}function NotificationContainer(e){let{children:t}=e;return(0,z.jsx)("div",{className:"my-2 flex w-full justify-center bg-black lg:mb-6",children:(0,z.jsx)("div",{className:"w-full max-w-[1440px] lg:px-8",children:(0,z.jsx)("div",{className:"flex w-full flex-wrap gap-2",children:t})})})}function Notification(e){let{infoIcon:t,children:a,mode:s="dark"}=e;return(0,z.jsxs)("div",{className:(0,eo.m6)("mx-6 flex w-auto gap-2 rounded-md text-sm lg:mx-0","light"===s?"text-dark":"text-cyan"),children:[t&&(0,z.jsx)(tp.Z,{className:"inline-block h-5 w-5 text-gray-dark","aria-hidden":"true"}),a]})}function NitroDevnetNotification(){return(0,z.jsx)(Notification,{infoIcon:!0,children:(0,z.jsx)(ed.d,{href:"".concat(ex.Gc,"/for-devs/troubleshooting-building#what-is-a-testnet-or-a-devnet"),className:"arb-hover",children:"What is Nitro Testnet?"})})}function Notifications(){let{l1:e}=useNetworksAndSigners(),{isGoerli:t}=(0,eU.CR)(e.network.id);return(0,z.jsx)(NotificationContainer,{children:t&&(0,z.jsx)(NitroDevnetNotification,{})})}let a1={[eU.a_.Ethereum]:{btnThemeClass:"bg-ocl-blue"},[eU.a_.ArbitrumOne]:{btnThemeClass:"bg-ocl-blue"},[eU.a_.ArbitrumNova]:{btnThemeClass:"bg-brick-dark"}},MainNetworkNotSupported=e=>{let{supportedNetworks:t}=e,{switchNetwork:a}=useSwitchNetworkWithConfig();return(0,z.jsxs)("div",{className:"flex max-w-lg flex-col items-center space-y-8 px-12 py-12 md:items-start md:pl-0 md:pr-24",children:[(0,z.jsx)("div",{className:"flex w-full justify-center",children:(0,z.jsx)("span",{className:"center py-4 text-3xl font-medium text-white",children:"Oops! Youre connected to the wrong network"})}),null==t?void 0:t.map(e=>{var t,s;return(0,z.jsx)(el,{variant:"primary",onClick:()=>null==a?void 0:a(Number(e)),textLeft:!0,className:"text-md ".concat(null!==(s=null==a1?void 0:null===(t=a1[Number(e)])||void 0===t?void 0:t.btnThemeClass)&&void 0!==s?s:""," w-full min-w-max justify-start px-5 py-2"),"aria-label":"Switch to ".concat((0,eU.pp)(Number(e))),children:(0,z.jsxs)("div",{className:"flex flex-row items-center justify-center space-x-3",children:[(0,z.jsx)("div",{className:"flex h-8 w-8 items-center justify-center",children:(0,z.jsx)(en(),{src:(0,eU.Kn)(Number(e)),alt:"".concat((0,eU.pp)(Number(e))," logo"),className:"h-full w-auto",width:32,height:32})}),(0,z.jsxs)("span",{children:[" ","Switch to ".concat((0,eU.pp)(Number(e)))]})]})},e)})]})};function HeaderNetworkNotSupported(){return(0,z.jsxs)("div",{className:"flex flex-col",children:[(0,z.jsxs)("div",{className:"flex flex-row items-center justify-start space-x-2 rounded-full py-4 text-white lg:justify-center lg:bg-brick-dark lg:px-4",children:[(0,z.jsx)(eh.Z,{className:"h-6 w-6  text-brick lg:text-white"}),(0,z.jsx)("span",{className:"text-2xl text-brick lg:text-base",children:"Wrong network"}),(0,z.jsx)(tK.Z,{className:"h-4 w-4"})]}),(0,z.jsx)("span",{className:"pl-11 text-left text-sm text-brick lg:hidden lg:text-center",children:"Please change your network in your wallet to either Ethereum or Arbitrum"})]})}var a3=a(97696),a4=a(94608),a6=a(1072),a5=a(6395),a8=a(21824),a9=a(73045);let a7=(0,eU.ud)().map(e=>chainToWagmiChain(e)),se=tI?[eF.RJ,eF.yX,eH,eF.ws,eF.Jn,eG,eW,eZ,eY,ez,eX,eV,...a7]:[eF.RJ,eF.yX,eH,eF.ws,eF.Jn,eG,eW,eZ,eY,ez,...a7],st="8074051a7b10a0130a26e209106461a3";st||console.error("NEXT_PUBLIC_WALLETCONNECT_PROJECT_ID variable missing.");let sa={appName:"Bridge to Arbitrum",projectId:st};async function isBlocked(e){let t=new URLSearchParams({address:e}),a=await fetch("/api/screenings?"+t,{method:"GET",headers:{"Content-Type":"application/json"}});return!!a.ok&&(await a.json()).blocked}async function fetcher(e){let t=await isBlocked(e);return t&&trackEvent("Address Block",{address:e}),t}(w=H||(H={})).Ethereum="mainnet",w.ArbitrumOne="arbitrum-one",w.ArbitrumNova="arbitrum-nova",w.Goerli="goerli",w.ArbitrumGoerli="arbitrum-goerli",w.Sepolia="sepolia",w.ArbitrumSepolia="arbitrum-sepolia",w.Inspace="inspace-network";let ss=(0,q.Z)((0,V.$)(),{colors:{accentColor:"var(--blue-link)"},fonts:{body:"'Space Grotesk', sans-serif"}}),AppContent=()=>{let{chain:e}=(0,X.LN)(),{app:{connectionState:t}}=tt(),a=(0,Y.useMemo)(()=>{var t;let{isTestnet:a,isGoerli:s}=(0,eU.CR)(null!==(t=null==e?void 0:e.id)&&void 0!==t?t:0),r=a?"lg:bg-ocl-blue":"lg:bg-black";return s?{imageSrc:"images/HeaderArbitrumLogoGoerli.webp",className:r}:{imageSrc:"images/HeaderArbitrumLogoMainnet.svg",className:r}},[e]);return t===et.em.SEQUENCER_UPDATE?(0,z.jsx)(Alert,{type:"red",children:"Note: The Arbitrum Sequencer Will be offline today 3pm-5pm EST for maintenance. Thanks for your patience!"}):t===et.em.NETWORK_ERROR?(0,z.jsxs)(Alert,{type:"red",children:["Error: unable to connect to network. Try again soon and contact"," ",(0,z.jsx)("a",{rel:"noreferrer",target:"_blank",href:ex.sR,children:(0,z.jsx)("u",{children:"support"})})," ","if problem persists."]}):(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(aY.$y,{...a}),(0,z.jsxs)(aY.oB,{children:[(0,z.jsx)(NetworkSelectionContainer,{children:(0,z.jsx)(HeaderNetworkInformation,{})}),(0,z.jsx)(HeaderAccountPopover,{})]}),(0,z.jsx)(PendingTransactionsUpdater,{}),(0,z.jsx)(RetryableTxnsIncluder,{}),(0,z.jsx)(TokenListSyncer,{}),(0,z.jsx)(BalanceUpdater,{}),(0,z.jsx)(Notifications,{}),(0,z.jsx)(MainContent,{})]})},Injector=e=>{let{children:t}=e,a=ta(),{app:s}=tt(),{selectedToken:r}=s,{chain:n}=(0,X.LN)(),{address:i,isConnected:o}=(0,X.mA)(),{isBlocked:l}=function(){let{address:e}=(0,X.mA)(),t=(0,X.xx)(),a=(0,Y.useMemo)(()=>void 0===e||(0,eU.CR)(t).isTestnet?null:[e.toLowerCase(),"useAccountIsBlocked"],[e,t]),{data:s}=(0,e6.Z)(a,e=>{let[t]=e;return fetcher(t)});return{isBlocked:s}}(),d=useNetworksAndSigners(),{l2:c}=d,u=useNativeCurrency({provider:c.provider});useCCTPIsBlocked();let[m,p]=(0,Y.useState)(null),h=(0,Y.useCallback)(async e=>{let{l1:t,l2:a}=e;i&&p({l1:{network:t.network,provider:t.provider},l2:{network:a.network,provider:a.provider}})},[i]);return((0,Y.useEffect)(()=>{var e;if(!u.isCustom)return;let t=null==r?void 0:r.address.toLowerCase(),s=null==r?void 0:null===(e=r.l2Address)||void 0===e?void 0:e.toLowerCase();(t===u.address||s===u.address)&&a.app.setSelectedToken(null)},[r,u]),(0,Y.useEffect)(()=>{if(p(null),a.app.setConnectionState(et.em.LOADING),!o||!n)return;let{l1:e,l2:t}=d,s=(0,eU.CR)(n.id).isArbitrum,r=(0,eU.CR)(n.id).isOrbitChain,i=e.network.id,l=t.network.id,c=(0,eU.CR)(i).isEthereumMainnetOrTestnet;a.app.reset(n.id),a.app.setChainIds({l1NetworkChainId:i,l2NetworkChainId:l}),c&&s||r?(console.info("Withdrawal mode detected:"),a.app.setIsDepositMode(!1),a.app.setConnectionState(et.em.L2_CONNECTED)):(console.info("Deposit mode detected:"),a.app.setIsDepositMode(!0),a.app.setConnectionState(et.em.L1_CONNECTED)),h(d)},[d,n,o,h,i]),(0,Y.useEffect)(()=>{J.Z.get("https://raw.githubusercontent.com/OffchainLabs/arb-token-lists/aff40a59608678cfd9b034dd198011c90b65b8b6/src/WarningList/warningTokens.json").then(e=>{a.app.setWarningTokens(e.data)}).catch(e=>{console.warn("Failed to fetch warning tokens:",e)})},[]),i&&l)?(0,z.jsx)(BlockedDialog,{address:i,isOpen:!0,onClose:()=>{}}):(0,z.jsxs)(z.Fragment,{children:[m&&(0,z.jsx)(ArbTokenBridgeStoreSync,{tokenBridgeParams:m}),t]})};function NetworkReady(e){let{children:t}=e,[{l2ChainId:a}]=useArbQueryParams();return(0,z.jsx)(NetworksAndSignersProvider,{selectedL2ChainId:a||void 0,fallback:e=>(0,z.jsx)(ConnectionFallback,{...e}),children:t})}function ConnectionFallback(e){let{chain:t}=(0,X.LN)();switch(e.status){case N.LOADING:return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(aY.oB,{children:(0,z.jsx)(HeaderNetworkLoadingIndicator,{})}),(0,z.jsx)(a3.N,{children:(0,z.jsx)("div",{className:"fixed inset-0 m-auto h-[44px] w-[44px]",children:(0,z.jsx)(ea.a,{color:"white",size:"large"})})})]});case N.NOT_CONNECTED:return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(aY.oB,{children:(0,z.jsx)(HeaderConnectWalletButton,{})}),(0,z.jsx)(a3.N,{children:(0,z.jsx)("span",{className:"text-white",children:"Please connect your wallet to use the bridge."})})]});case N.NOT_SUPPORTED:let a=(0,eU.JB)(null==t?void 0:t.id);return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(aY.oB,{children:[(0,z.jsx)(NetworkSelectionContainer,{children:(0,z.jsx)(HeaderNetworkNotSupported,{})}),(0,z.jsx)(HeaderAccountPopover,{isCorrectNetworkConnected:!1})]}),(0,z.jsx)(a3.N,{layout:"row",imgProps:{className:"sm:w-[300px]",src:a4.Z,alt:"Arbinaut fixing a spaceship"},children:(0,z.jsx)(MainNetworkNotSupported,{supportedNetworks:a})})]})}}let sr=new URLSearchParams(window.location.search),sn=sr.get("walletConnectChain"),{wagmiConfigProps:si,rainbowKitProviderProps:so}=function(e){let{chains:t,provider:a}=(0,eA.QB)(function(e){let t=function(e){switch(e){case"mainnet":return eU.a_.Ethereum;case"arbitrum-one":return eU.a_.ArbitrumOne;case"arbitrum-nova":return eU.a_.ArbitrumNova;case"goerli":return eU.a_.Goerli;case"arbitrum-goerli":return eU.a_.ArbitrumGoerli;case"sepolia":return eU.a_.Sepolia;case"arbitrum-sepolia":return eU.a_.ArbitrumSepolia;case"inspace-network":return eU.a_.Inspace}}(e),a=se.filter(e=>e.id===t),s=se.filter(e=>e.id!==t);return[...a,...s]}(null!==e&&Object.values(H).includes(e)?e:"mainnet"),[(0,a9.$)({apiKey:"9583a29c5a9347faa78c5d389488b5d2"}),(0,a6.I)()]),{wallets:s}=(0,a5.wo)({...sa,chains:t}),r=(0,a5.a3)([...s,{groupName:"More",wallets:[(0,a8.p)({chains:t,projectId:st})]}]),n=(0,X.eI)({autoConnect:!0,connectors:r,provider:a});return{rainbowKitProviderProps:{appInfo:sa,chains:t},wagmiConfigProps:{client:n}}}(sn);function App(){let[e]=(0,Y.useState)((0,Q.bk)(te)),[t,a]=(0,ee.Z)(ex.Yc),[s,r]=useDialog(),n=void 0!==t;return(0,Y.useEffect)(()=>{n||r()},[n,r]),(0,z.jsx)($.zt,{value:e,children:(0,z.jsx)(ArbQueryParamProvider,{children:(0,z.jsx)(X.eM,{...si,children:(0,z.jsxs)(K.pj,{theme:ss,...so,children:[(0,z.jsx)(WelcomeDialog,{...s,onClose:function(e){e&&(a("true"),s.onClose(e))}}),(0,z.jsx)(NetworkReady,{children:(0,z.jsx)(AppContextProvider,{children:(0,z.jsx)(Injector,{children:n&&(0,z.jsx)(AppContent,{})})})})]})})})})}Object.keys(localStorage).forEach(e=>{("wagmi.requestedChains"===e||e.startsWith("wc@2"))&&localStorage.removeItem(e)})},56962:function(){},38087:function(){},50633:function(){},30488:function(){}}]);
//# sourceMappingURL=2427.ee549d1ab8dfe5c7.js.map